/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var ze=Object.defineProperty;var ci=Object.getOwnPropertyDescriptor;var gi=Object.getOwnPropertyNames;var mi=Object.prototype.hasOwnProperty;var Zt=(s,i)=>{for(var t in i)ze(s,t,{get:i[t],enumerable:!0})},bi=(s,i,t,e)=>{if(i&&typeof i=="object"||typeof i=="function")for(let o of gi(i))!mi.call(s,o)&&o!==t&&ze(s,o,{get:()=>i[o],enumerable:!(e=ci(i,o))||e.enumerable});return s};var hi=s=>bi(ze({},"__esModule",{value:!0}),s);var fn={};Zt(fn,{default:()=>Ue});module.exports=hi(fn);var E=require("obsidian");var M=require("obsidian");var oo=require("obsidian");var Ge={};Zt(Ge,{command:()=>fi,default:()=>Si,notice:()=>yi,plugin:()=>wi,setting:()=>vi,toolbar:()=>Ti});var fi={"name-focus":"Fokus","name-item-suggester":"Schnellwahl \xF6ffen","name-settings":"Plugin-Einstellungen \xF6ffnen","name-toolbar-settings":"Toolbar-Einstellungen \xF6ffnen","name-show-properties":"Eigenschaften anzeigen","name-hide-properties":"Eigenschaften ausblenden","name-fold-properties":"Eigenschaften einklappen","name-toggle-properties":"Eigenschaften-Anzeige umschalten"},yi={"error-command-not-found":"\xDCberpr\xFCfung der Note Toolbar Einstellungen auf diesen Befehl. Befehl nicht gefunden: {{command}}","error-folder-not-found":"\xDCberpr\xFCfung der Note Toolbar Einstellungen auf diesen Ordner. Ordner nicht gefunden: {{folder}}","error-item-menu-not-found":"\xDCberpr\xFCfung der Note Toolbar Einstellungen auf diesen Men\xFC-Punkt. Toolbar nicht gefunden: {{toolbar}}","error-toolbar-not-found":"\xDCberpr\xFCfung der Note Toolbar Einstellungen auf diese Toolbar. Toolbar nicht gefunden: {{folder}}"},wi={name:"Note Toolbar"},vi={"button-cancel":"Abbrechen","button-delete-tooltip":"L\xF6schen","button-drag-tooltip":"Ziehen zum Umsortieren","button-learn-more":"Mehr\xA0erfahren","button-user-guide":"Benutzer\xA0Handbuch","error-old-settings-name":"\u26A0\uFE0F Fehler: Bitte Note Toolbar deaktivieren und reaktivieren, oder Obsidian neustarten.","error-old-settings-description":"Alte Einstellungsdatei geladen ({{oldVersion}}), aber aktuellste ist {{currentVersion}}","option-platform-desktop":"Desktop","option-platform-mobile":"Mobile","title-edit-toolbar":"Toolbar bearbeiten: {{toolbar}}","title-edit-toolbar_none":"Toolbar bearbeiten","delete-toolbar":{name:"Diese Toolbar l\xF6schen",description:"Dies kann nicht r\xFCckg\xE4ngig gemacht werden.",title:"Toolbar l\xF6schen: {{toolbar}}","button-delete":"L\xF6schen...","button-delete-confirm":"L\xF6schen","button-delete-tooltip":"Diese Toolbar l\xF6schen","label-delete-confirm":"Sind Sie sicher, dass sie diese Toolbar l\xF6schen m\xF6chten?"},"display-rules":{name:"Anzeigeregeln",description:"Einstellung bei welchen Notizen eine Toolbar angezeigt wird.","option-property":"Eigenschaft","option-property-description":"Wenn in dieser Eigenschaft ein Symbolleistenname gefunden wird, wird die Symbolleiste in der Notiz angezeigt. Sie hat Vorrang vor allen Ordnerzuordnungen. Setzen Sie sie auf \u201Enone\u201C, um die Symbolleiste auszublenden.","option-property-placeholder":"Eigenschaft","option-folder-all":"Alle Ordner","option-folder-root":"Nur Hauptordner","option-folder-mappings":"Ordnerzuordnung","option-folder-mappings-description":"Notizen in den nachfolgenden Ordnern zeigen die ihnen zugeordnete Symbolleiste an. Die Rangfolge ist von oben nach unten.","option-folder-mappings-empty":"Knopf dr\xFCcken um eine Zuordnung zu erstellen.","placeholder-mapping-folder":"Ordner","placeholder-mapping-toolbar":"Toolbar","button-new-mapping":"+ Neue Zuordnung","button-new-mapping-tooltip":"Neue Zuordnung erstellen","error-folder-already-mapped":"Diesem Ordner ist bereits eine Toolbar zugeordnet."},"icon-suggester":{"option-no-icon":"Kein Symbol",placeholder:"Symbol suchen","instruction-navigate":"zum Navigieren","instruction-use":"zur Verwendung","instruction-dismiss":"zum Verwerfen"},item:{"button-duplicate-tooltip":"Dieses Element duplizieren","button-icon-tooltip":"Symbol w\xE4hlen (optional)","label-preview-edit":"Toolbar bearbeiten: {{toolbar}}","label-preview-empty-no-items":"Keine Elemente. Toolbar bearbeiten, um Elemente hinzuzuf\xFCgen.","option-break":"Umbruch","option-command":"Befehl","option-command-placeholder":"Befehl suchen","option-component-icon":"Symbol","option-component-label":"Bezeichnung","option-file":"Datei","option-file-placeholder":"Datei oder Ordner suchen","option-file-error-does-not-exist":"Datei oder Ordner existiert nicht.","option-item-group":"Element-Gruppe","option-item-group-placeholder":"Toolbar","option-item-group-help":"Symbolleiste ausw\xE4hlen, um sie in diese einzuf\xFCgen.","option-item-group-error-does-not-exist":"Toolbar exisitert nicht.","option-item-menu":"Element-Men\xFC","option-item-menu-placeholder":"Toolbar","option-item-menu-help":"Toolbar w\xE4hlen, um sie als Men\xFC zu \xF6ffnen.","option-item-menu-error-does-not-exist":"Toolbar existiert nicht.","option-label-placeholder":"Bezeichnung (optional, bei Symbolwahl)","option-separator":"Trenner","option-tooltip-placeholder":"Tooltip (optional)","option-uri":"URI","option-uri-placehoder":"Webseite, URI oder Notiztitel","option-uri-help":"Tipp: Verwenden Sie Notiz-Eigenschaften in URIs.","option-visibility-component-hidden-platform":"{{component}} ausgeblendet auf {{platform}}","option-visibility-component-visible-platform":"{{component}} sichtbar auf {{platform}}","option-visibility-hidden":"ausgeblendet","option-visibility-hidden-platform":"ausgeblendet auf {{platform}}","option-visibility-visible-platform":"sichtbar auf {{platform}}","option-visibility-platform-desktop":"Desktop","option-visibility-platform-mobile":"Mobile"},"item-suggester":{placeholder:"Element suchen...","instruction-navigate":"zum Navigieren","instruction-use":"zur Verwendung","instruction-dismiss":"zum Verwerfen"},items:{name:"Elemente","name-with-count":"Elemente ({{count}})",description:"Elemente zur Toolbar hinzuf\xFCgen, in Reihenfolge.","label-empty-no-items":"Keine Toolbar-Elemente.","button-add-break-tooltip":"Zeilenumbruch zur Toolbar hinzuf\xFCgen.","button-add-separator-tooltip":"Trenner zur Toolbar hinzuf\xFCgen","button-collapse-items-tooltip":"Alle Elemente zusammenklappen.","button-expand-items-tooltip":"Alle Elemente ausklappen.","button-new-item":"+ Toolbar-Element hinzuf\xFCgen","button-new-item-tooltip":"Neues Element der Toolbar hinzuf\xFCgen","option-item-empty-label":"Keine Bezeichnung festgelegt","option-edit-item-group-tooltip":"Element-Gruppe bearbeiten: {{toolbar}}","option-edit-item-group-tooltip_none":"Element-Gruppe bearbeiten","option-edit-item-tooltip":"Toolbar-Element bearbeiten","option-edit-item-type-tooltip":"Bearbeiten {{itemType}}"},name:{name:"Name",description:"Dieser Toolbar einen eindeutigen Namen geben.","error-toolbar-already-exists":"Eine Toolbar mit diesem Namen existiert bereits."},other:{name:"Sonstiges",icon:{name:"Symbol",description:"Legt das Symbol f\xFCr die schwebende Schaltfl\xE4che und die Navigationsleiste (mobil) fest. Erfordert einen Neustart.",tooltip:"Symbol w\xE4hlen"},"show-edit-tbar":{name:"Zeige 'Toolbar bearbeiten' in Toolbar-Men\xFCs",description:"F\xFCgt ein Element f\xFCr den Zugriff auf die Einstellungen der Symbolleiste in den Men\xFCs der Symbolleiste hinzu."}},position:{name:"Position",description:"Positionierung der Toolbar.","option-mobile-help":"Tipp: Greifen Sie \xFCber die Navigationsleiste auf die Symbolleisten zu.","option-fabl":"schwebende Schaltfl\xE4che: links","option-fabr":"schwebende Schaltfl\xE4che: rechts","option-hidden":"ausgeblendet","option-hidden-mobile":"ausgeblendet / Navigationsleiste","option-props":"unterhalb der Eigenschaften","option-top":"oben (fixiert)"},styles:{name:"Stile",description:"Liste der Stile, die auf die Symbolleiste angewendet werden sollen.",help:"Passen Sie noch mehr an mit dem Style Settings Plugin.","option-autohide":"automatisch ausblenden*","option-autohide-disclaimer":"Automatisches Ausblenden funktioniert nicht auf Mobilger\xE4ten.","option-between":"Abstand zwischen den Elementen","option-border":"Rand","option-button":"Schaltfl\xE4chenelemente","option-center":"Elemente zentrieren","option-even":"Elemente gleichm\xE4\xDFig verteilen","option-floatl":"nach links schwebend*","option-floatl-disclaimer":"Schwebend nach links funktioniert nur innerhalb von Callouts.","option-floatr":"nach rechts schwebend*","option-floatr-disclaimer":"Schwebend nach rechts funktioniert nur innerhalb von Callouts.","option-left":"Elemente links ausrichten","option-noborder":"kein Rand","option-nofloat":"kein Schwebend","option-notsticky":"nicht fixiert","option-nowrap":"Elemente nicht umschlie\xDFen*","option-nowrap-disclaimer":"Funktioniert am besten, wenn Elemente nicht gleichm\xE4\xDFig verteilt oder zentriert sind.","option-nowide":"Inhaltbreite*","option-nowide-disclaimer":"Inhaltbreite funktioniert nur, wenn die Symbolleistenposition oben (fest) ist.","option-right":"Elemente rechts ausrichten","option-sticky":"fixiert*","option-sticky-disclaimer":"Fixiert funktioniert nicht im Lesemodus.","option-wide":"Editorbreite*","option-wide-disclaimer":"Editorbreite funktioniert nur, wenn die Symbolleistenposition oben (fest) ist.","option-default-name":"Standard","option-default-description":"Gilt f\xFCr alle Plattformen, sofern nicht \xFCberschrieben.","option-default-empty":"Keine Standardstile festgelegt.","option-mobile-name":"Mobil","option-mobile-description":"Standardstile \xFCberschreiben.","option-mobile-empty":"Keine mobilen Stile festgelegt. Verwende Standardstile.","style-tooltip-use-class":"In Callout oder CSS verwenden: {{class}}","style-remove-tooltip":"Entfernen"},toolbars:{name:"Toolbars","name-with-count":"Toolbars ({{count}})",description:"Definieren Sie die Toolbars, die Sie zu Ihren Notizen hinzuf\xFCgen m\xF6chten.","button-collapse-tbars-tooltip":"Alle Toolbars minimieren","button-duplicate-tbar-tooltip":"Diese Toolbar duplizieren","button-edit-tbar":"Bearbeiten","button-expand-tbars-tooltip":"Alle Toolbars erweitern","button-edit-tbar-tooltip":"Diese Toolbar erweitern","button-new-tbar":"+ Neue Toolbar","button-new-tbar-tooltip":"Neue Toolbar hinzuf\xFCgen","duplicate-file-suffix":"Kopieren","label-empty-create-tbar":"Klicken Sie auf die Schaltfl\xE4che, um eine Toolbar zu erstellen.","label-tbar-name-not-set":"\u26A0\uFE0F Toolbar-Name nicht festgelegt"},usage:{name:"Verwendung",description:"Diese Toolbar wird in {{mappingCount}} Zuordnung(en) und {{itemCount}} Toolbar-Element(en) verwendet..","description-search":"Nach der Verwendung von Eigenschaften suchen"}},Ti={"button-floating-tooltip":"Note Toolbar \xF6ffnen","menu-edit-toolbar":"Toolbar bearbeiten: {{toolbar}}...","menu-position-props":"Position festlegen: Unter Eigenschaften","menu-position-top":"Position festlegen: Oben (fest)","menu-toolbar-settings":"Note Toolbar Einstellungen..."},Si={command:fi,notice:yi,plugin:wi,setting:vi,toolbar:Ti};var Ke={};Zt(Ke,{command:()=>Ei,default:()=>Ai,notice:()=>Ci,plugin:()=>ki,setting:()=>Di,toolbar:()=>Ii});var Ei={"name-focus":"Focus","name-item-suggester":"Open quick tools","name-toolbar-suggester":"Open quick toolbars","name-settings":"Open plugin settings","name-toolbar-settings":"Open toolbar settings","name-show-properties":"Show Properties","name-hide-properties":"Hide Properties","name-fold-properties":"Fold Properties","name-toggle-properties":"Toggle Properties"},Ci={"error-command-not-found":"Check Note Toolbar setting for this command. Command not found: {{command}}","error-folder-not-found":"Check Note Toolbar setting for this folder. Folder not found: {{folder}}","error-item-menu-not-found":"Check Note Toolbar setting for this menu item. Toolbar not found: {{toolbar}}","error-toolbar-not-found":"Check Note Toolbar setting for this toolbar. Toolbar not found: {{folder}}"},ki={name:"Note Toolbar"},Di={"button-cancel":"Cancel","button-delete-tooltip":"Delete","button-drag-tooltip":"Drag to rearrange","button-help":"Help","button-help-tooltip":"Open the help window","button-learn-more":"Learn\xA0more","button-user-guide":"User\xA0Guide","button-whats-new":"What's\xA0new?","button-whats-new-tooltip":"Open the What's New window","error-old-settings-name":"\u26A0\uFE0F Error: Please disable and renable Note Toolbar, or restart Obsidian.","error-old-settings-description":"Old settings file loaded ({{oldVersion}}) but latest is {{currentVersion}}","option-platform-desktop":"Desktop","option-platform-mobile":"Mobile","title-edit-toolbar":"Edit Toolbar: {{toolbar}}","title-edit-toolbar_none":"Edit Toolbar","delete-toolbar":{name:"Delete this toolbar",description:"This action cannot be undone.",title:"Delete toolbar: {{toolbar}}","button-delete":"Delete...","button-delete-confirm":"Delete","button-delete-tooltip":"Delete this toolbar","label-delete-confirm":"Are you sure you want to delete this toolbar?"},"display-rules":{name:"Display rules",description:"Define which notes to display toolbars on.","option-property":"Property","option-property-description":"If a toolbar name is found in this property, the toolbar will be displayed on the note. This takes precedence over any folder mappings. In a note, set this property to 'none' to hide the toolbar.","option-property-placeholder":"Property","option-folder-all":"all folders","option-folder-root":"root folder only","option-folder-mappings":"Folder mappings","option-folder-mappings-description":"Notes in folders below will display the toolbar mapped to it. Precedence is top to bottom.","option-folder-mappings-empty":"Click the button to create a mapping.","placeholder-mapping-folder":"Folder","placeholder-mapping-toolbar":"Toolbar","button-new-mapping":"+ New mapping","button-new-mapping-tooltip":"Add a new mapping","error-folder-already-mapped":"This folder already has a toolbar associated with it."},help:{title:"Help using Note Toolbar \u{1F6DF}",description:"Create context-aware toolbars for your notes.","button-donate":"Donate \u2197","button-donate-tooltip":"Open buymeacoffee.com","button-open":"Open \u2197","button-open-github":"Open github.com","button-open-google":"Open google.com","button-read":"Read \u2197","label-article-1":"Creating toolbar items","label-article-1-description":"Learn about the different types of items.","label-article-2":"Note Toolbar Callouts","label-article-2-description":"Learn how to create toolbars within your notes.","label-donate":"Buy me a coffee","label-donate-description":"If you find this plugin useful, and wish to support me financially, consider donating. Thank you!","label-feedback":"Provide feedback","label-feedback-description":"Don't have a GitHub account? Use this Google form for any feedback, questions, issues, or ideas you may have.","label-support":"Get support","label-support-description":"Visit the forums on GitHub to ask questions to the community, and to log issues.","label-user-guide":"Read the User Guide","label-user-guide-description":"How to make the most out of the plugin, including tips and examples."},"icon-suggester":{"option-no-icon":"No icon",placeholder:"Search for an icon...","instruction-navigate":"to navigate","instruction-use":"to use icon","instruction-dismiss":"to dismiss"},item:{"button-duplicate-tooltip":"Duplicate this item","button-icon-tooltip":"Select icon (optional)","label-preview-edit":"Edit toolbar: {{toolbar}}","label-preview-empty-no-items":"No items. Edit this toolbar to add items.","option-break":"break","option-command":"Command","option-command-placeholder":"Search for command","option-component-icon":"icon","option-component-label":"label","option-file":"File","option-file-placeholder":"Search for file or folder","option-file-error-does-not-exist":"This file or folder does not exist.","option-item-group":"Item Group","option-item-group-placeholder":"Toolbar","option-item-group-help":"Select a toolbar to insert into this one.","option-item-group-error-does-not-exist":"Toolbar does not exist","option-item-menu":"Item Menu","option-item-menu-placeholder":"Toolbar","option-item-menu-help":"Select a toolbar to open as a menu.","option-item-menu-error-does-not-exist":"Toolbar does not exist","option-label-placeholder":"Label (optional, if icon set)","option-separator":"separator","option-tooltip-placeholder":"Tooltip (optional)","option-uri":"URI","option-uri-placehoder":"Website, URI, or note title","option-uri-help":"Tip: Use note properties in URIs.","option-visibility-component-hidden-platform":"{{component}} hidden on {{platform}}","option-visibility-component-visible-platform":"{{component}} visible on {{platform}}","option-visibility-hidden":"hidden","option-visibility-hidden-platform":"hidden on {{platform}}","option-visibility-visible-platform":"visible on {{platform}}","option-visibility-platform-desktop":"desktop","option-visibility-platform-mobile":"mobile"},"item-suggest-modal":{placeholder:"Search for an item...","instruction-back":"to go back","instruction-navigate":"to navigate","instruction-use":"to use item","instruction-dismiss":"to dismiss","key-back":"\u232B or \u2190","key-navigate":"\u2191\u2193","key-use":"\u21B5","key-dismiss":"esc"},items:{name:"Items","name-with-count":"Items ({{count}})",description:"Add items to the toolbar, in order.","label-empty-no-items":"No toolbar items.","button-add-break-tooltip":"Add a line break to the toolbar","button-add-separator-tooltip":"Add a separator to the toolbar","button-collapse-items-tooltip":"Collapse all items","button-expand-items-tooltip":"Expand all items","button-new-item":"+ Add toolbar item","button-new-item-tooltip":"Add a new item to the toolbar","option-item-empty-label":"No label set","option-edit-item-group-tooltip":"Edit item group: {{toolbar}}","option-edit-item-group-tooltip_none":"Edit item group","option-edit-item-tooltip":"Edit toolbar item","option-edit-item-type-tooltip":"Edit {{itemType}}"},name:{name:"Name",description:"Give this toolbar a unique name.","error-toolbar-already-exists":"A toolbar already exists with this name."},other:{name:"Other",icon:{name:"Icon",description:"Sets the icon for the floating button and navigation bar (on phone). Requires restart.",tooltip:"Select icon"},"ribbon-action":{name:"Ribbon icon action \u{1F4F1}",description:"Action to take when the ribbon icon (on phones) is used.","option-toolbar":"Show current toolbar","option-item-suggester":"Show all tools","option-toolbar-suggester":"Show all toolbars"},"show-edit-tbar":{name:"Show 'Edit toolbar' link in toolbar menus \u{1F4F1}",description:"Adds an item to access the toolbar's settings in toolbars that are displayed as menus at the bottom of the screen on phones."}},position:{name:"Position",description:"Where to position this toolbar.","option-mobile-help":"Tip: Access toolbars from the navigation bar.","option-fabl":"Floating button: left","option-fabr":"Floating button: right","option-hidden":"Hidden (do not display)","option-hidden-mobile":"Hidden / Navigation bar","option-props":"Below Properties","option-top":"Top (fixed)"},styles:{name:"Styles",description:"List of styles to apply to the toolbar.",help:"Customize even more with the Style Settings plugin.","option-autohide":"auto-hide*","option-autohide-disclaimer":"Auto-hide does not apply on mobile.","option-between":"space between items","option-border":"border","option-button":"button items","option-center":"center items","option-even":"space items evenly","option-floatl":"float left*","option-floatl-disclaimer":"Float left only works within callouts.","option-floatr":"float right*","option-floatr-disclaimer":"Float right only works within callouts.","option-left":"left align items","option-noborder":"no border","option-nofloat":"no float","option-notsticky":"not sticky","option-nowrap":"don't wrap items*","option-nowrap-disclaimer":"Works best if items are not evenly spaced or centered.","option-nowide":"content width*","option-nowide-disclaimer":"Content width works only if toolbar position is Top (fixed).","option-right":"right align items","option-sticky":"sticky*","option-sticky-disclaimer":"Sticky does not apply in Reading mode.","option-wide":"editor width*","option-wide-disclaimer":"Editor width works only if toolbar position is Top (fixed).","option-default-name":"Default","option-default-description":"Applies to all platforms unless overridden.","option-default-empty":"No default styles set.","option-mobile-name":"Mobile","option-mobile-description":"Override default styles.","option-mobile-empty":"No mobile styles set. Using default styles.","style-tooltip-use-class":"Use in Callout or CSS: {{class}}","style-remove-tooltip":"Remove"},"toolbar-suggest-modal":{placeholder:"Search for a toolbar...","instruction-navigate":"to navigate","instruction-use":"to open toolbar","instruction-dismiss":"to dismiss"},toolbars:{name:"Toolbars","name-with-count":"Toolbars ({{count}})",description:"Define the toolbars you want to add to your notes.","button-collapse-tbars-tooltip":"Collapse all toolbars","button-duplicate-tbar-tooltip":"Duplicate this toolbar","button-edit-tbar":"Edit","button-expand-tbars-tooltip":"Expand all toolbars","button-edit-tbar-tooltip":"Update this toolbar","button-new-tbar":"+ New toolbar","button-new-tbar-tooltip":"Add a new toolbar","duplicate-file-suffix":"copy","label-empty-create-tbar":"Click the button to create a toolbar.","label-tbar-name-not-set":"\u26A0\uFE0F Toolbar name not set"},usage:{name:"Usage",description:"This toolbar is used in {{mappingCount}} mapping(s) and {{itemCount}} toolbar item(s).","description-search":"Search for property usage"},"whats-new":{title:"What's new in Note Toolbar?","button-read":"Read \u2197","button-read-tooltip":"Open github.com","label-release-notes":"Release notes","label-release-notes-description":"Detailed notes for the latest releases."}},Ii={"button-floating-tooltip":"Open Note Toolbar","menu-edit-toolbar":"Edit toolbar: {{toolbar}}...","menu-position-props":"Set position: Below Properties","menu-position-top":"Set position: Top (fixed)","menu-toolbar-settings":"Note Toolbar settings..."},Ai={command:Ei,notice:Ci,plugin:ki,setting:Di,toolbar:Ii};var qe={};Zt(qe,{command:()=>Mi,default:()=>Fi,notice:()=>xi,plugin:()=>Ni,setting:()=>Li,toolbar:()=>Pi});var Mi={"name-focus":"\u0424\u043E\u043A\u0443\u0441\u0443\u0432\u0430\u043D\u043D\u044F","name-item-suggester":"\u0412\u0456\u0434\u043A\u0440\u0438\u0442\u0438 \u0448\u0432\u0438\u0434\u043A\u0456 \u0456\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442\u0438","name-settings":"\u0412\u0456\u0434\u043A\u0440\u0438\u0442\u0438 \u043D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u043D\u043D\u044F \u0434\u043E\u0434\u0430\u0442\u043A\u0443","name-toolbar-settings":"\u0412\u0456\u0434\u043A\u0440\u0438\u0442\u0438 \u043D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u043D\u043D\u044F \u043F\u0430\u043D\u0435\u043B\u0456","name-show-properties":"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u0438 \u0432\u043B\u0430\u0441\u0442\u0438\u0432\u043E\u0441\u0442\u0456","name-hide-properties":"\u041F\u0440\u0438\u0445\u043E\u0432\u0430\u0442\u0438 \u0432\u043B\u0430\u0441\u0442\u0438\u0432\u043E\u0441\u0442\u0456","name-fold-properties":"\u0417\u0433\u043E\u0440\u043D\u0443\u0442\u0438 \u0432\u043B\u0430\u0441\u0442\u0438\u0432\u043E\u0441\u0442\u0456","name-toggle-properties":"\u0417\u043C\u0456\u043D\u0438\u0442\u0438 \u0412\u043B\u0430\u0441\u0442\u0438\u0432\u043E\u0441\u0442\u0456"},xi={"error-command-not-found":"\u041F\u0435\u0440\u0435\u0432\u0456\u0440\u0442\u0435 \u043D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u043D\u043D\u044F Note Toolbar \u0434\u043B\u044F \u0446\u0456\u0454\u0457 \u043A\u043E\u043C\u0430\u043D\u0434\u0438. \u041A\u043E\u043C\u0430\u043D\u0434\u0443 \u043D\u0435 \u0437\u043D\u0430\u0439\u0434\u0435\u043D\u043E: {{command}}","error-folder-not-found":"\u041F\u0435\u0440\u0435\u0432\u0456\u0440\u0442\u0435 \u043D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u043D\u043D\u044F Note Toolbar \u0434\u043B\u044F \u0446\u0456\u0454\u0457 \u0442\u0435\u043A\u0438. \u0422\u0435\u043A\u0443 \u043D\u0435 \u0437\u043D\u0430\u0439\u0434\u0435\u043D\u043E: {{folder}}","error-item-menu-not-found":"\u041F\u0435\u0440\u0435\u0432\u0456\u0440\u0442\u0435 \u043D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u043D\u043D\u044F Note Toolbar \u0434\u043B\u044F \u0446\u044C\u043E\u0433\u043E \u043C\u0435\u043D\u044E. \u041F\u0430\u043D\u0435\u043B\u044C \u043D\u0435 \u0437\u043D\u0430\u0439\u0434\u0435\u043D\u043E: {{toolbar}}","error-toolbar-not-found":"\u041F\u0435\u0440\u0435\u0432\u0456\u0440\u0442\u0435 \u043D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u043D\u043D\u044F Note Toolbar \u0434\u043B\u044F \u0446\u0456\u0454\u0457 \u043F\u0430\u043D\u0435\u043B\u0456. \u041F\u0430\u043D\u0435\u043B\u044C \u043D\u0435 \u0437\u043D\u0430\u0439\u0434\u0435\u043D\u043E: {{folder}}"},Ni={name:"Note Toolbar"},Li={"button-cancel":"\u0421\u043A\u0430\u0441\u0443\u0432\u0430\u0442\u0438","button-delete-tooltip":"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438","button-drag-tooltip":"\u041F\u0435\u0440\u0435\u0442\u044F\u0433\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0437\u043C\u0456\u043D\u0438\u0442\u0438 \u043F\u043E\u0440\u044F\u0434\u043E\u043A","button-learn-more":"\u0414\u0456\u0437\u043D\u0430\u0439\u0442\u0435\u0441\u044F \u0431\u0456\u043B\u044C\u0448\u0435","button-user-guide":"\u041F\u043E\u0441\u0456\u0431\u043D\u0438\u043A \u043A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430","error-old-settings-name":"\u26A0\uFE0F \u041F\u043E\u043C\u0438\u043B\u043A\u0430: \u0411\u0443\u0434\u044C \u043B\u0430\u0441\u043A\u0430, \u0432\u0438\u043C\u043A\u043D\u0456\u0442\u044C \u0442\u0430 \u0437\u0430\u043F\u0443\u0441\u0442\u0456\u0442\u044C \u0437\u0430\u043D\u043E\u0432\u043E Note Toolbar, \u0430\u0431\u043E \u043F\u0435\u0440\u0435\u0437\u0430\u0432\u0430\u043D\u0442\u0430\u0436\u0442\u0435 Obsidian.","error-old-settings-description":"\u0417\u0430\u0432\u0430\u043D\u0442\u0430\u0436\u0435\u043D\u043E \u0441\u0442\u0430\u0440\u0438\u0439 \u0444\u0430\u0439\u043B \u043D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u043D\u044C ({{oldVersion}}), \u043D\u0430\u0439\u043D\u043E\u0432\u0456\u0448\u0438\u0439 - {{currentVersion}}","option-platform-desktop":"\u041A\u043E\u043C\u043F'\u044E\u0442\u0435\u0440","option-platform-mobile":"\u041C\u043E\u0431\u0456\u043B\u044C\u043D\u0438\u0439","title-edit-toolbar":"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u041F\u0430\u043D\u0435\u043B\u044C: {{toolbar}}","title-edit-toolbar_none":"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u041F\u0430\u043D\u0435\u043B\u044C","delete-toolbar":{name:"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u0446\u044E \u043F\u0430\u043D\u0435\u043B\u044C",description:"\u0426\u044E \u0434\u0456\u044E \u043D\u0435 \u043C\u043E\u0436\u043D\u0430 \u0441\u043A\u0430\u0441\u0443\u0432\u0430\u0442\u0438.",title:"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u043F\u0430\u043D\u0435\u043B\u044C: {{toolbar}}","button-delete":"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438...","button-delete-confirm":"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438","button-delete-tooltip":"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u0446\u044E \u043F\u0430\u043D\u0435\u043B\u044C","label-delete-confirm":"\u0412\u0438 \u0434\u0456\u0439\u0441\u043D\u043E \u0431\u0430\u0436\u0430\u0454\u0442\u0435 \u0432\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u0446\u044E \u043F\u0430\u043D\u0435\u043B\u044C?"},"display-rules":{name:"\u041F\u0440\u0430\u0432\u0438\u043B\u0430 \u0432\u0456\u0434\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F",description:"\u0412\u0438\u0437\u043D\u0430\u0447\u0442\u0435, \u0432 \u044F\u043A\u0438\u0445 \u043D\u043E\u0442\u0430\u0442\u043A\u0430\u0445 \u0442\u0440\u0435\u0431\u0430 \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u043D\u043E \u0432\u0456\u0434\u043E\u0431\u0440\u0430\u0436\u0430\u0442\u0438 \u043F\u0430\u043D\u0435\u043B\u044C.","option-property":"\u0412\u043B\u0430\u0441\u0442\u0438\u0432\u0456\u0441\u0442\u044C","option-property-description":`\u042F\u043A\u0449\u043E \u043D\u0430\u0437\u0432\u0430 \u043F\u0430\u043D\u0435\u043B\u0456 \u0432\u043A\u0430\u0437\u0430\u043D\u0430 \u0432\u043E \u0412\u043B\u0430\u0441\u0442\u0438\u0432\u043E\u0441\u0442\u0456, \u0442\u043E\u0434\u0456 \u043F\u0430\u043D\u0435\u043B\u044C \u0437'\u044F\u0432\u0438\u0442\u044C\u0441\u044F \u0443 \u043D\u043E\u0442\u0430\u0442\u0446\u0456. \u0412\u0438\u043A\u043E\u043D\u0443\u0454\u0442\u044C\u0441\u044F \u0437 \u043F\u0435\u0440\u0435\u0432\u0430\u0433\u043E\u044E \u043D\u0430\u0434 \u0431\u0443\u0434\u044C-\u044F\u043A\u0438\u043C\u0438 \u0437\u0432'\u044F\u0437\u043A\u0430\u043C\u0438 \u0442\u0435\u043A. \u041F\u043E\u0441\u0442\u0430\u0432\u0442\u0435 "\u041D\u0456" \u044F\u043A\u0449\u043E \u0442\u0440\u0435\u0431\u0430 \u0441\u0445\u043E\u0432\u0430\u0442\u0438 \u043F\u0430\u043D\u0435\u043B\u044C.`,"option-property-placeholder":"\u0412\u043B\u0430\u0441\u0442\u0438\u0432\u0456\u0441\u0442\u044C","option-folder-all":"\u0432\u0441\u0456 \u0442\u0435\u043A\u0438","option-folder-root":"\u0442\u0456\u043B\u044C\u043A\u0438 \u043A\u043E\u0440\u0435\u043D\u0435\u0432\u0430 \u0442\u0435\u043A\u0430","option-folder-mappings":"\u0417\u0456\u0441\u0442\u0430\u0432\u043B\u0435\u043D\u043D\u0456 \u0442\u0435\u043A\u0438","option-folder-mappings-description":"\u041D\u043E\u0442\u0430\u0442\u043A\u0438 \u0443 \u0432\u043A\u0430\u0437\u0430\u043D\u0438\u0445 \u043D\u0438\u0436\u0447\u0435 \u0442\u0435\u043A, \u0431\u0443\u0434\u0443\u0442\u044C \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u043D\u043E \u043F\u043E\u043A\u0430\u0437\u0443\u0432\u0430\u0442\u0438 \u043F\u0430\u043D\u0435\u043B\u044C \u043F\u043E \u0441\u0442\u0432\u043E\u0440\u0435\u043D\u0438\u043C \u043F\u0440\u0438\u0432'\u044F\u0437\u043A\u0430\u043C. \u041F\u0440\u0456\u043E\u0440\u0438\u0442\u0435\u0442 \u0437\u0432\u0435\u0440\u0445\u0443 \u0432\u043D\u0438\u0437.","option-folder-mappings-empty":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C \u043D\u0430 \u043A\u043D\u043E\u043F\u043A\u0443, \u0449\u043E\u0431 \u0441\u0442\u0432\u043E\u0440\u0438\u0442\u0438 \u043F\u0440\u0438\u0432'\u044F\u0437\u043A\u0443.","placeholder-mapping-folder":"\u0422\u0435\u043A\u0430","placeholder-mapping-toolbar":"\u041F\u0430\u043D\u0435\u043B\u044C","button-new-mapping":"+ \u041D\u043E\u0432\u0435 \u0437\u0456\u0441\u0442\u0430\u0432\u043B\u0435\u043D\u043D\u044F","button-new-mapping-tooltip":"\u0414\u043E\u0434\u0430\u0442\u0438 \u043D\u043E\u0432\u0443 \u043F\u0440\u0438\u0432'\u044F\u0437\u043A\u0443","error-folder-already-mapped":"\u0426\u044F \u0442\u0435\u043A\u0430 \u0432\u0436\u0435 \u043C\u0430\u0454 \u0430\u0441\u043E\u0446\u0456\u0439\u043E\u0432\u0430\u043D\u0443 \u0437 \u043D\u0435\u044E \u043F\u0430\u043D\u0435\u043B\u044C."},"icon-suggester":{"option-no-icon":"\u0411\u0435\u0437 \u0456\u043A\u043E\u043D\u043A\u0438",placeholder:"\u0428\u0443\u043A\u0430\u0442\u0438 \u0456\u043A\u043E\u043D\u043A\u0443...","instruction-navigate":"\u043D\u0430\u0432\u0456\u0433\u0430\u0446\u0456\u044F","instruction-use":"\u0432\u0438\u043A\u043E\u0440\u0438\u0441\u0442\u0430\u0442\u0438 \u0456\u043A\u043E\u043D\u043A\u0443","instruction-dismiss":"\u0441\u043A\u0430\u0441\u0443\u0432\u0430\u043D\u043D\u044F"},item:{"button-duplicate-tooltip":"\u0414\u0443\u0431\u043B\u044E\u0432\u0430\u0442\u0438 \u0446\u0435\u0439 \u0435\u043B\u0435\u043C\u0435\u043D\u0442","button-icon-tooltip":"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044C \u0456\u043A\u043E\u043D\u043A\u0443 (\u043D\u0435\u043E\u0431\u043E\u0432'\u044F\u0437\u043A\u043E\u0432\u043E)","label-preview-edit":"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u043F\u0430\u043D\u0435\u043B\u044C: {{toolbar}}","label-preview-empty-no-items":"\u041D\u0435\u043C\u0430\u0454 \u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432. \u0420\u0435\u0434\u0430\u0433\u0443\u0439\u0442\u0435 \u0446\u044E \u043F\u0430\u043D\u0435\u043B\u044C \u0434\u043B\u044F \u0434\u043E\u0434\u0430\u0432\u0430\u043D\u043D\u044F \u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432.","option-break":"\u0440\u043E\u0437\u0440\u0438\u0432","option-command":"\u041A\u043E\u043C\u0430\u043D\u0434\u0430","option-command-placeholder":"\u041F\u043E\u0448\u0443\u043A \u043A\u043E\u043C\u0430\u043D\u0434\u0438","option-component-icon":"\u0456\u043A\u043E\u043D\u043A\u0430","option-component-label":"\u044F\u0440\u043B\u0438\u043A","option-file":"\u0424\u0430\u0439\u043B","option-file-placeholder":"\u041F\u043E\u0448\u0443\u043A \u0444\u0430\u0439\u043B\u0443 \u0447\u0438 \u0442\u0435\u043A\u0438","option-file-error-does-not-exist":"\u0426\u0435\u0439 \u0444\u0430\u0439\u043B \u0430\u0431\u043E \u0442\u0435\u043A\u0430 \u043D\u0435 \u0456\u0441\u043D\u0443\u0454.","option-item-group":"\u0413\u0440\u0443\u043F\u0430 \u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432","option-item-group-placeholder":"\u041F\u0430\u043D\u0435\u043B\u044C","option-item-group-help":"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044C \u043F\u0430\u043D\u0435\u043B\u044C \u0434\u043B\u044F \u0432\u0441\u0442\u0430\u0432\u043A\u0438 \u0432 \u0446\u044E \u043D\u043E\u0442\u0430\u0442\u043A\u0443.","option-item-group-error-does-not-exist":"\u041F\u0430\u043D\u0435\u043B\u044C \u043D\u0435 \u0456\u0441\u043D\u0443\u0454","option-item-menu":"\u0415\u043B\u0435\u043C\u0435\u043D\u0442 \u043C\u0435\u043D\u044E","option-item-menu-placeholder":"\u041F\u0430\u043D\u0435\u043B\u044C","option-item-menu-help":"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044C \u043F\u0430\u043D\u0435\u043B\u044C \u0434\u043B\u044F \u0432\u0456\u0434\u043A\u0440\u0438\u0442\u0442\u044F \u044F\u043A \u043C\u0435\u043D\u044E.","option-item-menu-error-does-not-exist":"\u041F\u0430\u043D\u0435\u043B\u044C \u043D\u0435 \u0456\u0441\u043D\u0443\u0454","option-label-placeholder":"\u041C\u0456\u0442\u043A\u0430 (\u043D\u0435\u043E\u0431\u043E\u0432'\u044F\u0437\u043A\u043E\u0432\u043E, \u044F\u043A\u0449\u043E \u0454 \u0456\u043A\u043E\u043D\u043A\u0430)","option-separator":"\u0440\u043E\u0437\u0434\u0456\u043B\u044C\u043D\u0438\u043A","option-tooltip-placeholder":"\u041F\u0456\u0434\u043A\u0430\u0437\u043A\u0430 (\u043D\u0435\u043E\u0431\u043E\u0432'\u044F\u0437\u043A\u043E\u0432\u043E)","option-uri":"URI","option-uri-placehoder":"\u0410\u0434\u0440\u0435\u0441\u0430 \u0432\u0435\u0431-\u0441\u0430\u0439\u0442\u0443, \u043D\u0430\u0437\u0432\u0430 \u043D\u043E\u0442\u0430\u0442\u043A\u0438","option-uri-help":"\u041F\u043E\u0440\u0430\u0434\u0430: \u0432\u0438\u043A\u043E\u0440\u0438\u0441\u0442\u043E\u0432\u0443\u0439\u0442\u0435 \u0432\u043B\u0430\u0441\u0442\u0438\u0432\u043E\u0441\u0442\u0456 \u043D\u043E\u0442\u0430\u0442\u043E\u043A \u0432 URI.","option-visibility-component-hidden-platform":"{{component}} \u043F\u0440\u0438\u0445\u043E\u0432\u0430\u043D\u043E \u043D\u0430 {{platform}}","option-visibility-component-visible-platform":"{{component}} \u0432\u0438\u0434\u0438\u043C\u0438\u0439 \u043D\u0430 {{platform}}","option-visibility-hidden":"\u043F\u0440\u0438\u0445\u043E\u0432\u0430\u043D\u043E","option-visibility-hidden-platform":"\u043F\u0440\u0438\u0445\u043E\u0432\u0430\u043D\u043E \u043D\u0430 {{platform}}","option-visibility-visible-platform":"\u0432\u0438\u0434\u0438\u043C\u0438\u0439 \u043D\u0430 {{platform}}","option-visibility-platform-desktop":"\u043A\u043E\u043C\u043F'\u044E\u0442\u0435\u0440\u0456","option-visibility-platform-mobile":"\u043C\u043E\u0431\u0456\u043B\u044C\u043D\u043E\u043C"},"item-suggester":{placeholder:"\u041F\u043E\u0448\u0443\u043A \u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430...","instruction-navigate":"\u043D\u0430\u0432\u0456\u0433\u0430\u0446\u0456\u044F","instruction-use":"\u0432\u0438\u043A\u043E\u0440\u0438\u0441\u0442\u0430\u0442\u0438 \u0435\u043B\u0435\u043C\u0435\u043D\u0442","instruction-dismiss":"\u0441\u043A\u0430\u0441\u0443\u0432\u0430\u043D\u043D\u044F"},items:{name:"\u0415\u043B\u0435\u043C\u0435\u043D\u0442\u0438","name-with-count":"\u0415\u043B\u0435\u043C\u0435\u043D\u0442\u0438 ({{count}})",description:"\u0414\u043E\u0434\u0430\u0442\u0438 \u043F\u043E \u0447\u0435\u0440\u0437\u0456 \u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438 \u0434\u043E \u043F\u0430\u043D\u0435\u043B\u0456","label-empty-no-items":"\u041D\u0435\u043C\u0430\u0454 \u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432 \u043F\u0430\u043D\u0435\u043B\u0456.","button-add-break-tooltip":"\u0414\u043E\u0434\u0430\u0442\u0438 \u0440\u043E\u0437\u0434\u0456\u043B\u044C\u043D\u0438\u043A \u043D\u0430 \u043F\u0430\u043D\u0435\u043B\u044C","button-add-separator-tooltip":"\u0414\u043E\u0434\u0430\u0442\u0438 \u0440\u043E\u0437\u0434\u0456\u043B\u044C\u043D\u0438\u043A \u0434\u043E \u043F\u0430\u043D\u0435\u043B\u0456","button-collapse-items-tooltip":"\u0417\u0433\u043E\u0440\u043D\u0443\u0442\u0438 \u0432\u0441\u0456 \u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438","button-expand-items-tooltip":"\u0420\u043E\u0437\u0433\u043E\u0440\u043D\u0443\u0442\u0438 \u0432\u0441\u0456 \u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438","button-new-item":"+ \u0414\u043E\u0434\u0430\u0442\u0438 \u0435\u043B\u0435\u043C\u0435\u043D\u0442 \u043F\u0430\u043D\u0435\u043B\u0456","button-new-item-tooltip":"\u0414\u043E\u0434\u0430\u0442\u0438 \u043D\u043E\u0432\u0438\u0439 \u0435\u043B\u0435\u043C\u0435\u043D\u0442 \u0434\u043E \u043F\u0430\u043D\u0435\u043B\u0456","option-item-empty-label":"\u041C\u0456\u0442\u043E\u043A \u043D\u0435 \u0432\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043E","option-edit-item-group-tooltip":"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0433\u0440\u0443\u043F\u0443: {{toolbar}}","option-edit-item-group-tooltip_none":"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0433\u0440\u0443\u043F\u0443 \u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432","option-edit-item-tooltip":"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0435\u043B\u0435\u043C\u0435\u043D\u0442 \u043F\u0430\u043D\u0435\u043B\u0456","option-edit-item-type-tooltip":"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 {{itemType}}"},name:{name:"\u041D\u0430\u0437\u0432\u0430",description:"\u0417\u0430\u0434\u0430\u0439\u0442\u0435 \u0443\u043D\u0456\u043A\u0430\u043B\u044C\u043D\u0435 \u0456\u043C'\u044F \u043F\u0430\u043D\u0435\u043B\u0456","error-toolbar-already-exists":"\u041F\u0430\u043D\u0435\u043B\u044C \u0456\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442\u0456\u0432 \u0437 \u0442\u0430\u043A\u0438\u043C \u0456\u043C'\u044F\u043C \u0432\u0436\u0435 \u0456\u0441\u043D\u0443\u0454."},other:{name:"\u0406\u043D\u0448\u0435",icon:{name:"\u0406\u043A\u043E\u043D\u043A\u0430",description:"\u0412\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u044E\u0454 \u0456\u043A\u043E\u043D\u043A\u0443 \u0434\u043B\u044F \u043F\u043B\u0430\u0432\u0430\u044E\u0447\u043E\u0457 \u043A\u043D\u043E\u043F\u043A\u0438 \u0443 \u043F\u0430\u043D\u0435\u043B\u0456 \u043D\u0430\u0432\u0456\u0433\u0430\u0446\u0456\u0457 (\u043C\u043E\u0431\u0456\u043B\u044C\u043D\u0456). \u041F\u043E\u0442\u0440\u0435\u0431\u0443\u0454 \u043F\u0435\u0440\u0435\u0437\u0430\u0432\u0430\u043D\u0442\u0430\u0436\u0435\u043D\u043D\u044F.",tooltip:"\u041E\u0431\u0440\u0430\u0442\u0438 \u0456\u043A\u043E\u043D\u043A\u0443"},"show-edit-tbar":{name:"\u041F\u043E\u043A\u0430\u0437\u0443\u0432\u0430\u0442\u0438 \u043F\u043E\u0441\u0438\u043B\u0430\u043D\u043D\u044F '\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438' \u0432 \u043C\u0435\u043D\u044E \u043F\u0430\u043D\u0435\u043B\u0456",description:"\u0414\u043E\u0434\u0430\u0454 \u0435\u043B\u0435\u043C\u0435\u043D\u0442 \u0434\u043B\u044F \u043F\u0435\u0440\u0435\u0445\u043E\u0434\u0443 \u0434\u043E \u043D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u043D\u044C \u043F\u0430\u043D\u0435\u043B\u0456 \u0432 \u0457\u0457 \u043C\u0435\u043D\u044E."}},position:{name:"\u041F\u043E\u043B\u043E\u0436\u0435\u043D\u043D\u044F",description:"\u0414\u0435 \u0440\u043E\u0437\u0442\u0430\u0448\u0443\u0432\u0430\u0442\u0438 \u043F\u0430\u043D\u0435\u043B\u044C.","option-mobile-help":"\u2139\uFE0F: \u0412\u0456\u0434\u043A\u0440\u0438\u0432\u0430\u0439\u0442\u0435 \u043F\u0430\u043D\u0435\u043B\u044C \u0447\u0435\u0440\u0435\u0437 \u043F\u0430\u043D\u0435\u043B\u044C \u043D\u0430\u0432\u0456\u0433\u0430\u0446\u0456\u0457.","option-fabl":"\u041F\u043B\u0430\u0432\u0430\u044E\u0447\u0430 \u043A\u043D\u043E\u043F\u043A\u0430: \u043B\u0456\u0432\u043E\u0440\u0443\u0447","option-fabr":"\u041F\u043B\u0430\u0432\u0430\u044E\u0447\u0430 \u043A\u043D\u043E\u043F\u043A\u0430: \u043F\u0440\u0430\u0432\u043E\u0440\u0443\u0447","option-hidden":"\u041F\u0440\u0438\u0445\u043E\u0432\u0430\u043D\u0456 (\u043D\u0435 \u043F\u043E\u043A\u0430\u0437\u0443\u0432\u0430\u0442\u0438)","option-hidden-mobile":"\u041F\u0440\u0438\u0445\u043E\u0432\u0430\u043D\u0430 / \u041F\u0430\u043D\u0435\u043B\u044C \u043D\u0430\u0432\u0456\u0433\u0430\u0446\u0456\u0457","option-props":"\u041F\u0456\u0434  \u0412\u043B\u0430\u0441\u0442\u0438\u0432\u043E\u0441\u0442\u044F\u043C\u0438","option-top":"\u0417\u0432\u0435\u0440\u0445\u0443 (\u0444\u0456\u043A\u0441\u043E\u0432\u0430\u043D\u043E)"},styles:{name:"\u0421\u0442\u0438\u043B\u0456",description:"\u0421\u043F\u0438\u0441\u043E\u043A \u0441\u0442\u0438\u043B\u0456\u0432 \u0446\u0456\u0454\u0457 \u043F\u0430\u043D\u0435\u043B\u0456.",help:"\u041D\u0430\u043B\u0430\u0448\u0442\u0443\u0439\u0442\u0435 \u0449\u0435 \u0431\u0456\u043B\u044C\u0448\u0435 \u0437 \u0434\u043E\u0434\u0430\u0442\u043A\u043E\u043C Style Settings.","option-autohide":"\u0430\u0432\u0442\u043E\u043F\u0440\u0438\u0445\u043E\u0432\u0443\u0432\u0430\u043D\u043D\u044F*","option-autohide-disclaimer":"\u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u043D\u0435 \u043F\u0440\u0438\u0445\u043E\u0432\u0443\u0432\u0430\u043D\u043D\u044F \u043D\u0435 \u043F\u043E\u0448\u0438\u0440\u044E\u0454\u0442\u044C\u0441\u044F \u043D\u0430 \u043C\u043E\u0431\u0456\u043B\u044C\u043D\u0456 \u043F\u0440\u0438\u0441\u0442\u0440\u043E\u0457.","option-between":"\u0456\u043D\u0442\u0435\u0440\u0432\u0430\u043B \u043C\u0456\u0436 \u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u043C\u0438","option-border":"\u043C\u0435\u0436\u0456","option-button":"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438 \u043A\u043D\u043E\u043F\u043E\u043A","option-center":"\u0446\u0435\u043D\u0442\u0440\u0443\u0432\u0430\u0442\u0438 \u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438","option-even":"\u0440\u0456\u0432\u043D\u043E\u043C\u0456\u0440\u043D\u0435 \u0440\u043E\u0437\u043C\u0456\u0449\u0435\u043D\u043D\u044F \u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432","option-floatl":"\u0432\u0438\u0440\u0456\u0432\u043D\u044F\u0442\u0438 \u043B\u0456\u0432\u043E\u0440\u0443\u0447*","option-floatl-disclaimer":"\u0412\u0438\u0440\u0456\u0432\u043D\u044E\u0432\u0430\u043D\u043D\u044F \u0437 \u043B\u0456\u0432\u0430 \u043F\u0440\u0430\u0446\u044E\u0454 \u0442\u0456\u043B\u044C\u043A\u0438 \u0443 \u0412\u0438\u043D\u043E\u0441\u043A\u0430\u0445.","option-floatr":"\u0432\u0438\u0440\u0456\u0432\u043D\u044F\u0442\u0438 \u043F\u0440\u0430\u0432\u043E\u0440\u0443\u0447*","option-floatr-disclaimer":"\u0412\u0438\u0440\u0456\u0432\u043D\u044E\u0432\u0430\u043D\u043D\u044F \u0437 \u043F\u0440\u0430\u0432\u0430 \u043F\u0440\u0430\u0446\u044E\u0454 \u0442\u0456\u043B\u044C\u043A\u0438 \u0443 \u0412\u0438\u043D\u043E\u0441\u043A\u0430\u0445.","option-left":"\u0432\u0438\u0440\u0456\u0432\u043D\u044F\u0442\u0438 \u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438 \u043B\u0456\u0432\u043E\u0440\u0443\u0447","option-noborder":"\u0431\u0435\u0437 \u0440\u0430\u043C\u043A\u0438","option-nofloat":"\u043D\u0435 \u0432\u0438\u0440\u0456\u0432\u043D\u044E\u0432\u0430\u0442\u0438","option-notsticky":"\u043D\u0435 \u043F\u0440\u0438\u043A\u0440\u0456\u043F\u043B\u044F\u0442\u0438","option-nowrap":"\u043D\u0435 \u0437\u0430\u0433\u043E\u0440\u0442\u0430\u0442\u0438 \u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438*","option-nowrap-disclaimer":"\u041D\u0430\u0439\u043A\u0440\u0430\u0449\u0435 \u0440\u043E\u0431\u0435, \u044F\u043A\u0449\u043E \u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438 \u0440\u043E\u0437\u0442\u0430\u0448\u043E\u0432\u0430\u043D\u0456 \u043D\u0435 \u0440\u0456\u0432\u043D\u043E \u0432\u0438\u0434\u0430\u043B\u0435\u043D\u043E \u0430\u0431\u043E \u043D\u0435 \u0432\u0456\u0434\u0446\u0435\u043D\u0442\u0440\u043E\u0432\u0430\u043D\u0456.","option-nowide":"\u0448\u0438\u0440\u0438\u043D\u0430 \u0441\u0442\u043E\u0440\u0456\u043D\u043A\u0438 *","option-nowide-disclaimer":"\u0428\u0438\u0440\u0438\u043D\u0430 \u0432\u043C\u0456\u0441\u0442\u0443 \u043F\u0440\u0430\u0446\u044E\u0454 \u043B\u0438\u0448\u0435 \u043A\u043E\u043B\u0438 \u043F\u0430\u043D\u0435\u043B\u044C \u0440\u043E\u0437\u0442\u0430\u0448\u043E\u0432\u0430\u043D\u0430 \u0437\u0432\u0435\u0440\u0445\u0443 (\u0444\u0456\u043A\u0441\u043E\u0432\u0430\u043D\u043E).","option-right":"\u0432\u0438\u0440\u0456\u0432\u043D\u044F\u0442\u0438 \u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438 \u043F\u0440\u0430\u0432\u043E\u0440\u0443\u0447","option-sticky":"\u043F\u0440\u0438\u043A\u0440\u0456\u043F\u043B\u044F\u0442\u0438*","option-sticky-disclaimer":"\u041F\u0440\u0438\u043A\u0440\u0456\u043F\u043B\u0435\u043D\u043D\u044F \u043D\u0435 \u043F\u0440\u0430\u0446\u044E\u0454 \u0443 \u0440\u0435\u0436\u0438\u043C\u0456 \u0427\u0438\u0442\u0430\u043D\u043D\u044F.","option-wide":"\u0448\u0438\u0440\u0438\u043D\u0430 \u0440\u0435\u0434\u0430\u043A\u0442\u043E\u0440\u0430*","option-wide-disclaimer":"\u0428\u0438\u0440\u0438\u043D\u0430 \u0440\u0435\u0434\u0430\u043A\u0442\u043E\u0440\u0430 \u043F\u0440\u0430\u0446\u044E\u0454 \u043B\u0438\u0448\u0435 \u0432 \u0442\u043E\u043C\u0443 \u0432\u0438\u043F\u0430\u0434\u043A\u0443, \u044F\u043A\u0449\u043E \u043F\u043E\u0437\u0438\u0446\u0456\u044F \u0432\u0435\u0440\u0445\u043D\u044C\u043E\u0457 \u043F\u0430\u043D\u0435\u043B\u0456 \u0456\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442\u0456\u0432 (\u0444\u0456\u043A\u0441\u043E\u0432\u0430\u043D\u0430).","option-default-name":"\u0417\u0430 \u0437\u0430\u043C\u043E\u0432\u0447\u0443\u0432\u0430\u043D\u043D\u044F\u043C","option-default-description":"\u0414\u043B\u044F \u0432\u0441\u0456\u0445 \u043F\u043B\u0430\u0442\u0444\u043E\u0440\u043C, \u0434\u0456\u0454 \u0434\u043E \u043F\u0435\u0440\u0435\u0432\u0438\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F.","option-default-empty":"\u041D\u0435 \u0432\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043E \u0441\u0442\u0430\u043D\u0434\u0430\u0440\u0442\u043D\u0438\u0445 \u0441\u0442\u0438\u043B\u0456\u0432.","option-mobile-name":"\u041C\u043E\u0431\u0456\u043B\u044C\u043D\u0438\u0439","option-mobile-description":"\u0417\u0430\u043C\u0456\u043D\u0438\u0442\u0438 \u0441\u0442\u0438\u043B\u0456 \u0437\u0430 \u0437\u0430\u043C\u043E\u0432\u0447\u0443\u0432\u0430\u043D\u043D\u044F\u043C.","option-mobile-empty":"\u041D\u0435 \u0432\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043E \u043C\u043E\u0431\u0456\u043B\u044C\u043D\u0438\u0445 \u0441\u0442\u0438\u043B\u0456\u0432. \u0412\u0438\u043A\u043E\u0440\u0438\u0441\u0442\u043E\u0432\u0443\u044E\u0442\u044C\u0441\u044F \u0441\u0442\u0438\u043B\u0456 \u0437\u0430 \u0437\u0430\u043C\u043E\u0432\u0447\u0443\u0432\u0430\u043D\u043D\u044F\u043C.","style-tooltip-use-class":"\u0412\u0438\u043A\u043E\u0440\u0438\u0441\u0442\u043E\u0432\u0443\u0432\u0430\u0442\u0438 \u0443 \u0412\u0438\u043D\u043E\u0441\u043A\u0430\u0445 \u0430\u0431\u043E CSS: {{class}}","style-remove-tooltip":"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438"},toolbars:{name:"\u041F\u0430\u043D\u0435\u043B\u0456","name-with-count":"\u041F\u0430\u043D\u0435\u043B\u0456 ({{count}})",description:"\u0417\u0430\u0434\u0430\u0439\u0442\u0435 \u043F\u0430\u043D\u0435\u043B\u0456, \u044F\u043A\u0456 \u0412\u0438 \u0431\u0430\u0436\u0430\u0454\u0442\u0435 \u0434\u043E\u0434\u0430\u0432\u0430\u0442\u0438 \u0434\u043E \u0432\u0430\u0448\u0438\u0445 \u043D\u043E\u0442\u0430\u0442\u043E\u043A.","button-collapse-tbars-tooltip":"\u0417\u0433\u043E\u0440\u043D\u0443\u0442\u0438 \u0432\u0441\u0456 \u043F\u0430\u043D\u0435\u043B\u0456","button-duplicate-tbar-tooltip":"\u0414\u0443\u0431\u043B\u044E\u0432\u0430\u0442\u0438 \u0446\u044E \u043F\u0430\u043D\u0435\u043B\u044C","button-edit-tbar":"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438","button-expand-tbars-tooltip":"\u0420\u043E\u0437\u0433\u043E\u0440\u043D\u0443\u0442\u0438 \u0432\u0441\u0456 \u043F\u0430\u043D\u0435\u043B\u0456","button-edit-tbar-tooltip":"\u041E\u043D\u043E\u0432\u0438\u0442\u0438 \u0446\u044E \u043F\u0430\u043D\u0435\u043B\u044C","button-new-tbar":"+ \u041D\u043E\u0432\u0430 \u043F\u0430\u043D\u0435\u043B\u044C","button-new-tbar-tooltip":"\u0414\u043E\u0434\u0430\u0442\u0438 \u043D\u043E\u0432\u0443 \u043F\u0430\u043D\u0435\u043B\u044C","duplicate-file-suffix":"\u0441\u043A\u043E\u043F\u0456\u044E\u0432\u0430\u0442\u0438","label-empty-create-tbar":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C \u043A\u043D\u043E\u043F\u043A\u0443, \u0449\u043E\u0431 \u0441\u0442\u0432\u043E\u0440\u0438\u0442\u0438 \u043D\u043E\u0432\u0443 \u043F\u0430\u043D\u0435\u043B\u044C.","label-tbar-name-not-set":"\u26A0\uFE0F \u0406\u043C'\u044F \u043F\u0430\u043D\u0435\u043B\u0456 \u043D\u0435 \u0432\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043E"},usage:{name:"\u0412\u0438\u043A\u043E\u0440\u0438\u0441\u0442\u0430\u043D\u043D\u044F",description:"\u0426\u044F \u043F\u0430\u043D\u0435\u043B\u044C \u0432\u0438\u043A\u043E\u0440\u0438\u0441\u0442\u043E\u0432\u0443\u0454\u0442\u044C\u0441\u044F \u0443 {{mappingCount}} \u043F\u0440\u0438\u0432'\u044F\u0437\u043A\u0430\u0445 \u0442\u0430 {{itemCount}} \u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432 \u043F\u0430\u043D\u0435\u043B\u0435\u0439.","description-search":"\u041F\u043E\u0448\u0443\u043A \u0432\u0438\u043A\u043E\u0440\u0438\u0441\u0442\u0430\u043D\u043D\u044F \u0432\u043B\u0430\u0441\u0442\u0438\u0432\u043E\u0441\u0442\u0456"}},Pi={"button-floating-tooltip":"\u0412\u0456\u0434\u043A\u0440\u0438\u0442\u0438 Note Toolbar","menu-edit-toolbar":"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u043F\u0430\u043D\u0435\u043B\u044C: {{toolbar}}...","menu-position-props":"\u0420\u043E\u0437\u0442\u0430\u0448\u0443\u0432\u0430\u0442\u0438 \u043D\u0438\u0436\u0447\u0435 \u0412\u043B\u0430\u0441\u0442\u0438\u0432\u043E\u0441\u0442\u0435\u0439","menu-position-top":"\u0420\u043E\u0437\u043C\u0456\u0449\u0430\u0442\u0438 \u0437\u0432\u0435\u0440\u0445\u0443 (\u0444\u0456\u043A\u0441\u043E\u0432\u0430\u043D\u043E)","menu-toolbar-settings":"\u041D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u043D\u043D\u044F Note Toolbar..."},Fi={command:Mi,notice:xi,plugin:Ni,setting:Li,toolbar:Pi};var We={};Zt(We,{command:()=>Oi,default:()=>Ri,notice:()=>_i,plugin:()=>Vi,setting:()=>Bi,toolbar:()=>Hi});var Oi={"name-focus":"\u805A\u7126","name-item-suggester":"\u6253\u5F00\u5FEB\u901F\u5DE5\u5177","name-toolbar-suggester":"\u6253\u5F00\u5FEB\u901F\u5DE5\u5177\u680F","name-settings":"\u6253\u5F00\u63D2\u4EF6\u8BBE\u7F6E","name-toolbar-settings":"\u6253\u5F00\u5DE5\u5177\u680F\u8BBE\u7F6E","name-show-properties":"\u663E\u793A\u7B14\u8BB0\u5C5E\u6027","name-hide-properties":"\u9690\u85CF\u7B14\u8BB0\u5C5E\u6027","name-fold-properties":"\u6298\u53E0\u7B14\u8BB0\u5C5E\u6027","name-toggle-properties":"\u5207\u6362\u7B14\u8BB0\u5C5E\u6027\u7684\u663E\u793A"},_i={"error-command-not-found":`\u8BF7\u68C0\u67E5\u7B14\u8BB0\u5DE5\u5177\u680F\u8BBE\u7F6E\u4E2D\u7684\u547D\u4EE4\u8BBE\u7F6E\u3002
\u672A\u627E\u5230\u547D\u4EE4\uFF1A{{command}}`,"error-folder-not-found":`\u8BF7\u68C0\u67E5\u7B14\u8BB0\u5DE5\u5177\u680F\u8BBE\u7F6E\u4E2D\u7684\u6587\u4EF6\u5939\u8BBE\u7F6E\u3002
\u672A\u627E\u5230\u6587\u4EF6\u5939\uFF1A{{folder}}`,"error-item-menu-not-found":`\u8BF7\u68C0\u67E5\u7B14\u8BB0\u5DE5\u5177\u680F\u8BBE\u7F6E\u4E2D\u7684\u83DC\u5355\u9879\u8BBE\u7F6E\u3002
\u672A\u627E\u5230\u5DE5\u5177\u680F\uFF1A{{toolbar}}`,"error-toolbar-not-found":`\u8BF7\u68C0\u67E5\u7B14\u8BB0\u5DE5\u5177\u680F\u8BBE\u7F6E\u4E2D\u7684\u5DE5\u5177\u680F\u8BBE\u7F6E\u3002
\u672A\u627E\u5230\u5DE5\u5177\u680F\uFF1A{{folder}}`},Vi={name:"\u7B14\u8BB0\u5DE5\u5177\u680F"},Bi={"button-cancel":"\u53D6\u6D88","button-delete-tooltip":"\u5220\u9664","button-drag-tooltip":"\u62D6\u52A8\u4EE5\u91CD\u65B0\u6392\u5E8F","button-learn-more":"\u4E86\u89E3\u66F4\u591A","button-user-guide":"\u7528\u6237\u6307\u5357","error-old-settings-name":"\u26A0\uFE0F \u9519\u8BEF\uFF1A\u8BF7\u91CD\u65B0\u542F\u7528\u7B14\u8BB0\u5DE5\u5177\u680F\u63D2\u4EF6\uFF08\u6216\u91CD\u542F Obsidian\uFF09","error-old-settings-description":"\u52A0\u8F7D\u4E86\u65E7\u7684\u8BBE\u7F6E\u6587\u4EF6\uFF08{{oldVersion}}\uFF09\uFF0C\u5F53\u524D\u6700\u65B0\u7248\u672C\u4E3A {{currentVersion}}","option-platform-desktop":"\u684C\u9762\u7AEF","option-platform-mobile":"\u79FB\u52A8\u7AEF","title-edit-toolbar":"\u7F16\u8F91\u5DE5\u5177\u680F\uFF1A{{toolbar}}","title-edit-toolbar_none":"\u7F16\u8F91\u5DE5\u5177\u680F","delete-toolbar":{name:"\u5220\u9664\u6B64\u5DE5\u5177\u680F",description:"\u6B64\u64CD\u4F5C\u65E0\u6CD5\u64A4\u9500\u3002",title:"\u5220\u9664\u5DE5\u5177\u680F\uFF1A{{toolbar}}","button-delete":"\u5220\u9664...","button-delete-confirm":"\u5220\u9664","button-delete-tooltip":"\u5220\u9664\u6B64\u5DE5\u5177\u680F","label-delete-confirm":"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u6B64\u5DE5\u5177\u680F\u5417\uFF1F"},"display-rules":{name:"\u7279\u5B9A\u7B14\u8BB0\u663E\u793A\u89C4\u5219",description:"\u5B9A\u4E49\u5728\u54EA\u4E9B\u7279\u5B9A\u7B14\u8BB0\u4E0A\u663E\u793A\u5DE5\u5177\u680F\u3002","option-property":"\u5C5E\u6027","option-property-description":"\u5982\u679C\u5728\u6B64\u5C5E\u6027\u4E2D\u627E\u5230\u5DE5\u5177\u680F\u540D\u79F0\uFF0C\u5219\u4F1A\u5728\u7B14\u8BB0\u4E0A\u663E\u793A\u5BF9\u5E94\u7684\u5DE5\u5177\u680F\u3002\u4F18\u5148\u4E8E\u4EFB\u4F55\u6587\u4EF6\u5939\u6620\u5C04\u7684\u89C4\u5219\u3002\u8BBE\u7F6E\u4E3A'none'\u5219\u4F1A\u9690\u85CF\u5DE5\u5177\u680F\u3002","option-property-placeholder":"\u5C5E\u6027","option-folder-all":"\u6240\u6709\u6587\u4EF6\u5939","option-folder-root":"\u4EC5\u6839\u76EE\u5F55\u6587\u4EF6\u5939","option-folder-mappings":"\u6587\u4EF6\u5939\u6620\u5C04","option-folder-mappings-description":"\u4EE5\u4E0B\u6587\u4EF6\u5939\u4E2D\u7684\u7B14\u8BB0\u5C06\u663E\u793A\u6620\u5C04\u5230\u5B83\u7684\u5DE5\u5177\u680F\uFF0C\u4F18\u5148\u7EA7\u4ECE\u4E0A\u5230\u4E0B\u3002","option-folder-mappings-empty":"\u70B9\u51FB\u6309\u94AE\u521B\u5EFA\u6620\u5C04\u3002","placeholder-mapping-folder":"\u6587\u4EF6\u5939","placeholder-mapping-toolbar":"\u5DE5\u5177\u680F","button-new-mapping":"+ \u65B0\u5EFA\u6620\u5C04","button-new-mapping-tooltip":"\u6DFB\u52A0\u4E00\u9879\u65B0\u7684\u300C\u6587\u4EF6\u5939->\u5DE5\u5177\u680F\u300D\u7684\u6620\u5C04","error-folder-already-mapped":"\u6B64\u6587\u4EF6\u5939\u5DF2\u7ECF\u5173\u8054\u4E86\u4E00\u4E2A\u5DE5\u5177\u680F\u3002"},"icon-suggester":{"option-no-icon":"\u65E0\u56FE\u6807",placeholder:"\u641C\u7D22\u56FE\u6807...","instruction-navigate":"\u5BFC\u822A","instruction-use":"\u4F7F\u7528\u56FE\u6807","instruction-dismiss":"\u5173\u95ED"},item:{"button-duplicate-tooltip":"\u590D\u5236\u6B64\u9879\u76EE","button-icon-tooltip":"\u9009\u62E9\u56FE\u6807\uFF08\u53EF\u9009\uFF09","label-preview-edit":"\u7F16\u8F91\u5DE5\u5177\u680F\uFF1A{{toolbar}}","label-preview-empty-no-items":"\u7F3A\u5C11\u9879\u76EE\uFF0C\u7F16\u8F91\u6B64\u5DE5\u5177\u680F\u4EE5\u6DFB\u52A0\u9879\u76EE\u3002","option-break":"\u6362\u884C","option-command":"\u547D\u4EE4","option-command-placeholder":"\u641C\u7D22\u547D\u4EE4","option-component-icon":"\u56FE\u6807","option-component-label":"\u6587\u672C","option-file":"\u6587\u4EF6","option-file-placeholder":"\u641C\u7D22\u6587\u4EF6\u6216\u6587\u4EF6\u5939","option-file-error-does-not-exist":"\u6B64\u6587\u4EF6\uFF08\u6216\u6587\u4EF6\u5939\uFF09\u4E0D\u5B58\u5728\u3002","option-item-group":"\u9879\u76EE\u7EC4","option-item-group-placeholder":"\u5DE5\u5177\u680F","option-item-group-help":"\u9009\u62E9\u8981\u5D4C\u5957\u8FDB\u6B64\u5DE5\u5177\u680F\u7684\u5DE5\u5177\u680F\u3002","option-item-group-error-does-not-exist":"\u5DE5\u5177\u680F\u4E0D\u5B58\u5728","option-item-menu":"\u9879\u76EE\u83DC\u5355","option-item-menu-placeholder":"\u5DE5\u5177\u680F","option-item-menu-help":"\u9009\u62E9\u8981\u4F5C\u4E3A\u83DC\u5355\u6253\u5F00\u7684\u5DE5\u5177\u680F\u3002","option-item-menu-error-does-not-exist":"\u5DE5\u5177\u680F\u4E0D\u5B58\u5728","option-label-placeholder":"\u6587\u672C\uFF08\u5982\u679C\u8BBE\u7F6E\u4E86\u56FE\u6807\u5219\u53EF\u9009\uFF09","option-separator":"\u5206\u9694\u7B26","option-tooltip-placeholder":"\u5DE5\u5177\u63D0\u793A\uFF08\u53EF\u9009\uFF09","option-uri":"URI","option-uri-placehoder":"\u7F51\u7AD9\u3001URI \u6216\u7B14\u8BB0\u540D\u79F0","option-uri-help":"\u63D0\u793A\uFF1A\u5728 URI \u4E2D\u53EF\u4EE5\u4F7F\u7528\u4F7F\u7528\u7B14\u8BB0\u5C5E\u6027\u3002","option-visibility-component-hidden-platform":"\u5728{{platform}}\u9690\u85CF{{component}}","option-visibility-component-visible-platform":"\u5728{{platform}}\u663E\u793A{{component}}","option-visibility-hidden":"\u9690\u85CF","option-visibility-hidden-platform":"\u5728{{platform}}\u9690\u85CF","option-visibility-visible-platform":"\u5728{{platform}}\u663E\u793A","option-visibility-platform-desktop":"\u684C\u9762\u7AEF","option-visibility-platform-mobile":"\u79FB\u52A8\u7AEF"},"item-suggester":{placeholder:"\u641C\u7D22\u9879\u76EE...","instruction-navigate":"\u5BFC\u822A","instruction-use":"\u4F7F\u7528\u9879\u76EE","instruction-dismiss":"\u5173\u95ED"},items:{name:"\u9879\u76EE","name-with-count":"\u9879\u76EE\uFF08{{count}}\uFF09",description:"\u6309\u987A\u5E8F\u5411\u5DE5\u5177\u680F\u6DFB\u52A0\u9879\u76EE\u3002","label-empty-no-items":"\u65E0\u5DE5\u5177\u680F\u9879\u76EE\u3002","button-add-break-tooltip":"\u5411\u5DE5\u5177\u680F\u6DFB\u52A0\u6362\u884C","button-add-separator-tooltip":"\u5411\u5DE5\u5177\u680F\u6DFB\u52A0\u5206\u9694\u7B26","button-collapse-items-tooltip":"\u6298\u53E0\u6240\u6709\u9879\u76EE","button-expand-items-tooltip":"\u5C55\u5F00\u6240\u6709\u9879\u76EE","button-new-item":"+ \u6DFB\u52A0\u5DE5\u5177\u680F\u9879\u76EE","button-new-item-tooltip":"\u5411\u5DE5\u5177\u680F\u6DFB\u52A0\u65B0\u9879\u76EE","option-item-empty-label":"\u672A\u8BBE\u7F6E\u6587\u672C","option-edit-item-group-tooltip":"\u7F16\u8F91\u9879\u76EE\u7EC4\uFF1A{{toolbar}}","option-edit-item-group-tooltip_none":"\u7F16\u8F91\u9879\u76EE\u7EC4","option-edit-item-tooltip":"\u7F16\u8F91\u5DE5\u5177\u680F\u9879\u76EE","option-edit-item-type-tooltip":"\u7F16\u8F91 {{itemType}}"},name:{name:"\u540D\u79F0",description:"\u4E3A\u6B64\u5DE5\u5177\u680F\u6307\u5B9A\u552F\u4E00\u540D\u79F0\u3002","error-toolbar-already-exists":"\u5DF2\u5B58\u5728\u540C\u540D\u7684\u5DE5\u5177\u680F\uFF01"},other:{name:"\u5176\u4ED6",icon:{name:"\u56FE\u6807",description:"\u8BBE\u7F6E\u6D6E\u52A8\u6309\u94AE\u548C\u5BFC\u822A\u680F\uFF08\u79FB\u52A8\u7AEF\uFF09\u7684\u56FE\u6807\uFF0C\u9700\u8981\u91CD\u542F\u3002",tooltip:"\u9009\u62E9\u56FE\u6807"},"ribbon-action":{"option-item-suggester":"\u6253\u5F00\u5FEB\u901F\u5DE5\u5177","option-toolbar-suggester":"\u6253\u5F00\u5FEB\u901F\u5DE5\u5177\u680F"},"show-edit-tbar":{name:"\u5728\u5DE5\u5177\u680F\u83DC\u5355\u4E2D\u663E\u793A'\u7F16\u8F91\u5DE5\u5177\u680F'\u7684\u94FE\u63A5",description:"\u5728\u5DE5\u5177\u680F\u83DC\u5355\u4E2D\u6DFB\u52A0\u4E00\u4E2A\u9879\u76EE\uFF0C\u4EE5\u5FEB\u901F\u8BBF\u95EE\u5DE5\u5177\u680F\u7684\u8BBE\u7F6E\u3002"}},position:{name:"\u4F4D\u7F6E",description:"\u914D\u7F6E\u5F53\u524D\u5DE5\u5177\u680F\u7684\u663E\u793A\u4F4D\u7F6E","option-mobile-help":"\u63D0\u793A\uFF1A\u4F60\u53EF\u4EE5\u4ECE\u5BFC\u822A\u680F\u8BBF\u95EE\u5DE5\u5177\u680F\u3002","option-fabl":"\u6D6E\u52A8\u6309\u94AE\uFF1A\u5DE6\u4FA7","option-fabr":"\u6D6E\u52A8\u6309\u94AE\uFF1A\u53F3\u4FA7","option-hidden":"\u9690\u85CF\uFF08\u4E0D\u663E\u793A\uFF09","option-hidden-mobile":"\u9690\u85CF / \u5BFC\u822A\u680F","option-props":"\u5C5E\u6027\u4E0B\u65B9","option-top":"\u7F6E\u9876\uFF08\u56FA\u5B9A\u4F4D\u7F6E\uFF09"},styles:{name:"\u6837\u5F0F",description:"\u5E94\u7528\u4E8E\u5DE5\u5177\u680F\u7684\u6837\u5F0F\u5217\u8868\u3002",help:"\u4F7F\u7528 Style Settings \u63D2\u4EF6\u53EF\u8FDB\u884C\u66F4\u591A\u81EA\u5B9A\u4E49\u3002","option-autohide":"\u81EA\u52A8\u9690\u85CF*","option-autohide-disclaimer":"\u81EA\u52A8\u9690\u85CF\u4E0D\u9002\u7528\u4E8E\u79FB\u52A8\u7AEF\u3002","option-between":"\u9879\u76EE\u95F4\u8DDD","option-border":"\u663E\u793A\u8FB9\u6846","option-button":"\u663E\u793A\u4E3A\u6309\u94AE","option-center":"\u5C45\u4E2D\u9879\u76EE","option-even":"\u5747\u5300\u5206\u5E03\u9879\u76EE","option-floatl":"Float left\uFF08\u5DE6\u6D6E\u52A8\uFF09*","option-floatl-disclaimer":"\u5DE6\u6D6E\u52A8\u4EC5\u5728 Callout \u5185\u6709\u6548\u3002","option-floatr":"Float right\uFF08\u53F3\u6D6E\u52A8\uFF09*","option-floatr-disclaimer":"\u53F3\u6D6E\u52A8\u4EC5\u5728 Callout \u5185\u6709\u6548\u3002","option-left":"\u5DE6\u5BF9\u9F50\u9879\u76EE","option-noborder":"\u65E0\u8FB9\u6846","option-nofloat":"\u65E0\u6D6E\u52A8","option-notsticky":"\u975E\u7C98\u6027","option-nowrap":"\u4E0D\u6362\u884C\u9879\u76EE*","option-nowrap-disclaimer":"\u5728\u9879\u76EE\u4E0D\u5747\u5300\u5206\u5E03\u6216\u5C45\u4E2D\u7684\u60C5\u51B5\u4E0B\u6548\u679C\u6700\u4F73\u3002","option-nowide":"\u6B63\u6587\u5BBD\u5EA6*","option-nowide-disclaimer":"\u6B63\u6587\u5BBD\u5EA6\u4EC5\u5728\u5DE5\u5177\u680F\u4F4D\u7F6E\u4E3A\u7F6E\u9876\uFF08\u56FA\u5B9A\u4F4D\u7F6E\uFF09\u65F6\u6709\u6548\u3002","option-right":"\u53F3\u5BF9\u9F50\u9879\u76EE","option-sticky":"Sticky\uFF08\u7C98\u6027\uFF09\u6837\u5F0F*","option-sticky-disclaimer":"Sticky\uFF08\u7C98\u6027\uFF09\u6837\u5F0F\u5728\u9605\u8BFB\u6A21\u5F0F\u4E0B\u4E0D\u9002\u7528\u3002","option-wide":"\u7F16\u8F91\u5668\u5BBD\u5EA6*","option-wide-disclaimer":"\u7F16\u8F91\u5668\u5BBD\u5EA6\u4EC5\u5728\u5DE5\u5177\u680F\u4F4D\u7F6E\u4E3A\u7F6E\u9876\uFF08\u56FA\u5B9A\u4F4D\u7F6E\uFF09\u65F6\u6709\u6548\u3002","option-default-name":"\u9ED8\u8BA4","option-default-description":"\u9002\u7528\u4E8E\u6240\u6709\u5E73\u53F0\uFF08\u9664\u975E\u88AB\u8986\u76D6\uFF09\u3002","option-default-empty":"\u672A\u8BBE\u7F6E\u9ED8\u8BA4\u6837\u5F0F\u3002","option-mobile-name":"\u79FB\u52A8\u7AEF","option-mobile-description":"\u8986\u76D6\u9ED8\u8BA4\u6837\u5F0F\u3002","option-mobile-empty":"\u672A\u8BBE\u7F6E\u79FB\u52A8\u7AEF\u6837\u5F0F\u3002\u4F7F\u7528\u9ED8\u8BA4\u6837\u5F0F\u3002","style-tooltip-use-class":"\u5728 Callout \u6216 CSS \u4E2D\u4F7F\u7528\uFF1A{{class}}","style-remove-tooltip":"\u79FB\u9664"},toolbars:{name:"\u5DE5\u5177\u680F","name-with-count":"\u5DE5\u5177\u680F\uFF08{{count}}\uFF09",description:"\u5B9A\u4E49\u8981\u6DFB\u52A0\u5230\u7B14\u8BB0\u4E2D\u7684\u5DE5\u5177\u680F\u3002","button-collapse-tbars-tooltip":"\u6298\u53E0\u6240\u6709\u5DE5\u5177\u680F","button-duplicate-tbar-tooltip":"\u590D\u5236\u6B64\u5DE5\u5177\u680F","button-edit-tbar":"\u7F16\u8F91","button-expand-tbars-tooltip":"\u5C55\u5F00\u6240\u6709\u5DE5\u5177\u680F","button-edit-tbar-tooltip":"\u66F4\u65B0\u6B64\u5DE5\u5177\u680F","button-new-tbar":"+ \u65B0\u5EFA\u5DE5\u5177\u680F","button-new-tbar-tooltip":"\u6DFB\u52A0\u4E00\u4E2A\u65B0\u7684\u5DE5\u5177\u680F","duplicate-file-suffix":"\u590D\u5236","label-empty-create-tbar":"\u70B9\u51FB\u6309\u94AE\u521B\u5EFA\u5DE5\u5177\u680F\u3002","label-tbar-name-not-set":"\u26A0\uFE0F \u672A\u8BBE\u7F6E\u5DE5\u5177\u680F\u540D\u79F0"},usage:{name:"\u4F7F\u7528\u60C5\u51B5",description:"\u6B64\u5DE5\u5177\u680F\u5728 {{mappingCount}} \u4E2A\u6620\u5C04\u548C {{itemCount}} \u4E2A\u5DE5\u5177\u680F\u9879\u76EE\u4E2D\u4F7F\u7528\u3002","description-search":"\u641C\u7D22\u5C5E\u6027\u7684\u4F7F\u7528\u60C5\u51B5"}},Hi={"button-floating-tooltip":"\u6253\u5F00\u7B14\u8BB0\u5DE5\u5177\u680F","menu-edit-toolbar":"\u7F16\u8F91\u5DE5\u5177\u680F\uFF1A{{toolbar}}...","menu-position-props":"\u8BBE\u7F6E\u4F4D\u7F6E\uFF1A\u5C5E\u6027\u4E0B\u65B9","menu-position-top":"\u8BBE\u7F6E\u4F4D\u7F6E\uFF1A\u7F6E\u9876\uFF08\u56FA\u5B9A\u4F4D\u7F6E\uFF09","menu-toolbar-settings":"\u7B14\u8BB0\u5DE5\u5177\u680F\u8BBE\u7F6E..."},Ri={command:Oi,notice:_i,plugin:Vi,setting:Bi,toolbar:Hi};var Co=`# v1.13

## New Features \u{1F389}

There is now a _What's New_ window available in settings (you're looking at it), to provide highlights of the latest features in Note Toolbar. This window is displayed once, when accessing the plugin's settings.

Added a new _Help_ window also available in settings, to point users to documentation, support, and to a new, easy-to-use [feedback form](https://forms.gle/2C38u9F8xTrutB1q8).

Access your toolbars from the file menu:
- When right-clicking on an internal link, the toolbar for the linked note is displayed.
- On desktop, the items are within a sub-menu that shows the toolbar's name (next to Note Toolbar's icon).
- On mobile, the items are added directly to the menu.
- _Thanks to @imeed166 for the idea!_

<a href="https://github.com/user-attachments/assets/8d650aaa-6b67-4a6b-8296-f27920214706">
    <img src="https://github.com/user-attachments/assets/8d650aaa-6b67-4a6b-8296-f27920214706" width="300"/>
</a>

## Improvements \u{1F389}

On desktop, Menu items within menus are displayed using Obsidian's sub-menu UI, opening to the side of the menu instead of in place.

Read the [full release notes](https://github.com/chrisgurney/obsidian-note-toolbar/releases/tag/1.13) to learn more.

---

# v1.12

In case you missed it, check out the [1.12 release](https://github.com/chrisgurney/obsidian-note-toolbar/releases/tag/1.12.1) which includes:

## Translations \u{1F310}

Thanks to some generous volunteers, the Note Toolbar plugin UI and Style Settings have been translated to:
- *Chinese Simplified* (\u7B80\u4F53\u4E2D\u6587) by @Moyf
- *German* (Deutsch) by @hartimd
- *Ukrainian* (\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0438\u0439) by @laktiv

## Quick access to all of your tools and toolbars

Quickly access all of your tools and toolbars wherever you are with Quick Tools:
- Open with the \`Note Toolbar: Open quick tools\` or \`Note Toolbar: Open quick toolbars\` commands.

<a href="https://github.com/chrisgurney/obsidian-note-toolbar/releases/tag/1.12.1">
    <img src="https://github.com/user-attachments/assets/acbf87f9-7a66-49d8-9b82-df961f6c63d8" width="700"/>
</a>

Read the [full release notes](https://github.com/chrisgurney/obsidian-note-toolbar/releases/tag/1.12.1) to learn more.`;var ht=202407271e-1,je=1.13;i18next.addResourceBundle("de","plugin-note-toolbar",Ge);i18next.addResourceBundle("en","plugin-note-toolbar",Ke);i18next.addResourceBundle("uk","plugin-note-toolbar",qe);i18next.addResourceBundle("zh","plugin-note-toolbar",We);var r=i18next.getFixedT(null,"plugin-note-toolbar",null);i18next.addResourceBundle("en","plugin-note-toolbar-docs",{"whats-new":Co});var ko=i18next.getFixedT(null,"plugin-note-toolbar-docs",null);var Ct=(l=>(l.Break="break",l.Command="command",l.File="file",l.Group="group",l.Menu="menu",l.Separator="separator",l.Uri="uri",l))(Ct||{});var Ye=(n=>(n.Break="data-ntb-break",n.Command="data-ntb-command",n.Folder="data-ntb-folder",n.Menu="data-ntb-menu",n.Separator="data-ntb-sep",n))(Ye||{});var Do={folderMappings:[],icon:"circle-ellipsis",ribbonAction:"toolbar",showEditInFabMenu:!1,toolbarProp:"notetoolbar",toolbars:[],version:ht,whatsnew_version:0},En={uuid:Q(),defaultStyles:["border","even","sticky"],items:[],mobileStyles:[],name:"",position:{desktop:{allViews:{position:"props"}},tablet:{allViews:{position:"props"}},mobile:{allViews:{position:"props"}}},updated:new Date().toISOString()},ue="https://github.com/chrisgurney/obsidian-note-toolbar/wiki/",Io="https://github.com/chrisgurney/obsidian-note-toolbar/releases",Ao={["command"]:r("setting.item.option-command"),["file"]:r("setting.item.option-file"),["group"]:r("setting.item.option-item-group"),["menu"]:r("setting.item.option-item-menu"),["uri"]:r("setting.item.option-uri")},Xe={desktop:[{top:r("setting.position.option-top")},{props:r("setting.position.option-props")},{fabl:r("setting.position.option-fabl")},{fabr:r("setting.position.option-fabr")},{hidden:r("setting.position.option-hidden")}],mobile:[{top:r("setting.position.option-top")},{props:r("setting.position.option-props")},{fabl:r("setting.position.option-fabl")},{fabr:r("setting.position.option-fabr")},{hidden:r("setting.position.option-hidden-mobile")}]},Mo={["item-suggester"]:r("setting.other.ribbon-action.option-item-suggester"),["toolbar-suggester"]:r("setting.other.ribbon-action.option-toolbar-suggester"),["toolbar"]:r("setting.other.ribbon-action.option-toolbar")},$e=[{autohide:r("setting.styles.option-autohide")},{border:r("setting.styles.option-border")},{button:r("setting.styles.option-button")},{center:r("setting.styles.option-center")},{wide:r("setting.styles.option-wide")},{floatl:r("setting.styles.option-floatl")},{floatr:r("setting.styles.option-floatr")},{left:r("setting.styles.option-left")},{right:r("setting.styles.option-right")},{between:r("setting.styles.option-between")},{even:r("setting.styles.option-even")},{sticky:r("setting.styles.option-sticky")}],Ze=[{autohide:r("setting.styles.option-autohide-disclaimer")},{floatl:r("setting.styles.option-floatl-disclaimer")},{floatr:r("setting.styles.option-floatr-disclaimer")},{sticky:r("setting.styles.option-sticky-disclaimer")},{wide:r("setting.styles.option-wide-disclaimer")}],Je=[{mbrder:r("setting.styles.option-border")},{mnbrder:r("setting.styles.option-noborder")},{mbtn:r("setting.styles.option-button")},{mctr:r("setting.styles.option-center")},{mnwd:r("setting.styles.option-nowide")},{mnwrp:r("setting.styles.option-nowrap")},{mwd:r("setting.styles.option-wide")},{mfltl:r("setting.styles.option-floatl")},{mfltr:r("setting.styles.option-floatr")},{mnflt:r("setting.styles.option-nofloat")},{mlft:r("setting.styles.option-left")},{mrght:r("setting.styles.option-right")},{mbtwn:r("setting.styles.option-between")},{mevn:r("setting.styles.option-even")},{mstcky:r("setting.styles.option-sticky")},{mnstcky:r("setting.styles.option-notsticky")}],Qe=[{mfltl:r("setting.styles.option-floatl-disclaimer")},{mfltr:r("setting.styles.option-floatr-disclaimer")},{mnwrp:r("setting.styles.option-nowrap-disclaimer")},{mstcky:r("setting.styles.option-sticky-disclaimer")},{mnwd:r("setting.styles.option-nowide-disclaimer")},{mwd:r("setting.styles.option-wide-disclaimer")}];var zi=!1;function kt(s,i){s&&s.allViews&&(s.allViews.components.includes(i)||s.allViews.components.push(i))}function Vt(s,i,t){if(t<0||t===s.length)return;let e=s[i];s[i]=s[t],s[t]=e}function No(s){let i=to(s.desktop),t=to(s.mobile),e=to(s.tablet);return i.concat(t,e)}function Qt(s){let i=eo(s.desktop),t=eo(s.mobile),e=eo(s.tablet);return[i,t,e]}function h(s,...i){zi&&console.log(s,...i)}function Q(){return window.crypto.randomUUID()}function io(s){let i=s.getBoundingClientRect();return{x:i.left+activeWindow.scrollX,y:i.top+activeWindow.scrollY}}function no(s){let i;return s&&(s instanceof MouseEvent&&s.type==="auxclick"&&s.button===1?i="tab":(oo.Platform.isWin||oo.Platform.isLinux?s!=null&&s.ctrlKey:s!=null&&s.metaKey)&&(i=s!=null&&s.altKey?s!=null&&s.shiftKey?"window":"split":"tab")),i}function to(s){let i=!1,t=!1;return s&&s.allViews&&(i=s.allViews.components.includes("icon"),t=s.allViews.components.includes("label")),[i,t]}function R(s){return/{{.*?}}/g.test(s)}function eo(s){return!!s&&!!s.allViews&&s.allViews.components.length>0}var Jt;function Lo(s){return s!==""?(Jt||(Jt=document.createElement("input"),Jt.setAttribute("type","url")),Jt.value=s,Jt.validity.valid):!1}function ce(s,i,t){if(i!==t&&i>=0&&i<s.length&&t>=0&&t<s.length){let e=s.splice(i,1)[0];s.splice(t,0,e)}}function Po(){setTimeout(()=>{let s=new KeyboardEvent("keydown",{key:"ArrowDown",code:"ArrowDown",keyCode:40,bubbles:!0,cancelable:!0});activeDocument.dispatchEvent(s)},50)}function Dt(s,i){if(s&&s.allViews){let t=s.allViews.components.indexOf(i);t!==-1&&s.allViews.components.splice(t,1)}}function Z(s,i,t,e){var a;let o=t==null?void 0:t.basename;o!=null&&(i=i.replace("{{note_title}}",e?encodeURIComponent(o):o));let n=t?(a=s.metadataCache.getFileCache(t))==null?void 0:a.frontmatter:void 0;return i=i.replace(/{{prop_(.*?)}}/g,(l,p)=>{let d=p.trim();if(n&&n[d]!==void 0){let c=/\[\[([^\|\]]+)(?:\|[^\]]*)?\]\]/g,u=Array.isArray(n[d])?n[d].join(","):n[d];return u?e?encodeURIComponent(u==null?void 0:u.replace(c,"$1")):u.replace(c,"$1"):""}else return""}),i}var rt=require("obsidian");var ft=require("obsidian");var It=class extends ft.Modal{constructor(t){super(t.app);this.plugin=t,this.component=new ft.Component,this.modalEl.addClass("note-toolbar-setting-whatsnew-dialog")}onOpen(){let t=this.contentEl.createDiv();t.addClass("note-toolbar-setting-whatsnew-banner"),t.setText(r("setting.whats-new.title"));let e=this.contentEl.createDiv();e.addClass("note-toolbar-setting-whatsnew-notes"),new ft.Setting(e).setName(at("book-text",r("setting.whats-new.label-release-notes"))).setDesc(r("setting.whats-new.label-release-notes-description")).addButton(n=>{n.setButtonText(r("setting.whats-new.button-read")).setTooltip(r("setting.whats-new.button-read-tooltip")).setCta().onClick(()=>{window.open("https://github.com/chrisgurney/obsidian-note-toolbar/releases","_blank")})});let o=this.contentEl.createDiv();o.addClass("note-toolbar-setting-whatsnew-content"),ft.MarkdownRenderer.render(this.plugin.app,ko("whats-new"),o,"/",this.component)}};var lt=require("obsidian");var Bt=class extends lt.Modal{constructor(i){super(i.app),this.modalEl.addClass("note-toolbar-setting-mini-dialog","note-toolbar-setting-help-dialog")}onOpen(){this.setTitle(r("setting.help.title")),new lt.Setting(this.modalEl).setName(at("messages-square",r("setting.help.label-support"))).setDesc(r("setting.help.label-support-description")).addButton(i=>{i.setButtonText(r("setting.help.button-open")).setTooltip(r("setting.help.button-open-github")).setCta().onClick(()=>{window.open("https://github.com/chrisgurney/obsidian-note-toolbar/discussions","_blank")})}),new lt.Setting(this.modalEl).setName(at("pen-box",r("setting.help.label-feedback"))).setDesc(r("setting.help.label-feedback-description")).addButton(i=>{i.setButtonText(r("setting.help.button-open")).setTooltip(r("setting.help.button-open-google")).onClick(()=>{window.open("https://docs.google.com/forms/d/e/1FAIpQLSeVWHVnookJr8HVQywk5TwupU-p7vkRkSt83Q5jscR6VwpZEQ/viewform","_blank")})}).setClass("note-toolbar-setting-no-border"),new lt.Setting(this.modalEl).setName(at("book-open",r("setting.help.label-user-guide"))).setDesc(r("setting.help.label-user-guide-description")).addButton(i=>{i.setButtonText(r("setting.help.button-read")).setTooltip(r("setting.help.button-open-github")).setCta().onClick(()=>{window.open(ue,"_blank")})}),new lt.Setting(this.modalEl).setName(r("setting.help.label-article-1")).setDesc(r("setting.help.label-article-1-description")).addButton(i=>{i.setButtonText(r("setting.help.button-read")).setTooltip(r("setting.help.button-open-github")).onClick(()=>{window.open("https://github.com/chrisgurney/obsidian-note-toolbar/wiki/Creating-toolbar-items","_blank")})}).setClass("note-toolbar-setting-no-border"),new lt.Setting(this.modalEl).setName(r("setting.help.label-article-2")).setDesc(r("setting.help.label-article-2-description")).addButton(i=>{i.setButtonText(r("setting.help.button-read")).setTooltip(r("setting.help.button-open-github")).onClick(()=>{window.open("https://github.com/chrisgurney/obsidian-note-toolbar/wiki/Note-Toolbar-Callouts","_blank")})}).setClass("note-toolbar-setting-no-border"),new lt.Setting(this.modalEl).setName(at("heart",r("setting.help.label-donate"))).setDesc(r("setting.help.label-donate-description")).addButton(i=>{i.setButtonText(r("setting.help.button-donate")).setTooltip(r("setting.help.button-donate-tooltip")).onClick(()=>{window.open("https://buymeacoffee.com/cheznine","_blank")})})}};function At(s,i,t=!1){let e=document.createDocumentFragment(),o=e.createDiv();o.addClass("note-toolbar-setting-tbar-preview");let n=document.createDocumentFragment();if(s.items.length>0?s.items.filter(a=>!(a.label===""&&a.icon===""&&!["break","group","separator"].includes(a.linkAttr.type))).map(a=>{switch(a.linkAttr.type){case"break":case"separator":break;case"group":if(i){let p=i.getToolbarById(a.link);if(p){let d=createDiv();d.addClass("note-toolbar-setting-toolbar-list-preview-item");let c=createSpan();c.addClass("note-toolbar-setting-group-preview"),c.setText(p.name),d.append(c),n.append(d)}}break;default:let l=(0,rt.getIcon)(a.icon);if(l||a.label){let p=createDiv();if(p.addClass("note-toolbar-setting-toolbar-list-preview-item"),a.icon&&l){let d=createSpan();(0,rt.setIcon)(d,a.icon),n.append(d),p.append(d)}if(a.label){let d=createSpan();d.textContent=a.label,n.append(d),p.append(d)}n.append(p)}break}}):n=yt(r("setting.item.label-preview-empty-no-items")),o.appendChild(n),t){let a=createDiv();a.addClass("note-toolbar-setting-tbar-preview-edit");let l=createEl("a");l.href="obsidian://note-toolbar?toolbarsettings="+encodeURIComponent(s.name),l.setText(r("setting.item.label-preview-edit",{toolbar:s.name})),a.appendChild(l),e.appendChild(a)}return e}function ge(s,i,t=!1){if(rt.Platform.isPhone||t){let e=i.createDiv();e.addClass("note-toolbar-setting-help-section");let o=document.createDocumentFragment();o.append("v"+s.manifest.version," \u2022\xA0",o.createEl("a",{href:"obsidian://note-toolbar?whatsnew",text:r("setting.button-whats-new")})," \u2022\xA0",o.createEl("a",{href:"obsidian://note-toolbar?help",text:at("help-circle",r("setting.button-help"))})),e.append(o)}else{let e=document.createDocumentFragment();e.append(e.createEl("a",{href:Io,text:"v"+s.manifest.version})),new rt.Setting(i).setName(r("plugin.name")+" \u2022 v"+s.manifest.version).setDesc(r("setting.help.description")).addButton(o=>{o.setTooltip(r("setting.button-whats-new-tooltip")).onClick(()=>{new It(s).open()}).buttonEl.setText(r("setting.button-whats-new"))}).addButton(o=>{o.setTooltip(r("setting.button-help-tooltip")).onClick(()=>{new Bt(s).open()}).buttonEl.setText(at("help-circle",r("setting.button-help")))})}}function yt(s){let i=document.createDocumentFragment(),t=document.createElement("i");return t.textContent=s,i.append(t),i}function at(s,i){let t=document.createDocumentFragment(),e=t.createEl("span");e.addClass("note-toolbar-setting-text-with-icon");let o=e.createEl("span");return(0,rt.setIcon)(o,"lucide-"+s),e.createEl("span").setText(i),t.append(e),t}function j(s,i){let t=document.createDocumentFragment();return t.append(s," ",t.createEl("a",{href:ue+i,text:r("setting.button-learn-more")})),t}function me(s){s.settings.whatsnew_version!==je&&(s.settings.whatsnew_version=je,s.settingsManager.save().then(()=>{new It(s).open()}))}var w=require("obsidian");var Fo=require("obsidian");var be=class extends Fo.Modal{constructor(t){super(t.plugin.app);this.modalEl.addClass("note-toolbar-setting-mini-dialog"),this.parent=t,this.plugin=t.plugin,this.toolbar=t.toolbar}onOpen(){this.setTitle(r("setting.delete-toolbar.title",{toolbar:this.toolbar.name})),this.contentEl.createEl("p",{text:r("setting.delete-toolbar.label-delete-confirm")});let t=this.contentEl.createEl("button",{text:r("setting.delete-toolbar.button-delete-confirm")});t.addClass("mod-warning"),t.onclick=async()=>this.delete(),this.contentEl.createEl("span").setText("\xA0\xA0");let e=this.contentEl.createEl("button",{text:r("setting.button-cancel")});e.onclick=async()=>this.close()}async delete(){this.plugin.settingsManager.deleteToolbar(this.toolbar.uuid),await this.plugin.settingsManager.save(),this.close(),this.parent.close()}};var Oo=require("obsidian"),he=class extends Oo.AbstractInputSuggest{constructor(t,e){super(t,e);this.inputEl=e,this.commands=Object.values(this.app.commands.commands)}getSuggestions(t){let e=[],o=t.toLowerCase();return this.commands.forEach(n=>{n.name.toLowerCase().contains(o)&&e.push(n)}),e}renderSuggestion(t,e){e.setText(t.name)}selectSuggestion(t){this.inputEl.value=t.name,this.inputEl.setAttribute("data-command-id",t.id),this.inputEl.trigger("input"),this.inputEl.blur(),this.close()}};var pt=require("obsidian");var wt=class extends pt.SuggestModal{constructor(t,e,o){super(t.app);this.modalEl.addClass("note-toolbar-setting-mini-dialog"),this.parentEl=o,this.plugin=t,this.settingsWithIcon=e,this.setPlaceholder(r("setting.icon-suggester.placeholder")),this.setInstructions([{command:"\u2191\u2193",purpose:r("setting.icon-suggester.instruction-navigate")},{command:"\u21B5",purpose:r("setting.icon-suggester.instruction-use")},{command:"esc",purpose:r("setting.icon-suggester.instruction-dismiss")}])}getSuggestions(t){let e=(0,pt.getIconIds)(),o=[],n=t.toLowerCase();return o.push(r("setting.icon-suggester.option-no-icon")),e.forEach(a=>{a.toLowerCase().contains(n)&&o.push(a)}),o}renderSuggestion(t,e){e.addClass("note-toolbar-icon-suggestion");let o=e.createSpan();if(t===r("setting.icon-suggester.option-no-icon"))o.setText(t);else{o.setText(t.startsWith("lucide-")?t.substring(7):t);let n=e.createSpan();(0,pt.setIcon)(n,t)}}onChooseSuggestion(t,e){if(h("onChooseSuggestion: ",this.settingsWithIcon),this.settingsWithIcon.icon=t===r("setting.icon-suggester.option-no-icon")?"":t,this.plugin.settingsManager.save(),h("this.parentEl:",this.parentEl),this.parentEl.hasClass("note-toolbar-setting-items-container-row")){let o=this.parentEl.querySelector(".note-toolbar-setting-item-icon .clickable-icon");o&&(0,pt.setIcon)(o,t===r("setting.icon-suggester.option-no-icon")?"lucide-plus-square":t),o.setAttribute("data-note-toolbar-no-icon",t===r("setting.icon-suggester.option-no-icon")?"true":"false");let n=this.parentEl.querySelector(".note-toolbar-setting-item-preview > span");n&&(0,pt.setIcon)(n,t===r("setting.icon-suggester.option-no-icon")?"note-toolbar-none":t)}else(0,pt.setIcon)(this.parentEl,t===r("setting.icon-suggester.option-no-icon")?"lucide-plus-square":t),this.parentEl.setAttribute("data-note-toolbar-no-icon",t===r("setting.icon-suggester.option-no-icon")?"true":"false");this.close()}};var Ht=require("obsidian"),fe=class extends Ht.AbstractInputSuggest{constructor(t,e){super(t,e);this.inputEl=e}getSuggestions(t){let e=this.app.vault.getAllLoadedFiles(),o=[],n=t.toLowerCase();return o=e.filter(a=>(a instanceof Ht.TFile||a instanceof Ht.TFolder)&&a.path.toLowerCase().includes(n)),o}renderSuggestion(t,e){e.setText(t.path)}selectSuggestion(t){this.inputEl.value=t.path,this.inputEl.trigger("input"),this.inputEl.blur(),this.close()}};function _o(s,i){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(s);i&&(e=e.filter(function(o){return Object.getOwnPropertyDescriptor(s,o).enumerable})),t.push.apply(t,e)}return t}function nt(s){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?_o(Object(t),!0).forEach(function(e){Gi(s,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):_o(Object(t)).forEach(function(e){Object.defineProperty(s,e,Object.getOwnPropertyDescriptor(t,e))})}return s}function Se(s){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Se=function(i){return typeof i}:Se=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Se(s)}function Gi(s,i,t){return i in s?Object.defineProperty(s,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[i]=t,s}function ut(){return ut=Object.assign||function(s){for(var i=1;i<arguments.length;i++){var t=arguments[i];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=t[e])}return s},ut.apply(this,arguments)}function Ki(s,i){if(s==null)return{};var t={},e=Object.keys(s),o,n;for(n=0;n<e.length;n++)o=e[n],!(i.indexOf(o)>=0)&&(t[o]=s[o]);return t}function qi(s,i){if(s==null)return{};var t=Ki(s,i),e,o;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);for(o=0;o<n.length;o++)e=n[o],!(i.indexOf(e)>=0)&&Object.prototype.propertyIsEnumerable.call(s,e)&&(t[e]=s[e])}return t}var Wi="1.15.3";function dt(s){if(typeof window!="undefined"&&window.navigator)return!!navigator.userAgent.match(s)}var ct=dt(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),re=dt(/Edge/i),Vo=dt(/firefox/i),ie=dt(/safari/i)&&!dt(/chrome/i)&&!dt(/android/i),qo=dt(/iP(ad|od|hone)/i),Wo=dt(/chrome/i)&&dt(/android/i),jo={capture:!1,passive:!1};function A(s,i,t){s.addEventListener(i,t,!ct&&jo)}function I(s,i,t){s.removeEventListener(i,t,!ct&&jo)}function Ie(s,i){if(i){if(i[0]===">"&&(i=i.substring(1)),s)try{if(s.matches)return s.matches(i);if(s.msMatchesSelector)return s.msMatchesSelector(i);if(s.webkitMatchesSelector)return s.webkitMatchesSelector(i)}catch(t){return!1}return!1}}function Yo(s){return s.host&&s!==document&&s.host.nodeType?s.host:s.parentNode}function et(s,i,t,e){if(s){t=t||document;do{if(i!=null&&(i[0]===">"?s.parentNode===t&&Ie(s,i):Ie(s,i))||e&&s===t)return s;if(s===t)break}while(s=Yo(s))}return null}var Bo=/\s+/g;function Y(s,i,t){if(s&&i)if(s.classList)s.classList[t?"add":"remove"](i);else{var e=(" "+s.className+" ").replace(Bo," ").replace(" "+i+" "," ");s.className=(e+(t?" "+i:"")).replace(Bo," ")}}function T(s,i,t){var e=s&&s.style;if(e){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(s,""):s.currentStyle&&(t=s.currentStyle),i===void 0?t:t[i];!(i in e)&&i.indexOf("webkit")===-1&&(i="-webkit-"+i),e[i]=t+(typeof t=="string"?"":"px")}}function Kt(s,i){var t="";if(typeof s=="string")t=s;else do{var e=T(s,"transform");e&&e!=="none"&&(t=e+" "+t)}while(!i&&(s=s.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(t)}function Xo(s,i,t){if(s){var e=s.getElementsByTagName(i),o=0,n=e.length;if(t)for(;o<n;o++)t(e[o],o);return e}return[]}function it(){var s=document.scrollingElement;return s||document.documentElement}function _(s,i,t,e,o){if(!(!s.getBoundingClientRect&&s!==window)){var n,a,l,p,d,c,u;if(s!==window&&s.parentNode&&s!==it()?(n=s.getBoundingClientRect(),a=n.top,l=n.left,p=n.bottom,d=n.right,c=n.height,u=n.width):(a=0,l=0,p=window.innerHeight,d=window.innerWidth,c=window.innerHeight,u=window.innerWidth),(i||t)&&s!==window&&(o=o||s.parentNode,!ct))do if(o&&o.getBoundingClientRect&&(T(o,"transform")!=="none"||t&&T(o,"position")!=="static")){var m=o.getBoundingClientRect();a-=m.top+parseInt(T(o,"border-top-width")),l-=m.left+parseInt(T(o,"border-left-width")),p=a+n.height,d=l+n.width;break}while(o=o.parentNode);if(e&&s!==window){var g=Kt(o||s),b=g&&g.a,y=g&&g.d;g&&(a/=y,l/=b,u/=b,c/=y,p=a+c,d=l+u)}return{top:a,left:l,bottom:p,right:d,width:u,height:c}}}function Ho(s,i,t){for(var e=St(s,!0),o=_(s)[i];e;){var n=_(e)[t],a=void 0;if(t==="top"||t==="left"?a=o>=n:a=o<=n,!a)return e;if(e===it())break;e=St(e,!1)}return!1}function qt(s,i,t,e){for(var o=0,n=0,a=s.children;n<a.length;){if(a[n].style.display!=="none"&&a[n]!==S.ghost&&(e||a[n]!==S.dragged)&&et(a[n],t.draggable,s,!1)){if(o===i)return a[n];o++}n++}return null}function wo(s,i){for(var t=s.lastElementChild;t&&(t===S.ghost||T(t,"display")==="none"||i&&!Ie(t,i));)t=t.previousElementSibling;return t||null}function J(s,i){var t=0;if(!s||!s.parentNode)return-1;for(;s=s.previousElementSibling;)s.nodeName.toUpperCase()!=="TEMPLATE"&&s!==S.clone&&(!i||Ie(s,i))&&t++;return t}function Ro(s){var i=0,t=0,e=it();if(s)do{var o=Kt(s),n=o.a,a=o.d;i+=s.scrollLeft*n,t+=s.scrollTop*a}while(s!==e&&(s=s.parentNode));return[i,t]}function ji(s,i){for(var t in s)if(s.hasOwnProperty(t)){for(var e in i)if(i.hasOwnProperty(e)&&i[e]===s[t][e])return Number(t)}return-1}function St(s,i){if(!s||!s.getBoundingClientRect)return it();var t=s,e=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var o=T(t);if(t.clientWidth<t.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return it();if(e||i)return t;e=!0}}while(t=t.parentNode);return it()}function Yi(s,i){if(s&&i)for(var t in i)i.hasOwnProperty(t)&&(s[t]=i[t]);return s}function so(s,i){return Math.round(s.top)===Math.round(i.top)&&Math.round(s.left)===Math.round(i.left)&&Math.round(s.height)===Math.round(i.height)&&Math.round(s.width)===Math.round(i.width)}var ne;function $o(s,i){return function(){if(!ne){var t=arguments,e=this;t.length===1?s.call(e,t[0]):s.apply(e,t),ne=setTimeout(function(){ne=void 0},i)}}}function Xi(){clearTimeout(ne),ne=void 0}function Zo(s,i,t){s.scrollLeft+=i,s.scrollTop+=t}function Jo(s){var i=window.Polymer,t=window.jQuery||window.Zepto;return i&&i.dom?i.dom(s).cloneNode(!0):t?t(s).clone(!0)[0]:s.cloneNode(!0)}function Qo(s,i,t){var e={};return Array.from(s.children).forEach(function(o){var n,a,l,p;if(!(!et(o,i.draggable,s,!1)||o.animated||o===t)){var d=_(o);e.left=Math.min((n=e.left)!==null&&n!==void 0?n:1/0,d.left),e.top=Math.min((a=e.top)!==null&&a!==void 0?a:1/0,d.top),e.right=Math.max((l=e.right)!==null&&l!==void 0?l:-1/0,d.right),e.bottom=Math.max((p=e.bottom)!==null&&p!==void 0?p:-1/0,d.bottom)}}),e.width=e.right-e.left,e.height=e.bottom-e.top,e.x=e.left,e.y=e.top,e}var W="Sortable"+new Date().getTime();function $i(){var s=[],i;return{captureAnimationState:function(){if(s=[],!!this.options.animation){var e=[].slice.call(this.el.children);e.forEach(function(o){if(!(T(o,"display")==="none"||o===S.ghost)){s.push({target:o,rect:_(o)});var n=nt({},s[s.length-1].rect);if(o.thisAnimationDuration){var a=Kt(o,!0);a&&(n.top-=a.f,n.left-=a.e)}o.fromRect=n}})}},addAnimationState:function(e){s.push(e)},removeAnimationState:function(e){s.splice(ji(s,{target:e}),1)},animateAll:function(e){var o=this;if(!this.options.animation){clearTimeout(i),typeof e=="function"&&e();return}var n=!1,a=0;s.forEach(function(l){var p=0,d=l.target,c=d.fromRect,u=_(d),m=d.prevFromRect,g=d.prevToRect,b=l.rect,y=Kt(d,!0);y&&(u.top-=y.f,u.left-=y.e),d.toRect=u,d.thisAnimationDuration&&so(m,u)&&!so(c,u)&&(b.top-u.top)/(b.left-u.left)===(c.top-u.top)/(c.left-u.left)&&(p=Ji(b,m,g,o.options)),so(u,c)||(d.prevFromRect=c,d.prevToRect=u,p||(p=o.options.animation),o.animate(d,b,u,p)),p&&(n=!0,a=Math.max(a,p),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},p),d.thisAnimationDuration=p)}),clearTimeout(i),n?i=setTimeout(function(){typeof e=="function"&&e()},a):typeof e=="function"&&e(),s=[]},animate:function(e,o,n,a){if(a){T(e,"transition",""),T(e,"transform","");var l=Kt(this.el),p=l&&l.a,d=l&&l.d,c=(o.left-n.left)/(p||1),u=(o.top-n.top)/(d||1);e.animatingX=!!c,e.animatingY=!!u,T(e,"transform","translate3d("+c+"px,"+u+"px,0)"),this.forRepaintDummy=Zi(e),T(e,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),T(e,"transform","translate3d(0,0,0)"),typeof e.animated=="number"&&clearTimeout(e.animated),e.animated=setTimeout(function(){T(e,"transition",""),T(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1},a)}}}}function Zi(s){return s.offsetWidth}function Ji(s,i,t,e){return Math.sqrt(Math.pow(i.top-s.top,2)+Math.pow(i.left-s.left,2))/Math.sqrt(Math.pow(i.top-t.top,2)+Math.pow(i.left-t.left,2))*e.animation}var Rt=[],ao={initializeByDefault:!0},pe={mount:function(i){for(var t in ao)ao.hasOwnProperty(t)&&!(t in i)&&(i[t]=ao[t]);Rt.forEach(function(e){if(e.pluginName===i.pluginName)throw"Sortable: Cannot mount plugin ".concat(i.pluginName," more than once")}),Rt.push(i)},pluginEvent:function(i,t,e){var o=this;this.eventCanceled=!1,e.cancel=function(){o.eventCanceled=!0};var n=i+"Global";Rt.forEach(function(a){t[a.pluginName]&&(t[a.pluginName][n]&&t[a.pluginName][n](nt({sortable:t},e)),t.options[a.pluginName]&&t[a.pluginName][i]&&t[a.pluginName][i](nt({sortable:t},e)))})},initializePlugins:function(i,t,e,o){Rt.forEach(function(l){var p=l.pluginName;if(!(!i.options[p]&&!l.initializeByDefault)){var d=new l(i,t,i.options);d.sortable=i,d.options=i.options,i[p]=d,ut(e,d.defaults)}});for(var n in i.options)if(i.options.hasOwnProperty(n)){var a=this.modifyOption(i,n,i.options[n]);typeof a!="undefined"&&(i.options[n]=a)}},getEventProperties:function(i,t){var e={};return Rt.forEach(function(o){typeof o.eventProperties=="function"&&ut(e,o.eventProperties.call(t[o.pluginName],i))}),e},modifyOption:function(i,t,e){var o;return Rt.forEach(function(n){i[n.pluginName]&&n.optionListeners&&typeof n.optionListeners[t]=="function"&&(o=n.optionListeners[t].call(i[n.pluginName],e))}),o}};function Qi(s){var i=s.sortable,t=s.rootEl,e=s.name,o=s.targetEl,n=s.cloneEl,a=s.toEl,l=s.fromEl,p=s.oldIndex,d=s.newIndex,c=s.oldDraggableIndex,u=s.newDraggableIndex,m=s.originalEvent,g=s.putSortable,b=s.extraEventProperties;if(i=i||t&&t[W],!!i){var y,v=i.options,C="on"+e.charAt(0).toUpperCase()+e.substr(1);window.CustomEvent&&!ct&&!re?y=new CustomEvent(e,{bubbles:!0,cancelable:!0}):(y=document.createEvent("Event"),y.initEvent(e,!0,!0)),y.to=a||t,y.from=l||t,y.item=o||t,y.clone=n,y.oldIndex=p,y.newIndex=d,y.oldDraggableIndex=c,y.newDraggableIndex=u,y.originalEvent=m,y.pullMode=g?g.lastPutMode:void 0;var D=nt(nt({},b),pe.getEventProperties(e,i));for(var P in D)y[P]=D[P];t&&t.dispatchEvent(y),v[C]&&v[C].call(i,y)}}var tn=["evt"],q=function(i,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=e.evt,n=qi(e,tn);pe.pluginEvent.bind(S)(i,t,nt({dragEl:f,parentEl:F,ghostEl:k,rootEl:N,nextEl:Nt,lastDownEl:Ee,cloneEl:L,cloneHidden:Tt,dragStarted:te,putSortable:U,activeSortable:S.active,originalEvent:o,oldIndex:Gt,oldDraggableIndex:se,newIndex:X,newDraggableIndex:vt,hideGhostForTarget:ii,unhideGhostForTarget:ni,cloneNowHidden:function(){Tt=!0},cloneNowShown:function(){Tt=!1},dispatchSortableEvent:function(l){K({sortable:t,name:l,originalEvent:o})}},n))};function K(s){Qi(nt({putSortable:U,cloneEl:L,targetEl:f,rootEl:N,oldIndex:Gt,oldDraggableIndex:se,newIndex:X,newDraggableIndex:vt},s))}var f,F,k,N,Nt,Ee,L,Tt,Gt,X,se,vt,ye,U,zt=!1,Ae=!1,Me=[],Mt,tt,lo,ro,Uo,zo,te,Ut,ae,le=!1,we=!1,Ce,G,po=[],bo=!1,xe=[],Le=typeof document!="undefined",ve=qo,Go=re||ct?"cssFloat":"float",en=Le&&!Wo&&!qo&&"draggable"in document.createElement("div"),ti=function(){if(Le){if(ct)return!1;var s=document.createElement("x");return s.style.cssText="pointer-events:auto",s.style.pointerEvents==="auto"}}(),ei=function(i,t){var e=T(i),o=parseInt(e.width)-parseInt(e.paddingLeft)-parseInt(e.paddingRight)-parseInt(e.borderLeftWidth)-parseInt(e.borderRightWidth),n=qt(i,0,t),a=qt(i,1,t),l=n&&T(n),p=a&&T(a),d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+_(n).width,c=p&&parseInt(p.marginLeft)+parseInt(p.marginRight)+_(a).width;if(e.display==="flex")return e.flexDirection==="column"||e.flexDirection==="column-reverse"?"vertical":"horizontal";if(e.display==="grid")return e.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(n&&l.float&&l.float!=="none"){var u=l.float==="left"?"left":"right";return a&&(p.clear==="both"||p.clear===u)?"vertical":"horizontal"}return n&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||d>=o&&e[Go]==="none"||a&&e[Go]==="none"&&d+c>o)?"vertical":"horizontal"},on=function(i,t,e){var o=e?i.left:i.top,n=e?i.right:i.bottom,a=e?i.width:i.height,l=e?t.left:t.top,p=e?t.right:t.bottom,d=e?t.width:t.height;return o===l||n===p||o+a/2===l+d/2},nn=function(i,t){var e;return Me.some(function(o){var n=o[W].options.emptyInsertThreshold;if(!(!n||wo(o))){var a=_(o),l=i>=a.left-n&&i<=a.right+n,p=t>=a.top-n&&t<=a.bottom+n;if(l&&p)return e=o}}),e},oi=function(i){function t(n,a){return function(l,p,d,c){var u=l.options.group.name&&p.options.group.name&&l.options.group.name===p.options.group.name;if(n==null&&(a||u))return!0;if(n==null||n===!1)return!1;if(a&&n==="clone")return n;if(typeof n=="function")return t(n(l,p,d,c),a)(l,p,d,c);var m=(a?l:p).options.group.name;return n===!0||typeof n=="string"&&n===m||n.join&&n.indexOf(m)>-1}}var e={},o=i.group;(!o||Se(o)!="object")&&(o={name:o}),e.name=o.name,e.checkPull=t(o.pull,!0),e.checkPut=t(o.put),e.revertClone=o.revertClone,i.group=e},ii=function(){!ti&&k&&T(k,"display","none")},ni=function(){!ti&&k&&T(k,"display","")};Le&&!Wo&&document.addEventListener("click",function(s){if(Ae)return s.preventDefault(),s.stopPropagation&&s.stopPropagation(),s.stopImmediatePropagation&&s.stopImmediatePropagation(),Ae=!1,!1},!0);var xt=function(i){if(f){i=i.touches?i.touches[0]:i;var t=nn(i.clientX,i.clientY);if(t){var e={};for(var o in i)i.hasOwnProperty(o)&&(e[o]=i[o]);e.target=e.rootEl=t,e.preventDefault=void 0,e.stopPropagation=void 0,t[W]._onDragOver(e)}}},sn=function(i){f&&f.parentNode[W]._isOutsideThisEl(i.target)};function S(s,i){if(!(s&&s.nodeType&&s.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(s));this.el=s,this.options=i=ut({},i),s[W]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(s.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ei(s,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,l){a.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:S.supportPointer!==!1&&"PointerEvent"in window&&!ie,emptyInsertThreshold:5};pe.initializePlugins(this,s,t);for(var e in t)!(e in i)&&(i[e]=t[e]);oi(i);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=i.forceFallback?!1:en,this.nativeDraggable&&(this.options.touchStartThreshold=1),i.supportPointer?A(s,"pointerdown",this._onTapStart):(A(s,"mousedown",this._onTapStart),A(s,"touchstart",this._onTapStart)),this.nativeDraggable&&(A(s,"dragover",this),A(s,"dragenter",this)),Me.push(this.el),i.store&&i.store.get&&this.sort(i.store.get(this)||[]),ut(this,$i())}S.prototype={constructor:S,_isOutsideThisEl:function(i){!this.el.contains(i)&&i!==this.el&&(Ut=null)},_getDirection:function(i,t){return typeof this.options.direction=="function"?this.options.direction.call(this,i,t,f):this.options.direction},_onTapStart:function(i){if(i.cancelable){var t=this,e=this.el,o=this.options,n=o.preventOnFilter,a=i.type,l=i.touches&&i.touches[0]||i.pointerType&&i.pointerType==="touch"&&i,p=(l||i).target,d=i.target.shadowRoot&&(i.path&&i.path[0]||i.composedPath&&i.composedPath()[0])||p,c=o.filter;if(gn(e),!f&&!(/mousedown|pointerdown/.test(a)&&i.button!==0||o.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&ie&&p&&p.tagName.toUpperCase()==="SELECT")&&(p=et(p,o.draggable,e,!1),!(p&&p.animated)&&Ee!==p)){if(Gt=J(p),se=J(p,o.draggable),typeof c=="function"){if(c.call(this,i,p,this)){K({sortable:t,rootEl:d,name:"filter",targetEl:p,toEl:e,fromEl:e}),q("filter",t,{evt:i}),n&&i.cancelable&&i.preventDefault();return}}else if(c&&(c=c.split(",").some(function(u){if(u=et(d,u.trim(),e,!1),u)return K({sortable:t,rootEl:u,name:"filter",targetEl:p,fromEl:e,toEl:e}),q("filter",t,{evt:i}),!0}),c)){n&&i.cancelable&&i.preventDefault();return}o.handle&&!et(d,o.handle,e,!1)||this._prepareDragStart(i,l,p)}}},_prepareDragStart:function(i,t,e){var o=this,n=o.el,a=o.options,l=n.ownerDocument,p;if(e&&!f&&e.parentNode===n){var d=_(e);if(N=n,f=e,F=f.parentNode,Nt=f.nextSibling,Ee=e,ye=a.group,S.dragged=f,Mt={target:f,clientX:(t||i).clientX,clientY:(t||i).clientY},Uo=Mt.clientX-d.left,zo=Mt.clientY-d.top,this._lastX=(t||i).clientX,this._lastY=(t||i).clientY,f.style["will-change"]="all",p=function(){if(q("delayEnded",o,{evt:i}),S.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!Vo&&o.nativeDraggable&&(f.draggable=!0),o._triggerDragStart(i,t),K({sortable:o,name:"choose",originalEvent:i}),Y(f,a.chosenClass,!0)},a.ignore.split(",").forEach(function(c){Xo(f,c.trim(),uo)}),A(l,"dragover",xt),A(l,"mousemove",xt),A(l,"touchmove",xt),A(l,"mouseup",o._onDrop),A(l,"touchend",o._onDrop),A(l,"touchcancel",o._onDrop),Vo&&this.nativeDraggable&&(this.options.touchStartThreshold=4,f.draggable=!0),q("delayStart",this,{evt:i}),a.delay&&(!a.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(re||ct))){if(S.eventCanceled){this._onDrop();return}A(l,"mouseup",o._disableDelayedDrag),A(l,"touchend",o._disableDelayedDrag),A(l,"touchcancel",o._disableDelayedDrag),A(l,"mousemove",o._delayedDragTouchMoveHandler),A(l,"touchmove",o._delayedDragTouchMoveHandler),a.supportPointer&&A(l,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(p,a.delay)}else p()}},_delayedDragTouchMoveHandler:function(i){var t=i.touches?i.touches[0]:i;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){f&&uo(f),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var i=this.el.ownerDocument;I(i,"mouseup",this._disableDelayedDrag),I(i,"touchend",this._disableDelayedDrag),I(i,"touchcancel",this._disableDelayedDrag),I(i,"mousemove",this._delayedDragTouchMoveHandler),I(i,"touchmove",this._delayedDragTouchMoveHandler),I(i,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(i,t){t=t||i.pointerType=="touch"&&i,!this.nativeDraggable||t?this.options.supportPointer?A(document,"pointermove",this._onTouchMove):t?A(document,"touchmove",this._onTouchMove):A(document,"mousemove",this._onTouchMove):(A(f,"dragend",this),A(N,"dragstart",this._onDragStart));try{document.selection?ke(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(i,t){if(zt=!1,N&&f){q("dragStarted",this,{evt:t}),this.nativeDraggable&&A(document,"dragover",sn);var e=this.options;!i&&Y(f,e.dragClass,!1),Y(f,e.ghostClass,!0),S.active=this,i&&this._appendGhost(),K({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(tt){this._lastX=tt.clientX,this._lastY=tt.clientY,ii();for(var i=document.elementFromPoint(tt.clientX,tt.clientY),t=i;i&&i.shadowRoot&&(i=i.shadowRoot.elementFromPoint(tt.clientX,tt.clientY),i!==t);)t=i;if(f.parentNode[W]._isOutsideThisEl(i),t)do{if(t[W]){var e=void 0;if(e=t[W]._onDragOver({clientX:tt.clientX,clientY:tt.clientY,target:i,rootEl:t}),e&&!this.options.dragoverBubble)break}i=t}while(t=Yo(t));ni()}},_onTouchMove:function(i){if(Mt){var t=this.options,e=t.fallbackTolerance,o=t.fallbackOffset,n=i.touches?i.touches[0]:i,a=k&&Kt(k,!0),l=k&&a&&a.a,p=k&&a&&a.d,d=ve&&G&&Ro(G),c=(n.clientX-Mt.clientX+o.x)/(l||1)+(d?d[0]-po[0]:0)/(l||1),u=(n.clientY-Mt.clientY+o.y)/(p||1)+(d?d[1]-po[1]:0)/(p||1);if(!S.active&&!zt){if(e&&Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))<e)return;this._onDragStart(i,!0)}if(k){a?(a.e+=c-(lo||0),a.f+=u-(ro||0)):a={a:1,b:0,c:0,d:1,e:c,f:u};var m="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");T(k,"webkitTransform",m),T(k,"mozTransform",m),T(k,"msTransform",m),T(k,"transform",m),lo=c,ro=u,tt=n}i.cancelable&&i.preventDefault()}},_appendGhost:function(){if(!k){var i=this.options.fallbackOnBody?document.body:N,t=_(f,!0,ve,!0,i),e=this.options;if(ve){for(G=i;T(G,"position")==="static"&&T(G,"transform")==="none"&&G!==document;)G=G.parentNode;G!==document.body&&G!==document.documentElement?(G===document&&(G=it()),t.top+=G.scrollTop,t.left+=G.scrollLeft):G=it(),po=Ro(G)}k=f.cloneNode(!0),Y(k,e.ghostClass,!1),Y(k,e.fallbackClass,!0),Y(k,e.dragClass,!0),T(k,"transition",""),T(k,"transform",""),T(k,"box-sizing","border-box"),T(k,"margin",0),T(k,"top",t.top),T(k,"left",t.left),T(k,"width",t.width),T(k,"height",t.height),T(k,"opacity","0.8"),T(k,"position",ve?"absolute":"fixed"),T(k,"zIndex","100000"),T(k,"pointerEvents","none"),S.ghost=k,i.appendChild(k),T(k,"transform-origin",Uo/parseInt(k.style.width)*100+"% "+zo/parseInt(k.style.height)*100+"%")}},_onDragStart:function(i,t){var e=this,o=i.dataTransfer,n=e.options;if(q("dragStart",this,{evt:i}),S.eventCanceled){this._onDrop();return}q("setupClone",this),S.eventCanceled||(L=Jo(f),L.removeAttribute("id"),L.draggable=!1,L.style["will-change"]="",this._hideClone(),Y(L,this.options.chosenClass,!1),S.clone=L),e.cloneId=ke(function(){q("clone",e),!S.eventCanceled&&(e.options.removeCloneOnHide||N.insertBefore(L,f),e._hideClone(),K({sortable:e,name:"clone"}))}),!t&&Y(f,n.dragClass,!0),t?(Ae=!0,e._loopId=setInterval(e._emulateDragOver,50)):(I(document,"mouseup",e._onDrop),I(document,"touchend",e._onDrop),I(document,"touchcancel",e._onDrop),o&&(o.effectAllowed="move",n.setData&&n.setData.call(e,o,f)),A(document,"drop",e),T(f,"transform","translateZ(0)")),zt=!0,e._dragStartId=ke(e._dragStarted.bind(e,t,i)),A(document,"selectstart",e),te=!0,ie&&T(document.body,"user-select","none")},_onDragOver:function(i){var t=this.el,e=i.target,o,n,a,l=this.options,p=l.group,d=S.active,c=ye===p,u=l.sort,m=U||d,g,b=this,y=!1;if(bo)return;function v($t,di){q($t,b,nt({evt:i,isOwner:c,axis:g?"vertical":"horizontal",revert:a,dragRect:o,targetRect:n,canSort:u,fromSortable:m,target:e,completed:D,onMove:function(Eo,ui){return Te(N,t,f,o,Eo,_(Eo),i,ui)},changed:P},di))}function C(){v("dragOverAnimationCapture"),b.captureAnimationState(),b!==m&&m.captureAnimationState()}function D($t){return v("dragOverCompleted",{insertion:$t}),$t&&(c?d._hideClone():d._showClone(b),b!==m&&(Y(f,U?U.options.ghostClass:d.options.ghostClass,!1),Y(f,l.ghostClass,!0)),U!==b&&b!==S.active?U=b:b===S.active&&U&&(U=null),m===b&&(b._ignoreWhileAnimating=e),b.animateAll(function(){v("dragOverAnimationComplete"),b._ignoreWhileAnimating=null}),b!==m&&(m.animateAll(),m._ignoreWhileAnimating=null)),(e===f&&!f.animated||e===t&&!e.animated)&&(Ut=null),!l.dragoverBubble&&!i.rootEl&&e!==document&&(f.parentNode[W]._isOutsideThisEl(i.target),!$t&&xt(i)),!l.dragoverBubble&&i.stopPropagation&&i.stopPropagation(),y=!0}function P(){X=J(f),vt=J(f,l.draggable),K({sortable:b,name:"change",toEl:t,newIndex:X,newDraggableIndex:vt,originalEvent:i})}if(i.preventDefault!==void 0&&i.cancelable&&i.preventDefault(),e=et(e,l.draggable,t,!0),v("dragOver"),S.eventCanceled)return y;if(f.contains(i.target)||e.animated&&e.animatingX&&e.animatingY||b._ignoreWhileAnimating===e)return D(!1);if(Ae=!1,d&&!l.disabled&&(c?u||(a=F!==N):U===this||(this.lastPutMode=ye.checkPull(this,d,f,i))&&p.checkPut(this,d,f,i))){if(g=this._getDirection(i,e)==="vertical",o=_(f),v("dragOverValid"),S.eventCanceled)return y;if(a)return F=N,C(),this._hideClone(),v("revert"),S.eventCanceled||(Nt?N.insertBefore(f,Nt):N.appendChild(f)),D(!0);var x=wo(t,l.draggable);if(!x||pn(i,g,this)&&!x.animated){if(x===f)return D(!1);if(x&&t===i.target&&(e=x),e&&(n=_(e)),Te(N,t,f,o,e,n,i,!!e)!==!1)return C(),x&&x.nextSibling?t.insertBefore(f,x.nextSibling):t.appendChild(f),F=t,P(),D(!0)}else if(x&&rn(i,g,this)){var V=qt(t,0,l,!0);if(V===f)return D(!1);if(e=V,n=_(e),Te(N,t,f,o,e,n,i,!1)!==!1)return C(),t.insertBefore(f,V),F=t,P(),D(!0)}else if(e.parentNode===t){n=_(e);var H=0,$,gt=f.parentNode!==t,B=!on(f.animated&&f.toRect||o,e.animated&&e.toRect||n,g),jt=g?"top":"left",mt=Ho(e,"top","top")||Ho(f,"top","top"),Yt=mt?mt.scrollTop:void 0;Ut!==e&&($=n[jt],le=!1,we=!B&&l.invertSwap||gt),H=dn(i,e,n,g,B?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,we,Ut===e);var st;if(H!==0){var Et=J(f);do Et-=H,st=F.children[Et];while(st&&(T(st,"display")==="none"||st===k))}if(H===0||st===e)return D(!1);Ut=e,ae=H;var Xt=e.nextElementSibling,bt=!1;bt=H===1;var de=Te(N,t,f,o,e,n,i,bt);if(de!==!1)return(de===1||de===-1)&&(bt=de===1),bo=!0,setTimeout(ln,30),C(),bt&&!Xt?t.appendChild(f):e.parentNode.insertBefore(f,bt?Xt:e),mt&&Zo(mt,0,Yt-mt.scrollTop),F=f.parentNode,$!==void 0&&!we&&(Ce=Math.abs($-_(e)[jt])),P(),D(!0)}if(t.contains(f))return D(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){I(document,"mousemove",this._onTouchMove),I(document,"touchmove",this._onTouchMove),I(document,"pointermove",this._onTouchMove),I(document,"dragover",xt),I(document,"mousemove",xt),I(document,"touchmove",xt)},_offUpEvents:function(){var i=this.el.ownerDocument;I(i,"mouseup",this._onDrop),I(i,"touchend",this._onDrop),I(i,"pointerup",this._onDrop),I(i,"touchcancel",this._onDrop),I(document,"selectstart",this)},_onDrop:function(i){var t=this.el,e=this.options;if(X=J(f),vt=J(f,e.draggable),q("drop",this,{evt:i}),F=f&&f.parentNode,X=J(f),vt=J(f,e.draggable),S.eventCanceled){this._nulling();return}zt=!1,we=!1,le=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ho(this.cloneId),ho(this._dragStartId),this.nativeDraggable&&(I(document,"drop",this),I(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ie&&T(document.body,"user-select",""),T(f,"transform",""),i&&(te&&(i.cancelable&&i.preventDefault(),!e.dropBubble&&i.stopPropagation()),k&&k.parentNode&&k.parentNode.removeChild(k),(N===F||U&&U.lastPutMode!=="clone")&&L&&L.parentNode&&L.parentNode.removeChild(L),f&&(this.nativeDraggable&&I(f,"dragend",this),uo(f),f.style["will-change"]="",te&&!zt&&Y(f,U?U.options.ghostClass:this.options.ghostClass,!1),Y(f,this.options.chosenClass,!1),K({sortable:this,name:"unchoose",toEl:F,newIndex:null,newDraggableIndex:null,originalEvent:i}),N!==F?(X>=0&&(K({rootEl:F,name:"add",toEl:F,fromEl:N,originalEvent:i}),K({sortable:this,name:"remove",toEl:F,originalEvent:i}),K({rootEl:F,name:"sort",toEl:F,fromEl:N,originalEvent:i}),K({sortable:this,name:"sort",toEl:F,originalEvent:i})),U&&U.save()):X!==Gt&&X>=0&&(K({sortable:this,name:"update",toEl:F,originalEvent:i}),K({sortable:this,name:"sort",toEl:F,originalEvent:i})),S.active&&((X==null||X===-1)&&(X=Gt,vt=se),K({sortable:this,name:"end",toEl:F,originalEvent:i}),this.save()))),this._nulling()},_nulling:function(){q("nulling",this),N=f=F=k=Nt=L=Ee=Tt=Mt=tt=te=X=vt=Gt=se=Ut=ae=U=ye=S.dragged=S.ghost=S.clone=S.active=null,xe.forEach(function(i){i.checked=!0}),xe.length=lo=ro=0},handleEvent:function(i){switch(i.type){case"drop":case"dragend":this._onDrop(i);break;case"dragenter":case"dragover":f&&(this._onDragOver(i),an(i));break;case"selectstart":i.preventDefault();break}},toArray:function(){for(var i=[],t,e=this.el.children,o=0,n=e.length,a=this.options;o<n;o++)t=e[o],et(t,a.draggable,this.el,!1)&&i.push(t.getAttribute(a.dataIdAttr)||cn(t));return i},sort:function(i,t){var e={},o=this.el;this.toArray().forEach(function(n,a){var l=o.children[a];et(l,this.options.draggable,o,!1)&&(e[n]=l)},this),t&&this.captureAnimationState(),i.forEach(function(n){e[n]&&(o.removeChild(e[n]),o.appendChild(e[n]))}),t&&this.animateAll()},save:function(){var i=this.options.store;i&&i.set&&i.set(this)},closest:function(i,t){return et(i,t||this.options.draggable,this.el,!1)},option:function(i,t){var e=this.options;if(t===void 0)return e[i];var o=pe.modifyOption(this,i,t);typeof o!="undefined"?e[i]=o:e[i]=t,i==="group"&&oi(e)},destroy:function(){q("destroy",this);var i=this.el;i[W]=null,I(i,"mousedown",this._onTapStart),I(i,"touchstart",this._onTapStart),I(i,"pointerdown",this._onTapStart),this.nativeDraggable&&(I(i,"dragover",this),I(i,"dragenter",this)),Array.prototype.forEach.call(i.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Me.splice(Me.indexOf(this.el),1),this.el=i=null},_hideClone:function(){if(!Tt){if(q("hideClone",this),S.eventCanceled)return;T(L,"display","none"),this.options.removeCloneOnHide&&L.parentNode&&L.parentNode.removeChild(L),Tt=!0}},_showClone:function(i){if(i.lastPutMode!=="clone"){this._hideClone();return}if(Tt){if(q("showClone",this),S.eventCanceled)return;f.parentNode==N&&!this.options.group.revertClone?N.insertBefore(L,f):Nt?N.insertBefore(L,Nt):N.appendChild(L),this.options.group.revertClone&&this.animate(f,L),T(L,"display",""),Tt=!1}}};function an(s){s.dataTransfer&&(s.dataTransfer.dropEffect="move"),s.cancelable&&s.preventDefault()}function Te(s,i,t,e,o,n,a,l){var p,d=s[W],c=d.options.onMove,u;return window.CustomEvent&&!ct&&!re?p=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(p=document.createEvent("Event"),p.initEvent("move",!0,!0)),p.to=i,p.from=s,p.dragged=t,p.draggedRect=e,p.related=o||i,p.relatedRect=n||_(i),p.willInsertAfter=l,p.originalEvent=a,s.dispatchEvent(p),c&&(u=c.call(d,p,a)),u}function uo(s){s.draggable=!1}function ln(){bo=!1}function rn(s,i,t){var e=_(qt(t.el,0,t.options,!0)),o=Qo(t.el,t.options,k),n=10;return i?s.clientX<o.left-n||s.clientY<e.top&&s.clientX<e.right:s.clientY<o.top-n||s.clientY<e.bottom&&s.clientX<e.left}function pn(s,i,t){var e=_(wo(t.el,t.options.draggable)),o=Qo(t.el,t.options,k),n=10;return i?s.clientX>o.right+n||s.clientY>e.bottom&&s.clientX>e.left:s.clientY>o.bottom+n||s.clientX>e.right&&s.clientY>e.top}function dn(s,i,t,e,o,n,a,l){var p=e?s.clientY:s.clientX,d=e?t.height:t.width,c=e?t.top:t.left,u=e?t.bottom:t.right,m=!1;if(!a){if(l&&Ce<d*o){if(!le&&(ae===1?p>c+d*n/2:p<u-d*n/2)&&(le=!0),le)m=!0;else if(ae===1?p<c+Ce:p>u-Ce)return-ae}else if(p>c+d*(1-o)/2&&p<u-d*(1-o)/2)return un(i)}return m=m||a,m&&(p<c+d*n/2||p>u-d*n/2)?p>c+d/2?1:-1:0}function un(s){return J(f)<J(s)?1:-1}function cn(s){for(var i=s.tagName+s.className+s.src+s.href+s.textContent,t=i.length,e=0;t--;)e+=i.charCodeAt(t);return e.toString(36)}function gn(s){xe.length=0;for(var i=s.getElementsByTagName("input"),t=i.length;t--;){var e=i[t];e.checked&&xe.push(e)}}function ke(s){return setTimeout(s,0)}function ho(s){return clearTimeout(s)}Le&&A(document,"touchmove",function(s){(S.active||zt)&&s.cancelable&&s.preventDefault()});S.utils={on:A,off:I,css:T,find:Xo,is:function(i,t){return!!et(i,t,i,!1)},extend:Yi,throttle:$o,closest:et,toggleClass:Y,clone:Jo,index:J,nextTick:ke,cancelNextTick:ho,detectDirection:ei,getChild:qt,expando:W};S.get=function(s){return s[W]};S.mount=function(){for(var s=arguments.length,i=new Array(s),t=0;t<s;t++)i[t]=arguments[t];i[0].constructor===Array&&(i=i[0]),i.forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(S.utils=nt(nt({},S.utils),e.utils)),pe.mount(e)})};S.create=function(s,i){return new S(s,i)};S.version=Wi;var O=[],ee,fo,yo=!1,co,go,Ne,oe;function mn(){function s(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this))}return s.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?A(document,"dragover",this._handleAutoScroll):this.options.supportPointer?A(document,"pointermove",this._handleFallbackAutoScroll):e.touches?A(document,"touchmove",this._handleFallbackAutoScroll):A(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;!this.options.dragOverBubble&&!e.rootEl&&this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?I(document,"dragover",this._handleAutoScroll):(I(document,"pointermove",this._handleFallbackAutoScroll),I(document,"touchmove",this._handleFallbackAutoScroll),I(document,"mousemove",this._handleFallbackAutoScroll)),Ko(),De(),Xi()},nulling:function(){Ne=fo=ee=yo=oe=co=go=null,O.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var o=this,n=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,l=document.elementFromPoint(n,a);if(Ne=t,e||this.options.forceAutoScrollFallback||re||ct||ie){mo(t,this.options,l,e);var p=St(l,!0);yo&&(!oe||n!==co||a!==go)&&(oe&&Ko(),oe=setInterval(function(){var d=St(document.elementFromPoint(n,a),!0);d!==p&&(p=d,De()),mo(t,o.options,d,e)},10),co=n,go=a)}else{if(!this.options.bubbleScroll||St(l,!0)===it()){De();return}mo(t,this.options,St(l,!1),!1)}}},ut(s,{pluginName:"scroll",initializeByDefault:!0})}function De(){O.forEach(function(s){clearInterval(s.pid)}),O=[]}function Ko(){clearInterval(oe)}var mo=$o(function(s,i,t,e){if(i.scroll){var o=(s.touches?s.touches[0]:s).clientX,n=(s.touches?s.touches[0]:s).clientY,a=i.scrollSensitivity,l=i.scrollSpeed,p=it(),d=!1,c;fo!==t&&(fo=t,De(),ee=i.scroll,c=i.scrollFn,ee===!0&&(ee=St(t,!0)));var u=0,m=ee;do{var g=m,b=_(g),y=b.top,v=b.bottom,C=b.left,D=b.right,P=b.width,x=b.height,V=void 0,H=void 0,$=g.scrollWidth,gt=g.scrollHeight,B=T(g),jt=g.scrollLeft,mt=g.scrollTop;g===p?(V=P<$&&(B.overflowX==="auto"||B.overflowX==="scroll"||B.overflowX==="visible"),H=x<gt&&(B.overflowY==="auto"||B.overflowY==="scroll"||B.overflowY==="visible")):(V=P<$&&(B.overflowX==="auto"||B.overflowX==="scroll"),H=x<gt&&(B.overflowY==="auto"||B.overflowY==="scroll"));var Yt=V&&(Math.abs(D-o)<=a&&jt+P<$)-(Math.abs(C-o)<=a&&!!jt),st=H&&(Math.abs(v-n)<=a&&mt+x<gt)-(Math.abs(y-n)<=a&&!!mt);if(!O[u])for(var Et=0;Et<=u;Et++)O[Et]||(O[Et]={});(O[u].vx!=Yt||O[u].vy!=st||O[u].el!==g)&&(O[u].el=g,O[u].vx=Yt,O[u].vy=st,clearInterval(O[u].pid),(Yt!=0||st!=0)&&(d=!0,O[u].pid=setInterval(function(){e&&this.layer===0&&S.active._onTouchMove(Ne);var Xt=O[this.layer].vy?O[this.layer].vy*l:0,bt=O[this.layer].vx?O[this.layer].vx*l:0;typeof c=="function"&&c.call(S.dragged.parentNode[W],bt,Xt,s,Ne,O[this.layer].el)!=="continue"||Zo(O[this.layer].el,bt,Xt)}.bind({layer:u}),24))),u++}while(i.bubbleScroll&&m!==p&&(m=St(m,!1)));yo=d}},30),si=function(i){var t=i.originalEvent,e=i.putSortable,o=i.dragEl,n=i.activeSortable,a=i.dispatchSortableEvent,l=i.hideGhostForTarget,p=i.unhideGhostForTarget;if(t){var d=e||n;l();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(c.clientX,c.clientY);p(),d&&!d.el.contains(u)&&(a("spill"),this.onSpill({dragEl:o,putSortable:e}))}};function vo(){}vo.prototype={startIndex:null,dragStart:function(i){var t=i.oldDraggableIndex;this.startIndex=t},onSpill:function(i){var t=i.dragEl,e=i.putSortable;this.sortable.captureAnimationState(),e&&e.captureAnimationState();var o=qt(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(t,o):this.sortable.el.appendChild(t),this.sortable.animateAll(),e&&e.animateAll()},drop:si};ut(vo,{pluginName:"revertOnSpill"});function To(){}To.prototype={onSpill:function(i){var t=i.dragEl,e=i.putSortable,o=e||this.sortable;o.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),o.animateAll()},drop:si};ut(To,{pluginName:"removeOnSpill"});S.mount(new mn);S.mount(To,vo);var Pe=S;var ai=require("obsidian"),Lt=class extends ai.AbstractInputSuggest{constructor(t,e,o){super(t,o);this.plugin=e,this.inputEl=o}getSuggestions(t){let e=this.plugin.settings.toolbars,o=[],n=t.toLowerCase();return e.forEach(a=>{a.name!==""&&a.name.toLowerCase().contains(n)&&o.push(a)}),o}renderSuggestion(t,e){e.setText(t.name)}selectSuggestion(t){this.inputEl.value=t.name,this.inputEl.trigger("input"),this.inputEl.blur(),this.close()}};var ot=class extends w.Modal{constructor(t,e,o=null,n){super(t);this.itemListOpen=!0;this.itemListIdCounter=0;this.parent=o,this.plugin=e,this.toolbar=n}onOpen(){this.display()}onClose(){let{contentEl:t}=this;t.empty(),this.parent&&this.parent.display()}onEscapeKey(){let t=activeDocument.activeElement;if(t instanceof HTMLElement&&t.closest(".note-toolbar-setting-item")){let o=t.closest(".note-toolbar-setting-items-container-row"),n=this.modalEl.querySelector(".note-toolbar-setting-modal");n&&this.collapseItemForms(n,o,!0);return}this.close()}display(t){h("\u{1F7E1} REDRAWING MODAL \u{1F7E1}"),this.modalEl.addClass("note-toolbar-setting-modal-container"),this.contentEl.empty();let e=createDiv();if(e.className="vertical-tab-content note-toolbar-setting-modal",this.displayNameSetting(e),this.displayItemList(e),this.displayPositionSetting(e),this.displayStyleSetting(e),this.displayUsageSetting(e),this.displayDeleteButton(e),ge(this.plugin,e,!0),this.contentEl.appendChild(e),this.plugin.registerDomEvent(this.modalEl,"click",o=>{let n=o.target.closest(".note-toolbar-setting-items-container-row");this.collapseItemForms(e,n)}),this.plugin.registerDomEvent(e,"focusin",o=>{let n=o.target.closest(".note-toolbar-setting-items-container-row");this.collapseItemForms(e,n)}),t){let o=this.containerEl.querySelector(t);o==null||o.focus()}this.rememberLastPosition(this.contentEl.children[0]),me(this.plugin)}displayNameSetting(t){let e=createDiv();new w.Setting(e).setName(r("setting.name.name")).setDesc(r("setting.name.description")).addText(o=>o.setPlaceholder("Name").setValue(this.toolbar.name).onChange((0,w.debounce)(async n=>{let a=this.plugin.settingsManager.getToolbarByName(n);a&&a!==this.toolbar?this.setFieldError(o.inputEl,r("setting.name.error-toolbar-already-exists")):(this.removeFieldError(o.inputEl),this.toolbar.name=n,this.toolbar.updated=new Date().toISOString(),this.plugin.settings.toolbars.sort((l,p)=>l.name.localeCompare(p.name)),await this.plugin.settingsManager.save())},750))),t.append(e)}displayItemList(t){let e=createDiv();e.addClass("note-toolbar-setting-items-container"),e.setAttribute("data-active",this.itemListOpen.toString());let o=new w.Setting(e).setName(r("setting.items.name")).setClass("note-toolbar-setting-items-header").setHeading().setDesc(j(r("setting.items.description"),"Creating-toolbar-items"));this.toolbar.items.length>0&&o.addExtraButton(c=>{c.setIcon("right-triangle").setTooltip(r("setting.items.button-collapse-items-tooltip")).onClick(async()=>{let u=t.querySelector(".note-toolbar-setting-items-container");if(u){this.itemListOpen=!this.itemListOpen,u.setAttribute("data-active",this.itemListOpen.toString());let m=u.querySelector(".setting-item-heading .setting-item-name");this.itemListOpen?m==null||m.setText(r("setting.items.name")):m==null||m.setText(r("setting.items.name-with-count",{count:this.toolbar.items.length})),c.setTooltip(this.itemListOpen?r("setting.items.button-collapse-items-tooltip"):r("setting.items.button-expand-items-tooltip"))}}).extraSettingsEl.tabIndex=0,this.plugin.registerDomEvent(c.extraSettingsEl,"keydown",u=>{switch(u.key){case"Enter":case" ":u.preventDefault(),c.extraSettingsEl.click()}})});let n=createDiv();n.addClass("note-toolbar-setting-items-list-container");let a=createDiv();if(a.addClass("note-toolbar-sortablejs-list"),this.toolbar.items.length===0){let c=this.containerEl.createEl("div",{text:yt(r("setting.items.label-empty-no-items"))});c.className="note-toolbar-setting-empty-message",a.append(c)}else this.toolbar.items.forEach((c,u)=>{let m=createDiv();m.setAttribute("data-item-uuid",c.uuid),m.addClass("note-toolbar-setting-items-container-row");let g=this.generateItemPreview(c,this.itemListIdCounter.toString());m.appendChild(g);let b=this.generateItemForm(c);b.setAttribute("data-active","false"),m.appendChild(b),this.itemListIdCounter++,a.appendChild(m)});var l=Pe.create(a,{chosenClass:"sortable-chosen",ghostClass:"sortable-ghost",handle:".sortable-handle",onChange:c=>navigator.vibrate(50),onChoose:c=>navigator.vibrate(50),onSort:async c=>{h("sortable: index: ",c.oldIndex," -> ",c.newIndex),c.oldIndex!==void 0&&c.newIndex!==void 0&&(ce(this.toolbar.items,c.oldIndex,c.newIndex),await this.plugin.settingsManager.save())}});n.appendChild(a);let p=createDiv();p.addClasses(["setting-item","note-toolbar-setting-items-button-container"]);let d=createSpan();new w.Setting(d).addExtraButton(c=>{let u=(0,w.getIcon)("note-toolbar-separator");c.extraSettingsEl.empty(),u&&c.extraSettingsEl.appendChild(u),c.setTooltip(r("setting.items.button-add-separator-tooltip")).onClick(async()=>this.addItemHandler(a,"separator"))}).addExtraButton(c=>{c.setIcon("lucide-corner-down-left").setTooltip(r("setting.items.button-add-break-tooltip")).onClick(async()=>this.addItemHandler(a,"break"))}),p.appendChild(d),new w.Setting(p).addButton(c=>{c.setTooltip(r("setting.items.button-new-item-tooltip")).setButtonText(r("setting.items.button-new-item")).setCta().onClick(async()=>this.addItemHandler(a,"command"))}),n.appendChild(p),e.appendChild(n),t.appendChild(e)}collapseItemForms(t,e,o=!1){t.querySelectorAll(".note-toolbar-sortablejs-list > div").forEach(a=>{let l=a.querySelector(".note-toolbar-setting-item-preview-container");if(o||a!==e){let p=a.querySelector(".note-toolbar-setting-item");l==null||l.setAttribute("data-active","true"),p==null||p.setAttribute("data-active","false")}o&&a===e&&l.querySelector(".note-toolbar-setting-item-preview").focus()})}toggleItemView(t,e,o){var d;let n=t.nextElementSibling,a=(d=t.querySelector(".note-toolbar-setting-item-preview"))==null?void 0:d.getAttribute("data-item-type");h("toggleItemView",t,n,a,o);let l,p;if(e)switch(e){case"form":l="false",p="true";break;case"preview":l="true",p="false";break}else l=(t==null?void 0:t.getAttribute("data-active"))==="true"?"false":"true",p=(n==null?void 0:n.getAttribute("data-active"))==="true"?"false":"true";if(n==null||n.setAttribute("data-active",p),t==null||t.setAttribute("data-active",l),p==="true"){let c="";if(a)switch(a){case"break":case"separator":o="delete";break;case"group":o="link";break;default:o=o||"icon";break}switch(o){case"delete":c=".note-toolbar-setting-item-delete button";break;case"icon":c="#note-toolbar-item-field-icon .clickable-icon";break;case"label":c="#note-toolbar-item-field-label input";break;case"link":c=".note-toolbar-setting-item-field-link input";break;case"tooltip":c="#note-toolbar-item-field-tooltip input";break}let u=n==null?void 0:n.querySelector(c);u&&(u.focus(),this.scrollToPosition(c,"note-toolbar-setting-item"))}}generateItemPreview(t,e){let o=createDiv();o.className="note-toolbar-setting-item-preview-container";let n=createDiv();n.className="note-toolbar-setting-item-preview",n.setAttribute("role","button"),n.tabIndex=0,o.appendChild(n),this.renderPreview(t,o);let a=createDiv();return a.addClass("note-toolbar-setting-item-controls"),new w.Setting(a).addExtraButton(l=>{l.setIcon("grip-horizontal").setTooltip(r("setting.button-drag-tooltip")).extraSettingsEl.addClass("sortable-handle"),l.extraSettingsEl.setAttribute("data-item-uuid",t.uuid),l.extraSettingsEl.tabIndex=0,this.plugin.registerDomEvent(l.extraSettingsEl,"keydown",p=>{this.listMoveHandlerById(p,this.toolbar.items,t.uuid)})}),o.append(a),this.plugin.registerDomEvent(n,"keydown",l=>{switch(l.key){case"d":if(w.Platform.isWin||w.Platform.isLinux?l==null?void 0:l.ctrlKey:l==null?void 0:l.metaKey){let d=this.plugin.settingsManager.duplicateToolbarItem(this.toolbar,t,!0);this.display(`.note-toolbar-sortablejs-list > div[${"data-item-uuid"}="${d}"] > .note-toolbar-setting-item-preview-container > .note-toolbar-setting-item-preview`)}break;case"Enter":case" ":l.preventDefault(),this.toggleItemView(o,"form")}}),this.plugin.registerDomEvent(n,"click",l=>{let p=l.target,d=l.currentTarget;h("clicked on: ",d,p);let c="label";d.querySelector(".note-toolbar-setting-tbar-preview")?c="link":p instanceof SVGElement||p!=null&&p.closest("svg")||p.querySelector(":scope > svg")?c="icon":p instanceof HTMLSpanElement&&p.classList.contains("note-toolbar-setting-item-preview-tooltip")&&(c="tooltip"),this.toggleItemView(o,"form",c)}),o}generateItemForm(t){var c;let e=createDiv();e.className="note-toolbar-setting-item";let o=createDiv();o.className="note-toolbar-setting-item-top-container";let n=createDiv();if(n.className="note-toolbar-setting-item-fields",!["break","separator"].includes(t.linkAttr.type)){let u=new w.Setting(n).setClass("note-toolbar-setting-item-icon").addExtraButton(x=>{x.setIcon(t.icon?t.icon:"lucide-plus-square").setTooltip(r("setting.item.button-icon-tooltip")).onClick(async()=>{let V=this.getItemRowEl(t.uuid);new wt(this.plugin,t,V).open()}),x.extraSettingsEl.setAttribute("data-note-toolbar-no-icon",t.icon?"false":"true"),x.extraSettingsEl.setAttribute("tabindex","0"),this.plugin.registerDomEvent(x.extraSettingsEl,"keydown",V=>{switch(V.key){case"Enter":case" ":V.preventDefault();let H=this.getItemRowEl(t.uuid);new wt(this.plugin,t,H).open()}})});u.settingEl.id="note-toolbar-item-field-icon";let m=new w.Setting(n).setClass("note-toolbar-setting-item-field").addText(x=>x.setPlaceholder(r("setting.item.option-label-placeholder")).setValue(t.label).onChange((0,w.debounce)(async V=>{t.label=V,this.toolbar.updated=new Date().toISOString(),await this.plugin.settingsManager.save(),this.renderPreview(t)},750)));m.settingEl.id="note-toolbar-item-field-label";let g=new w.Setting(n).setClass("note-toolbar-setting-item-field").addText(x=>x.setPlaceholder(r("setting.item.option-tooltip-placeholder")).setValue(t.tooltip).onChange((0,w.debounce)(async V=>{t.tooltip=V,this.toolbar.updated=new Date().toISOString(),await this.plugin.settingsManager.save(),this.renderPreview(t)},750)));g.settingEl.id="note-toolbar-item-field-tooltip";let b=createDiv();b.className="note-toolbar-setting-item-link-container";let y=createDiv(),v=new w.Setting(y).addDropdown(x=>x.addOptions(Ao).setValue(t.linkAttr.type).onChange(async V=>{var gt;let H=this.getItemRowEl(t.uuid),$=H==null?void 0:H.querySelector(".note-toolbar-setting-item-link-field");if($){t.linkAttr.type=V,$.empty(),t.link="",this.getLinkSettingForType(t.linkAttr.type,$,t),await this.plugin.settingsManager.save(),this.renderPreview(t);let B=t.linkAttr.type==="group";u.setDisabled(B),h(u.controlEl),(gt=u.controlEl.firstChild)==null||gt.setAttribute("tabindex",B?"-1":"0"),m.setDisabled(B),g.setDisabled(B)}})),C=createDiv();C.className="note-toolbar-setting-item-link-field",this.getLinkSettingForType(t.linkAttr.type,C,t),b.append(y),b.append(C);let D=createDiv();D.className="note-toolbar-setting-item-fields",D.appendChild(n),o.appendChild(D),o.appendChild(b),e.appendChild(o);let P=t.linkAttr.type==="group";u.setDisabled(P),(c=u.controlEl.firstChild)==null||c.setAttribute("tabindex",P?"-1":"0"),m.setDisabled(P),g.setDisabled(P)}let a=createDiv();if(a.className="note-toolbar-setting-item-controls",this.getDeleteButton(a,t),new w.Setting(a).setClass("note-toolbar-setting-item-visibility-and-controls").addButton(u=>{u.setIcon("copy-plus").setTooltip(r("setting.item.button-duplicate-tooltip")).onClick(()=>{let m=this.plugin.settingsManager.duplicateToolbarItem(this.toolbar,t,!0);this.display(`.note-toolbar-sortablejs-list > div[${"data-item-uuid"}="${m}"] > .note-toolbar-setting-item-preview-container > .note-toolbar-setting-item-preview`)})}),["break","separator"].includes(t.linkAttr.type)){let u=t.linkAttr.type,m=createSpan();m.setText(u.charAt(0).toUpperCase()+u.slice(1)),a.append(m)}let l=createDiv();l.className="note-toolbar-setting-item-visibility-container";let p=new w.Setting(l).setClass("note-toolbar-setting-item-visibility").addButton(u=>{let[m,g]=this.getPlatformStateLabel(t.visibility.desktop,r("setting.item.option-visibility-platform-desktop"));(0,w.setIcon)(u.buttonEl,"monitor"),this.updateItemVisButton(u,m,g),u.setTooltip(g).onClick(async()=>{var b,y;if((y=(b=t.visibility).desktop)!=null||(b.desktop={allViews:{components:[]}}),["break","group","separator"].includes(t.linkAttr.type)){let v=t.visibility.desktop,C={icon:v&&v.allViews?v.allViews.components.includes("icon"):!1,label:v&&v.allViews?v.allViews.components.includes("label"):!1};C.icon&&C.label?(Dt(v,"icon"),Dt(v,"label"),C.icon=!1,C.label=!1):(kt(v,"icon"),kt(v,"label"),C.icon=!0,C.label=!0);let[D,P]=this.getPlatformStateLabel(v,r("setting.item.option-visibility-platform-desktop"));this.updateItemVisButton(u,D,P),this.toolbar.updated=new Date().toISOString(),await this.plugin.settingsManager.save()}else this.getItemVisibilityMenu(t.visibility.desktop,r("setting.item.option-visibility-platform-desktop"),u).showAtPosition(io(u.buttonEl))})}).addButton(u=>{let[m,g]=this.getPlatformStateLabel(t.visibility.mobile,r("setting.item.option-visibility-platform-mobile"));(0,w.setIcon)(u.buttonEl,"tablet-smartphone"),this.updateItemVisButton(u,m,g),u.setTooltip(g).onClick(async()=>{var b,y;if((y=(b=t.visibility).mobile)!=null||(b.mobile={allViews:{components:[]}}),["break","group","separator"].includes(t.linkAttr.type)){let v=t.visibility.mobile,C={icon:v&&v.allViews?v.allViews.components.includes("icon"):!1,label:v&&v.allViews?v.allViews.components.includes("label"):!1};C.icon&&C.label?(Dt(v,"icon"),Dt(v,"label"),C.icon=!1,C.label=!1):(kt(v,"icon"),kt(v,"label"),C.icon=!0,C.label=!0);let[D,P]=this.getPlatformStateLabel(v,r("setting.item.option-visibility-platform-mobile"));this.updateItemVisButton(u,D,P),this.toolbar.updated=new Date().toISOString(),await this.plugin.settingsManager.save()}else this.getItemVisibilityMenu(t.visibility.mobile,r("setting.item.option-visibility-platform-mobile"),u).showAtPosition(io(u.buttonEl))})}).addExtraButton(u=>{u.setIcon("grip-horizontal").setTooltip(r("setting.button-drag-tooltip")).extraSettingsEl.addClass("sortable-handle"),u.extraSettingsEl.setAttribute("data-item-uuid",t.uuid),u.extraSettingsEl.tabIndex=0,this.plugin.registerDomEvent(u.extraSettingsEl,"keydown",m=>{this.listMoveHandlerById(m,this.toolbar.items,t.uuid)})}),d=createDiv();return d.className="note-toolbar-setting-item-visibility-and-controls",d.setAttribute("data-item-type",t.linkAttr.type),d.appendChild(a),d.appendChild(l),e.appendChild(d),e}updateItemVisButton(t,e,o){let a=Array.from(t.buttonEl.childNodes).find(l=>l.nodeType===Node.TEXT_NODE);e?a?a.textContent=e:t.buttonEl.appendChild(document.createTextNode(e)):a&&t.buttonEl.removeChild(a),t.setTooltip(o)}getDeleteButton(t,e){new w.Setting(t).setClass("note-toolbar-setting-item-delete").addButton(o=>{o.setIcon("minus-circle").setTooltip(r("setting.button-delete-tooltip")).onClick(async()=>{this.listMoveHandlerById(null,this.toolbar.items,e.uuid,"delete")}),o.buttonEl.setAttribute("data-item-uuid",e.uuid)})}getLinkSetting(t,e,o,n,a){let l;switch(a&&(l=createDiv(),l.addClass("note-toolbar-setting-field-help"),l.append(a)),t){case"command":new w.Setting(e).setClass("note-toolbar-setting-item-field-link").addSearch(u=>{new he(this.app,u.inputEl),u.setPlaceholder(r("setting.item.option-command-placeholder")).setValue(n).onChange((0,w.debounce)(async m=>{var g,b;o.link=m,o.linkAttr.type="command",o.linkAttr.commandId=(b=(g=u.inputEl)==null?void 0:g.getAttribute("data-command-id"))!=null?b:"",o.linkAttr.hasVars=!1,await this.plugin.settingsManager.save()},250))});break;case"file":new w.Setting(e).setClass("note-toolbar-setting-item-field-link").addSearch(u=>{new fe(this.app,u.inputEl),u.setPlaceholder(r("setting.item.option-file-placeholder")).setValue(n).onChange((0,w.debounce)(async m=>{o.linkAttr.type="file";let g=this.app.vault.getAbstractFileByPath(m);!(g instanceof w.TFile)&&!(g instanceof w.TFolder)?this.setFieldError(u.inputEl.parentElement,r("setting.item.option-file-error-does-not-exist")):(o.link=(0,w.normalizePath)(m),o.linkAttr.commandId="",o.linkAttr.hasVars=!1,this.removeFieldError(u.inputEl.parentElement),await this.plugin.settingsManager.save())},750))});break;case"group":let p=new w.Setting(e).setClass("note-toolbar-setting-item-field-link").addSearch(u=>{new Lt(this.app,this.plugin,u.inputEl),u.setPlaceholder(r("setting.item.option-item-group-placeholder")).setValue(this.plugin.settingsManager.getToolbarName(o.link)).onChange((0,w.debounce)(async m=>{let g=this.plugin.settingsManager.getToolbarByName(m);g?(this.removeFieldError(u.inputEl.parentElement),o.link=g.uuid,o.linkAttr.commandId="",o.linkAttr.hasVars=!1,await this.plugin.settingsManager.save(),this.renderPreview(o)):this.setFieldError(u.inputEl.parentElement,r("setting.item.option-item-group-error-does-not-exist"));let b=g?At(g,void 0,!0):j(r("setting.item.option-item-group-help"),"Creating-toolbar-items");this.setFieldHelp(p.controlEl,b)},250))});l&&p.controlEl.insertAdjacentElement("beforeend",l);break;case"menu":let d=new w.Setting(e).setClass("note-toolbar-setting-item-field-link").addSearch(u=>{new Lt(this.app,this.plugin,u.inputEl),u.setPlaceholder(r("setting.item.option-item-menu-placeholder")).setValue(this.plugin.settingsManager.getToolbarName(o.link)).onChange((0,w.debounce)(async m=>{let g=this.plugin.settingsManager.getToolbarByName(m);g?(this.removeFieldError(u.inputEl.parentElement),o.link=g.uuid,o.linkAttr.commandId="",o.linkAttr.hasVars=!1,await this.plugin.settingsManager.save(),this.renderPreview(o)):this.setFieldError(u.inputEl.parentElement,r("setting.item.option-item-menu-error-does-not-exist"));let b=g?At(g,void 0,!0):j(r("setting.item.option-item-menu-help"),"Creating-toolbar-items");this.setFieldHelp(d.controlEl,b)},250))});l&&d.controlEl.insertAdjacentElement("beforeend",l);break;case"uri":let c=new w.Setting(e).setClass("note-toolbar-setting-item-field-link").addText(u=>u.setPlaceholder(r("setting.item.option-uri-placehoder")).setValue(n).onChange((0,w.debounce)(async m=>{o.link=m,o.linkAttr.type="uri",o.linkAttr.hasVars=R(m),o.linkAttr.commandId="",this.toolbar.updated=new Date().toISOString(),await this.plugin.settingsManager.save()},750)));l&&c.controlEl.insertAdjacentElement("beforeend",l);break}}getLinkSettingForType(t,e,o){switch(t){case"command":this.getLinkSetting("command",e,o,o.link);break;case"file":this.getLinkSetting("file",e,o,o.link);break;case"group":case"menu":let n=this.plugin.settingsManager.getToolbarById(o.link),a=document.createDocumentFragment();n?a.append(At(n,void 0,!0)):a.append(j(t==="group"?r("setting.item.option-item-group-help"):r("setting.item.option-item-menu-help"),"Creating-toolbar-items")),this.getLinkSetting(t,e,o,o.link,a);break;case"uri":this.getLinkSetting("uri",e,o,o.link,j(r("setting.item.option-uri-help"),"Variables"));break}}displayPositionSetting(t){var e,o;new w.Setting(t).setName(r("setting.position.name")).setDesc(j(r("setting.position.description"),"Positioning-toolbars")).setHeading(),new w.Setting(t).setName(r("setting.option-platform-desktop")).addDropdown(n=>{var a,l,p;return n.addOptions(Xe.desktop.reduce((d,c)=>({...d,...c}),{})).setValue((p=(l=(a=this.toolbar.position.desktop)==null?void 0:a.allViews)==null?void 0:l.position)!=null?p:"props").onChange(async d=>{this.toolbar.position.desktop={allViews:{position:d}},this.toolbar.updated=new Date().toISOString(),await this.plugin.settingsManager.save(),this.display()})}),new w.Setting(t).setName(r("setting.option-platform-mobile")).setDesc(((o=(e=this.toolbar.position.mobile)==null?void 0:e.allViews)==null?void 0:o.position)==="hidden"?j(r("setting.position.option-mobile-help"),"Navigation-bar"):"").addDropdown(n=>{var a,l,p;return n.addOptions(Xe.mobile.reduce((d,c)=>({...d,...c}),{})).setValue((p=(l=(a=this.toolbar.position.mobile)==null?void 0:a.allViews)==null?void 0:l.position)!=null?p:"props").onChange(async d=>{this.toolbar.position.mobile={allViews:{position:d}},this.toolbar.position.tablet={allViews:{position:d}},this.toolbar.updated=new Date().toISOString(),await this.plugin.settingsManager.save(),this.display()})})}displayStyleSetting(t){new w.Setting(t).setName(r("setting.styles.name")).setDesc(j(r("setting.styles.description"),"Styling-toolbars")).setHeading();let e=createDiv();if(e.className="note-toolbar-setting-item-style",this.toolbar.defaultStyles.length==0){let l=this.containerEl.createEl("div",{text:yt(r("setting.styles.option-default-empty"))});l.className="note-toolbar-setting-empty-message",e.append(l)}else this.toolbar.defaultStyles.forEach((l,p)=>{let d=this.getValueForKey(Ze,l);new w.Setting(e).setName(this.getValueForKey($e,l)).setTooltip((d?d+" ":"")+r("setting.styles.style-tooltip-use-class",{class:l})).addExtraButton(c=>{c.setIcon("cross").setTooltip(r("setting.styles.style-remove-tooltip")).onClick(async()=>this.listMoveHandler(null,this.toolbar.defaultStyles,p,"delete")),c.extraSettingsEl.setAttribute("tabindex","0"),this.plugin.registerDomEvent(c.extraSettingsEl,"keydown",u=>this.listMoveHandler(u,this.toolbar.defaultStyles,p,"delete"))})});new w.Setting(e).addDropdown(l=>l.addOptions($e.filter(p=>!this.toolbar.defaultStyles.includes(Object.keys(p)[0])).reduce((p,d)=>({...p,...d}),{})).setValue("").onChange(async p=>{this.toolbar.defaultStyles.includes(p)?this.toolbar.defaultStyles=this.toolbar.defaultStyles.filter(d=>d!==p):this.toolbar.defaultStyles.push(p),await this.plugin.settingsManager.save(),this.display()}));let o=document.createDocumentFragment();o.append(r("setting.styles.option-default-description")),o.append(this.getStyleDisclaimersFr(Ze,this.toolbar.defaultStyles)),new w.Setting(t).setName(r("setting.styles.option-default-name")).setDesc(o).setClass("note-toolbar-setting-item-styles").settingEl.append(e);let n=createDiv();if(n.className="note-toolbar-setting-item-style",this.toolbar.mobileStyles.length==0){let l=this.containerEl.createEl("div",{text:yt(r("setting.styles.option-mobile-empty"))});l.className="note-toolbar-setting-empty-message",n.append(l)}else this.toolbar.mobileStyles.forEach((l,p)=>{let d=this.getValueForKey(Qe,l);new w.Setting(n).setName(this.getValueForKey(Je,l)).setTooltip((d?d+" ":"")+"Use in Callout or CSS: "+l).addExtraButton(c=>{c.setIcon("cross").setTooltip("Remove").onClick(async()=>this.listMoveHandler(null,this.toolbar.mobileStyles,p,"delete")),c.extraSettingsEl.setAttribute("tabindex","0"),this.plugin.registerDomEvent(c.extraSettingsEl,"keydown",u=>this.listMoveHandler(u,this.toolbar.mobileStyles,p,"delete"))})});new w.Setting(n).addDropdown(l=>l.addOptions(Je.filter(p=>!this.toolbar.mobileStyles.includes(Object.keys(p)[0])).reduce((p,d)=>({...p,...d}),{})).setValue(this.toolbar.mobileStyles.join(", ")||"").onChange(async p=>{this.toolbar.mobileStyles.includes(p)?this.toolbar.mobileStyles=this.toolbar.mobileStyles.filter(d=>d!==p):this.toolbar.mobileStyles.push(p),await this.plugin.settingsManager.save(),this.display()}));let a=document.createDocumentFragment();a.append(r("setting.styles.option-mobile-description")),a.append(this.getStyleDisclaimersFr(Qe,this.toolbar.mobileStyles)),new w.Setting(t).setName(r("setting.styles.option-mobile-name")).setDesc(a).setClass("note-toolbar-setting-item-styles").settingEl.append(n),new w.Setting(t).setDesc(j(r("setting.styles.help"),"Style-Settings-plugin-support"))}displayUsageSetting(t){let e=document.createDocumentFragment(),o=e.createEl("a",{href:"#",text:r("setting.usage.description-search")}),[n,a]=this.getToolbarSettingsUsage(this.toolbar.uuid);e.append(r("setting.usage.description",{mappingCount:n,itemCount:a}),e.createEl("br"),o),this.plugin.registerDomEvent(o,"click",p=>{this.close(),this.app.setting.close(),window.open(this.getToolbarPropSearchUri(this.toolbar.name))});let l=new w.Setting(t).setName(r("setting.usage.name")).setDesc(e).setHeading()}displayDeleteButton(t){new w.Setting(t).setName(r("setting.delete-toolbar.name")).setHeading().setDesc(r("setting.delete-toolbar.description")).setClass("note-toolbar-setting-top-spacing").setClass("note-toolbar-setting-bottom-spacing").addButton(e=>{e.setClass("mod-warning").setTooltip(r("setting.delete-toolbar.button-delete-tooltip")).setButtonText(r("setting.delete-toolbar.button-delete")).setCta().onClick(()=>{new be(this).open()})})}async addItemHandler(t,e){this.toolbar.items.length===0&&t.empty();let o={uuid:Q(),label:"",icon:"",link:"",linkAttr:{commandId:"",hasVars:!1,type:e},tooltip:"",visibility:{desktop:{allViews:{components:["icon","label"]}},mobile:{allViews:{components:["icon","label"]}},tablet:{allViews:{components:["icon","label"]}}}};this.toolbar.items.push(o),this.toolbar.updated=new Date().toISOString(),await this.plugin.settingsManager.save();let n=createDiv();n.setAttribute("data-item-uuid",o.uuid),n.addClass("note-toolbar-setting-items-container-row");let a=this.generateItemPreview(o,this.itemListIdCounter.toString());a.setAttribute("data-active","false"),n.appendChild(a);let l=this.generateItemForm(o);l.setAttribute("data-active","true"),n.appendChild(l),this.itemListIdCounter++,t.appendChild(n);let p=l==null?void 0:l.querySelector(".note-toolbar-setting-item-icon .setting-item-control .clickable-icon");p&&(p.focus(),this.scrollToPosition(".note-toolbar-setting-item-icon .setting-item-control .clickable-icon","note-toolbar-setting-item"))}async listMoveHandler(t,e,o,n){if(t)switch(t.key){case"ArrowUp":t.preventDefault(),n="up";break;case"ArrowDown":t.preventDefault(),n="down";break;case"Delete":case"Backspace":t.preventDefault(),n="delete";break;case"Enter":case" ":t.preventDefault();break;default:return}switch(n){case"up":Vt(e,o,o-1),this.toolbar.updated=new Date().toISOString();break;case"down":Vt(e,o,o+1),this.toolbar.updated=new Date().toISOString();break;case"delete":e.splice(o,1),this.toolbar.updated=new Date().toISOString();break}await this.plugin.settingsManager.save(),this.display()}async listMoveHandlerById(t,e,o,n){let a=this.getIndexByUuid(o);h("listMoveHandlerById: moving index:",a),await this.listMoveHandler(t,e,a,n)}rememberLastPosition(t){h("rememberLastPosition:",t),t.scrollTo({top:this.lastScrollPosition,behavior:"auto"}),this.plugin.registerDomEvent(t,"scroll",e=>{this.lastScrollPosition=t.scrollTop})}scrollToPosition(t,e){let o=this.contentEl.querySelector(t);o==null||o.focus(),setTimeout(()=>{let n=e?o.closest(e):void 0;n==null||n.scrollIntoView(!0)},w.Platform.isMobile?100:0)}getToolbarPropSearchUri(t){let e="obsidian://search?vault="+this.app.vault.getName()+"&query=["+this.plugin.settings.toolbarProp+": "+t+"]";return encodeURI(e)}getToolbarSettingsUsage(t){let e=this.plugin.settings.folderMappings.filter(n=>n.toolbar===t).length,o=this.plugin.settings.toolbars.reduce((n,a)=>n+a.items.filter(l=>l.link===t&&l.linkAttr.type==="menu").length,0);return[e,o]}getItemVisibilityMenu(t,e,o){let n={icon:t&&t.allViews?t.allViews.components.includes("icon"):!1,label:t&&t.allViews?t.allViews.components.includes("label"):!1},a=new w.Menu;return a.addItem(l=>{l.setTitle(n.icon?r("setting.item.option-visibility-component-visible-platform",{component:r("setting.item.option-component-icon"),platform:e}):r("setting.item.option-visibility-component-hidden-platform",{component:r("setting.item.option-component-icon"),platform:e})).setIcon("image").setChecked(n.icon).onClick(async p=>{n.icon?(Dt(t,"icon"),n.icon=!1):(kt(t,"icon"),n.icon=!0),this.toolbar.updated=new Date().toISOString(),await this.plugin.settingsManager.save();let[d,c]=this.getPlatformStateLabel(t,e);this.updateItemVisButton(o,d,c)})}),a.addItem(l=>{l.setTitle(n.label?r("setting.item.option-visibility-component-visible-platform",{component:r("setting.item.option-component-label"),platform:e}):r("setting.item.option-visibility-component-hidden-platform",{component:r("setting.item.option-component-label"),platform:e})).setIcon("whole-word").setChecked(n.label).onClick(async p=>{n.label?(Dt(t,"label"),n.label=!1):(kt(t,"label"),n.label=!0),this.toolbar.updated=new Date().toISOString(),await this.plugin.settingsManager.save();let[d,c]=this.getPlatformStateLabel(t,e);this.updateItemVisButton(o,d,c)})}),a}getPlatformStateLabel(t,e){var o;if(t&&t.allViews){let n=(o=t.allViews)==null?void 0:o.components;if(n)return n.length===2?["",r("setting.item.option-visibility-visible-platform",{platform:e})]:n.length===1?[n[0]==="icon"?r("setting.item.option-component-icon"):n[0]==="label"?r("setting.item.option-component-label"):n[0],r("setting.item.option-visibility-component-visible-platform",{component:n[0],platform:e})]:[r("setting.item.option-visibility-hidden"),r("setting.item.option-visibility-hidden-platform",{platform:e})]}return[r("setting.item.option-visibility-hidden"),r("setting.item.option-visibility-hidden-platform",{platform:e})]}getStyleDisclaimersFr(t,e){let o=document.createDocumentFragment();return e.forEach(n=>{t.find(a=>n in a)&&o.append(o.createEl("br"),"* ",this.getValueForKey(t,n))}),o}getValueForKey(t,e){let o=t.find(n=>e in n);return o?Object.values(o)[0]:""}setFieldError(t,e){if(t){let o=t.closest(".setting-item-control");if((o==null?void 0:o.querySelector(".note-toolbar-setting-field-error"))===null){let n=createEl("div",{text:e,cls:"note-toolbar-setting-field-error"});t.insertAdjacentElement("afterend",n),t.addClass("note-toolbar-setting-error")}}}setFieldHelp(t,e){let o=document.createDocumentFragment();o.append(e);let n=createDiv();n.addClass("note-toolbar-setting-field-help"),n.append(o);let a=t.querySelector(".note-toolbar-setting-field-help");a==null||a.remove(),n&&t.insertAdjacentElement("beforeend",n)}removeFieldError(t){var e;if(t){let o=t.closest(".setting-item-control");(e=o==null?void 0:o.querySelector(".note-toolbar-setting-field-error"))==null||e.remove(),t==null||t.removeClass("note-toolbar-setting-error")}}renderPreview(t,e){e=e||this.getItemRowEl(t.uuid);let o=e.querySelector(".note-toolbar-setting-item-preview");o==null||o.empty();let n=createSpan();switch(o.setAttribute("data-item-type",t.linkAttr.type),t.linkAttr.type){case"break":(0,w.setTooltip)(o,r("setting.items.option-edit-item-type-tooltip",{itemType:t.linkAttr.type})),n.setText(r("setting.item.option-break")),o.append(n);break;case"separator":(0,w.setTooltip)(o,r("setting.items.option-edit-item-type-tooltip",{itemType:t.linkAttr.type})),n.setText(r("setting.item.option-separator")),o.append(n);break;case"group":let a=this.plugin.settingsManager.getToolbarById(t.link);(0,w.setTooltip)(o,r("setting.items.option-edit-item-group-tooltip",{toolbar:a?a.name:"",context:a?"":"none"})),a&&n.appendChild(At(a));break;default:(0,w.setTooltip)(o,r("setting.items.option-edit-item-tooltip"));let l=createSpan();l.addClass("note-toolbar-setting-item-preview-icon"),(0,w.setIcon)(l,t.icon?t.icon:"note-toolbar-none"),n.addClass("note-toolbar-setting-item-preview-label"),t.label?n.setText(t.label):t.tooltip?(n.setText(t.tooltip),n.addClass("note-toolbar-setting-item-preview-tooltip")):(n.setText(r("setting.items.option-item-empty-label")),n.addClass("note-toolbar-setting-item-preview-empty")),(0,w.getIcon)(t.icon)&&o.appendChild(l);break}if(w.Platform.isMobile){if(!["break","separator"].includes(t.linkAttr.type)){let a=createDiv();a.addClass("note-toolbar-setting-item-preview-edit-mobile");let l=createSpan();l.addClass("note-toolbar-setting-icon-button-cta"),(0,w.setIcon)(l,"lucide-pencil"),a.appendChild(n),a.appendChild(l),o.appendChild(a)}}else o.appendChild(n)}getIndexByUuid(t){let e=this.getItemListEls();return Array.prototype.findIndex.call(e,o=>o.getAttribute("data-item-uuid")===t)}getItemListEls(){return this.contentEl.querySelectorAll(".note-toolbar-sortablejs-list > div["+"data-item-uuid"+"]")}getItemRowEl(t){return this.contentEl.querySelector(".note-toolbar-sortablejs-list > div["+"data-item-uuid"+'="'+t+'"]')}};var Oe=require("obsidian");var Fe=class extends Oe.AbstractInputSuggest{constructor(t,e){super(t,e);this.PATTERN_ALL_FILES={pattern:"*",label:"*",desc:r("setting.display-rules.option-folder-all")};this.PATTERN_ROOT_ONLY={pattern:"/",label:"/",desc:r("setting.display-rules.option-folder-root")};this.inputEl=e}getSuggestions(t){let e=this.app.vault.getAllLoadedFiles(),o=[],n=t.toLowerCase();return o.push(this.PATTERN_ALL_FILES.pattern),e.forEach(a=>{a instanceof Oe.TFolder&&a.path.toLowerCase().contains(n)&&o.push(a.path)}),o}renderSuggestion(t,e){t===this.PATTERN_ALL_FILES.pattern?this.renderPattern(e,this.PATTERN_ALL_FILES):t===this.PATTERN_ROOT_ONLY.pattern?this.renderPattern(e,this.PATTERN_ROOT_ONLY):e.setText(t)}selectSuggestion(t){this.inputEl.value=t,this.inputEl.trigger("input"),this.inputEl.blur(),this.close()}renderPattern(t,e){t.addClass("note-toolbar-setting-folder-suggestion-item-muted"),t.createSpan().setText(e.label),t.createSpan().setText(e.desc)}};var _e=class extends M.PluginSettingTab{constructor(t,e){super(t,e);this.itemListOpen=!0;this.itemListIdCounter=0;this.app=t,this.plugin=e}openSettingsModal(t){let e=new ot(this.app,this.plugin,this,t);e.setTitle(r("setting.title-edit-toolbar",{toolbar:t.name})),e.open()}display(t,e=!1){let{containerEl:o}=this;if(o.empty(),this.plugin.settings.version!==ht&&new M.Setting(o).setName(r("setting.error-old-settings-name")).setDesc(r("setting.error-old-settings-description",{oldVersion:this.plugin.settings.version+"",currentVersion:ht+""})).setClass("note-toolbar-setting-plugin-error").setHeading(),ge(this.plugin,o),this.displayToolbarList(o),new M.Setting(o).setName(r("setting.display-rules.name")).setDesc(j(r("setting.display-rules.description"),"Defining-where-to-show-toolbars")).setHeading(),this.displayPropertySetting(o),this.displayFolderMap(o),this.displayOtherSettings(o),t){let n=this.containerEl.querySelector(t);n==null||n.focus(),e&&setTimeout(()=>{n==null||n.scrollIntoView(!0)},M.Platform.isMobile?100:0)}this.rememberLastPosition(this.containerEl),me(this.plugin)}displayToolbarList(t){let e=createDiv();e.addClass("note-toolbar-setting-items-container"),e.setAttribute("data-active",this.itemListOpen.toString());let o=new M.Setting(e).setName(r("setting.toolbars.name")).setDesc(r("setting.toolbars.description")).setHeading();this.plugin.settings.toolbars.length>0&&o.addExtraButton(a=>{a.setIcon("right-triangle").setTooltip(r("setting.toolbars.button-collapse-tbars-tooltip")).onClick(async()=>{let l=t.querySelector(".note-toolbar-setting-items-container");if(l){this.itemListOpen=!this.itemListOpen,l.setAttribute("data-active",this.itemListOpen.toString());let p=l.querySelector(".setting-item-info .setting-item-name");this.itemListOpen?p==null||p.setText(r("setting.toolbars.name")):p==null||p.setText(r("setting.toolbars.name-with-count",{count:this.plugin.settings.toolbars.length})),a.setTooltip(this.itemListOpen?r("setting.toolbars.button-collapse-tbars-tooltip"):r("setting.toolbars.button-expand-tbars-tooltip"))}}).extraSettingsEl.tabIndex=0,this.plugin.registerDomEvent(a.extraSettingsEl,"keydown",l=>{switch(l.key){case"Enter":case" ":l.preventDefault(),a.extraSettingsEl.click()}})});let n=createDiv();if(n.addClass("note-toolbar-setting-items-list-container"),this.plugin.settings.toolbars.length==0)n.createEl("div",{text:yt(r("setting.toolbars.label-empty-create-tbar"))}).className="note-toolbar-setting-empty-message";else{let a=createDiv();a.addClass("note-toolbar-setting-toolbar-list"),this.plugin.settings.toolbars.forEach(l=>{let p=new M.Setting(a).setName(l.name?l.name:r("setting.toolbars.label-tbar-name-not-set")).setDesc(At(l,this.plugin.settingsManager)).addButton(d=>{d.setIcon("copy-plus").setTooltip(r("setting.toolbars.button-duplicate-tbar-tooltip")).onClick(()=>{this.plugin.settingsManager.duplicateToolbar(l).then(c=>{this.display(`.note-toolbar-setting-toolbar-list > div[data-tbar-uuid="${c}"] > .setting-item-control > .mod-cta`)})})}).addButton(d=>{d.setTooltip(r("setting.toolbars.button-edit-tbar-tooltip")).setButtonText(r("setting.toolbars.button-edit-tbar")).onClick(()=>{this.openSettingsModal(l)})});p.settingEl.setAttribute("data-tbar-uuid",l.uuid),l.name||p.nameEl.addClass("mod-warning"),this.plugin.registerDomEvent(p.settingEl,"keydown",d=>{switch(d.key){case"d":(M.Platform.isWin||M.Platform.isLinux?d==null?void 0:d.ctrlKey:d==null?void 0:d.metaKey)&&this.plugin.settingsManager.duplicateToolbar(l).then(u=>{this.display(`.note-toolbar-setting-toolbar-list > div[data-tbar-uuid="${u}"] > .setting-item-control > .mod-cta`)})}})}),n.appendChild(a)}new M.Setting(n).setClass("note-toolbar-setting-button").addButton(a=>{a.setTooltip(r("setting.toolbars.button-new-tbar-tooltip")).setButtonText(r("setting.toolbars.button-new-tbar")).setCta().onClick(async()=>{let l={uuid:Q(),defaultStyles:["border","even","sticky"],items:[],mobileStyles:[],name:"",position:{desktop:{allViews:{position:"props"}},mobile:{allViews:{position:"props"}},tablet:{allViews:{position:"props"}}},updated:new Date().toISOString()};this.plugin.settings.toolbars.push(l),await this.plugin.settingsManager.save(),this.openSettingsModal(l)})}),e.appendChild(n),t.append(e)}displayPropertySetting(t){new M.Setting(t).setName(r("setting.display-rules.option-property")).setDesc(r("setting.display-rules.option-property-description")).addText(e=>e.setPlaceholder(r("setting.display-rules.option-property-placeholder")).setValue(this.plugin.settings.toolbarProp).onChange((0,M.debounce)(async o=>{this.plugin.settings.toolbarProp=o,await this.plugin.settingsManager.save()},750)))}displayFolderMap(t){if(new M.Setting(t).setName(r("setting.display-rules.option-folder-mappings")).setDesc(r("setting.display-rules.option-folder-mappings-description")).setClass("note-toolbar-setting-no-border"),this.plugin.settings.folderMappings.length==0)t.createEl("div",{text:yt(r("setting.display-rules.option-folder-mappings-empty"))}).className="note-toolbar-setting-empty-message";else{let o=createDiv();o.addClass("note-toolbar-sortablejs-list"),this.plugin.settings.folderMappings.forEach((n,a)=>{let l=this.itemListIdCounter.toString(),p=this.generateMappingForm(n,l);o.append(p),this.itemListIdCounter++});var e=Pe.create(o,{chosenClass:"sortable-chosen",ghostClass:"sortable-ghost",handle:".sortable-handle",onChange:n=>navigator.vibrate(50),onChoose:n=>navigator.vibrate(50),onSort:async n=>{h("sortable: index: ",n.oldIndex," -> ",n.newIndex),n.oldIndex!==void 0&&n.newIndex!==void 0&&(ce(this.plugin.settings.folderMappings,n.oldIndex,n.newIndex),await this.plugin.settingsManager.save())}});t.append(o)}new M.Setting(t).setClass("note-toolbar-setting-button").addButton(o=>{o.setTooltip(r("setting.display-rules.button-new-mapping-tooltip")).setButtonText(r("setting.display-rules.button-new-mapping")).setCta().onClick(async()=>{let n={folder:"",toolbar:""};this.plugin.settings.folderMappings.push(n),await this.plugin.settingsManager.save(),this.display('.note-toolbar-sortablejs-list > div:last-child input[type="search"]',!0)})})}generateMappingForm(t,e){let o=createDiv();o.className="note-toolbar-setting-folder-list-item-container",o.setAttribute("data-row-id",e);let n=createDiv();n.id="note-toolbar-setting-item-field-"+this.itemListIdCounter,n.className="note-toolbar-setting-item-fields";let a=new M.Setting(o).setClass("note-toolbar-setting-item-delete").addButton(u=>{u.setIcon("minus-circle").setTooltip(r("setting.button-delete-tooltip")).onClick(async()=>{let m=u.buttonEl.getAttribute("data-row-id");m&&this.listMoveHandlerById(null,m,"delete")}),u.buttonEl.setAttribute("data-row-id",e)}),l=new M.Setting(n).setClass("note-toolbar-setting-mapping-field").addSearch(u=>{new Fe(this.app,u.inputEl),u.setPlaceholder(r("setting.display-rules.placeholder-mapping-folder")).setValue(t.folder).onChange((0,M.debounce)(async m=>{var g;if(m&&this.plugin.settings.folderMappings.some((b,y)=>t!=b?b.folder.toLowerCase()===m.toLowerCase():void 0)){if(document.getElementById("note-toolbar-name-error")===null){let b=createEl("div",{text:r("setting.display-rules.error-folder-already-mapped"),attr:{id:"note-toolbar-name-error"},cls:"note-toolbar-setting-error-message"});o.insertAdjacentElement("afterend",b),o.children[0].addClass("note-toolbar-setting-error")}}else(g=document.getElementById("note-toolbar-name-error"))==null||g.remove(),o.children[0].removeClass("note-toolbar-setting-error"),t.folder=m?(0,M.normalizePath)(m):"",await this.plugin.settingsManager.save()},250))}),p=new M.Setting(n).setClass("note-toolbar-setting-mapping-field").addSearch(u=>{new Lt(this.app,this.plugin,u.inputEl),u.setPlaceholder(r("setting.display-rules.placeholder-mapping-toolbar")).setValue(this.plugin.settingsManager.getToolbarName(t.toolbar)).onChange((0,M.debounce)(async m=>{let g=this.plugin.settingsManager.getToolbarByName(m);g&&(t.toolbar=g.uuid,await this.plugin.settingsManager.save())},250))}),d=createDiv();d.addClass("note-toolbar-setting-item-controls");let c=new M.Setting(d).addExtraButton(u=>{u.setIcon("grip-horizontal").setTooltip(r("setting.button-drag-tooltip")).extraSettingsEl.addClass("sortable-handle"),u.extraSettingsEl.setAttribute("data-row-id",this.itemListIdCounter.toString()),u.extraSettingsEl.tabIndex=0,this.plugin.registerDomEvent(u.extraSettingsEl,"keydown",m=>{let b=m.target.getAttribute("data-row-id");h("rowId",b),b&&this.listMoveHandlerById(m,b)})});return o.append(n),o.append(d),o}displayOtherSettings(t){new M.Setting(t).setName(r("setting.other.name")).setHeading(),new M.Setting(t).setName(r("setting.other.icon.name")).setDesc(r("setting.other.icon.description")).addButton(e=>{e.setIcon(this.plugin.settings.icon).setTooltip(r("setting.other.icon.tooltip")).onClick(async o=>{o.preventDefault(),new wt(this.plugin,this.plugin.settings,e.buttonEl).open()}),e.buttonEl.setAttribute("data-note-toolbar-no-icon",this.plugin.settings.icon?"false":"true"),e.buttonEl.setAttribute("tabindex","0"),this.plugin.registerDomEvent(e.buttonEl,"keydown",o=>{switch(o.key){case"Enter":case" ":o.preventDefault(),new wt(this.plugin,this.plugin.settings,e.buttonEl).open()}})}),new M.Setting(t).setName(r("setting.other.ribbon-action.name")).setDesc(j(r("setting.other.ribbon-action.description"),"Navigation-bar")).addDropdown(e=>e.addOptions(Mo).setValue(this.plugin.settings.ribbonAction).onChange(async o=>{this.plugin.settings.ribbonAction=o,await this.plugin.settingsManager.save()})),new M.Setting(t).setName(r("setting.other.show-edit-tbar.name")).setDesc(r("setting.other.show-edit-tbar.description")).addToggle(e=>{e.setValue(this.plugin.settings.showEditInFabMenu),e.onChange(async o=>{this.plugin.settings.showEditInFabMenu=o,await this.plugin.settingsManager.save()})})}async listMoveHandler(t,e,o){if(t)switch(t.key){case"ArrowUp":t.preventDefault(),o="up";break;case"ArrowDown":t.preventDefault(),o="down";break;case"Delete":case"Backspace":t.preventDefault(),o="delete";case"Enter":case" ":t.preventDefault();break;default:return}switch(o){case"up":Vt(this.plugin.settings.folderMappings,e,e-1);break;case"down":Vt(this.plugin.settings.folderMappings,e,e+1),t==null||t.preventDefault();break;case"delete":this.plugin.settings.folderMappings.splice(e,1),t==null||t.preventDefault();break}await this.plugin.settingsManager.save(),this.display()}async listMoveHandlerById(t,e,o){let n=this.getIndexByRowId(e);h("listMoveHandlerById: moving index:",n),await this.listMoveHandler(t,n,o)}rememberLastPosition(t){h("rememberLastPosition:",t),t.scrollTo({top:this.lastScrollPosition,behavior:"auto"}),this.plugin.registerDomEvent(t,"scroll",e=>{this.lastScrollPosition=t.scrollTop})}getIndexByRowId(t){let e=this.getItemListEls();return Array.prototype.findIndex.call(e,o=>o.getAttribute("data-row-id")===t)}getItemListEls(){return this.containerEl.querySelectorAll(".note-toolbar-sortablejs-list > div[data-row-id]")}};var So=require("obsidian");var Ve=class{constructor(i){this.plugin=i}deleteToolbar(i){this.plugin.settings.toolbars=this.plugin.settings.toolbars.filter(t=>t.uuid!==i)}async duplicateToolbar(i){h("duplicateToolbar",i);let t={uuid:Q(),defaultStyles:JSON.parse(JSON.stringify(i.defaultStyles)),items:[],mobileStyles:JSON.parse(JSON.stringify(i.mobileStyles)),name:this.getUniqueToolbarName(i.name),position:JSON.parse(JSON.stringify(i.position)),updated:new Date().toISOString()};return i.items.forEach(e=>{this.duplicateToolbarItem(t,e)}),h("duplicateToolbar: duplicated",t),this.plugin.settings.toolbars.push(t),this.plugin.settings.toolbars.sort((e,o)=>e.name.localeCompare(o.name)),await this.plugin.settingsManager.save(),t.uuid}duplicateToolbarItem(i,t,e=!1){h("duplicateToolbarItem",t);let o=JSON.parse(JSON.stringify(t));if(o.uuid=Q(),h("duplicateToolbarItem: duplicated",o),e){let n=i.items.indexOf(t);n!==-1&&i.items.splice(n+1,0,o)}else i.items.push(o);return o.uuid}getMappedToolbar(i,t){var l,p;h("getMappedToolbar()");let e,o=this.plugin.settings.toolbarProp,n=!1,a=(l=i==null?void 0:i[o])!=null?l:null;if(a!==null&&(a.includes("none")&&(n=!0),n||(e=this.getToolbarFromProps(a))),!e&&!n){let d,c;for(let u=0;u<this.plugin.settings.folderMappings.length&&(d=this.plugin.settings.folderMappings[u],c=((p=t.parent)==null?void 0:p.path)==="/"?"/":t.path.toLowerCase(),!((["*"].includes(d.folder)||c.toLowerCase().startsWith(d.folder.toLowerCase()))&&(e=this.getToolbarById(d.toolbar),e)));u++);}return e}getToolbarById(i){return i?this.plugin.settings.toolbars.find(t=>t.uuid===i):void 0}getToolbarByName(i){return i?this.plugin.settings.toolbars.find(t=>t.name.toLowerCase()===i.toLowerCase()):void 0}getToolbarFromProps(i){if(i)return typeof i=="string"?this.getToolbarByName(i):this.plugin.settings.toolbars.find(t=>i.some(e=>t.name.toLowerCase()===e.toLowerCase()))}getToolbarItemById(i){if(i)for(let t of this.plugin.settings.toolbars){let e=t.items.find(o=>o.uuid===i);if(e)return e}}getToolbarName(i){var e;let t=(e=this.plugin.settings.toolbars.find(o=>o.uuid===i))==null?void 0:e.name;return t||""}getToolbarPosition(i){var e,o,n,a;let t;return So.Platform.isDesktop?t=(o=(e=i.position.desktop)==null?void 0:e.allViews)==null?void 0:o.position:So.Platform.isMobile&&(t=(a=(n=i.position.mobile)==null?void 0:n.allViews)==null?void 0:a.position),t}getUniqueToolbarName(i){let t=i,e=1,o=this.plugin.settings.toolbars.map(n=>n.name);for(;o.includes(t);)t=`${i} ${r("setting.toolbars.duplicate-file-suffix")}${e>1?` ${e}`:""}`,e++;return t}async load(){var o,n,a,l,p,d,c,u;let i=await this.plugin.loadData();h("loadSettings: loaded settings: ",i),this.plugin.settings=Object.assign({},Do,i);let t=i==null?void 0:i.version,e;i&&t!==ht&&(h("loadSettings: versions do not match: data.json: ",t," !== latest: ",ht),h("running migrations..."),t||(e=202403181e-1,h("- starting migration: "+t+" -> "+e),(o=i.toolbars)==null||o.forEach((m,g)=>{m.styles&&(h("	- OLD SETTING: "+m.styles),h("		- SETTING: this.plugin.settings.toolbars[index].defaultStyles: "+this.plugin.settings.toolbars[g].defaultStyles),this.plugin.settings.toolbars[g].defaultStyles=m.styles,h("		- SET: "+this.plugin.settings.toolbars[g].defaultStyles),h("		- SETTING: this.plugin.settings.toolbars[index].mobileStyles = []"),this.plugin.settings.toolbars[g].mobileStyles=[],delete m.styles)}),t=e),t===202403181e-1&&(e=202403221e-1,h("- starting migration: "+t+" -> "+e),(n=i.toolbars)==null||n.forEach((m,g)=>{m.items.forEach((b,y)=>{b!=null&&b.urlAttr||(h("  - add urlAttr for: ",m.name,b.label),b.urlAttr={hasVars:!0,isUri:!0})})}),t=e),t===202403221e-1&&(e=202403301e-1,h("- starting migration: "+t+" -> "+e),(a=i.toolbars)==null||a.forEach((m,g)=>{m.items.forEach((b,y)=>{this.plugin.settings.toolbars[g].items[y].icon="",b.url&&(this.plugin.settings.toolbars[g].items[y].link=b.url,delete b.url),b.urlAttr&&(this.plugin.settings.toolbars[g].items[y].linkAttr={commandId:"",hasVars:b.urlAttr.hasVars,type:b.urlAttr.isUri?"uri":"file"},delete b.urlAttr)})}),t=e),t===202403301e-1&&(e=202404161e-1,h("- starting migration: "+t+" -> "+e),(l=i.toolbars)==null||l.forEach((m,g)=>{m.items.forEach((b,y)=>{this.plugin.settings.toolbars[g].items[y].contexts=[{platform:this.migrateItemVisPlatform(b.hideOnDesktop,b.hideOnMobile),view:"all"}],delete b.hideOnDesktop,delete b.hideOnMobile}),this.plugin.settings.toolbars[g].positions=[{position:"props",contexts:[{platform:"all",view:"all"}]}]}),t=e),t===202404161e-1&&(e=202404261e-1,h("- starting migration: "+t+" -> "+e),(p=i.toolbars)==null||p.forEach((m,g)=>{var b;this.plugin.settings.toolbars[g].positions&&((b=this.plugin.settings.toolbars[g].positions)==null||b.forEach((y,v)=>{var C;this.plugin.settings.toolbars[g].position={},y.contexts&&((C=y.contexts)==null||C.forEach((D,P)=>{if(y.position)switch(D.platform){case"desktop":this.plugin.settings.toolbars[g].position.desktop={allViews:{position:y.position}};break;case"mobile":this.plugin.settings.toolbars[g].position.mobile={allViews:{position:y.position}},this.plugin.settings.toolbars[g].position.tablet={allViews:{position:y.position}};break;case"all":this.plugin.settings.toolbars[g].position.desktop={allViews:{position:y.position}},this.plugin.settings.toolbars[g].position.mobile={allViews:{position:y.position}},this.plugin.settings.toolbars[g].position.tablet={allViews:{position:y.position}};break}}))}),delete this.plugin.settings.toolbars[g].positions),m.items.forEach((y,v)=>{var C;this.plugin.settings.toolbars[g].items[v].contexts&&((C=this.plugin.settings.toolbars[g].items[v].contexts)==null||C.forEach((D,P)=>{if(!this.plugin.settings.toolbars[g].items[v].visibility)switch(this.plugin.settings.toolbars[g].items[v].visibility={},D.platform){case"desktop":this.plugin.settings.toolbars[g].items[v].visibility.desktop={allViews:{components:["icon","label"]}};break;case"mobile":this.plugin.settings.toolbars[g].items[v].visibility.mobile={allViews:{components:["icon","label"]}},this.plugin.settings.toolbars[g].items[v].visibility.tablet={allViews:{components:["icon","label"]}};break;case"all":this.plugin.settings.toolbars[g].items[v].visibility.desktop={allViews:{components:["icon","label"]}},this.plugin.settings.toolbars[g].items[v].visibility.mobile={allViews:{components:["icon","label"]}},this.plugin.settings.toolbars[g].items[v].visibility.tablet={allViews:{components:["icon","label"]}};break;case"none":default:break}}),delete this.plugin.settings.toolbars[g].items[v].contexts)})}),t=e),t===202404261e-1&&(e=202407271e-1,h("- starting migration: "+t+" -> "+e),(d=i.toolbars)==null||d.forEach((m,g)=>{this.plugin.settings.toolbars[g].uuid=this.plugin.settings.toolbars[g].uuid?this.plugin.settings.toolbars[g].uuid:Q()}),(c=i.toolbars)==null||c.forEach((m,g)=>{m.items.forEach((b,y)=>{if(this.plugin.settings.toolbars[g].items[y].uuid=this.plugin.settings.toolbars[g].items[y].uuid?this.plugin.settings.toolbars[g].items[y].uuid:Q(),b.linkAttr.type==="menu"){let v=this.getToolbarByName(b.link);v&&(this.plugin.settings.toolbars[g].items[y].link=v==null?void 0:v.uuid)}})}),(u=i.folderMappings)==null||u.forEach((m,g)=>{let b=this.getToolbarByName(m.toolbar);b&&(this.plugin.settings.folderMappings[g].toolbar=b.uuid)}),t=e),this.plugin.settings.version=ht,h("updated settings:",this.plugin.settings),await this.save())}async save(){await this.plugin.saveData(this.plugin.settings),await this.plugin.removeActiveToolbar(),await this.plugin.renderToolbarForActiveFile(),h("SETTINGS SAVED: "+new Date().getTime())}migrateItemVisPlatform(i,t){return!i&&!t?"all":i&&t?"none":t?"desktop":i?"mobile":"all"}};var z=require("obsidian");var li=require("obsidian");var Wt=class extends li.SuggestModal{constructor(t,e){super(t.app);this.modalEl.addClass("note-toolbar-setting-item-suggester-dialog"),this.plugin=t,this.activeFile=e,this.setPlaceholder(r("setting.toolbar-suggest-modal.placeholder")),this.setInstructions([{command:"\u2191\u2193",purpose:r("setting.toolbar-suggest-modal.instruction-navigate")},{command:"\u21B5",purpose:r("setting.toolbar-suggest-modal.instruction-use")},{command:"esc",purpose:r("setting.toolbar-suggest-modal.instruction-dismiss")}])}getSuggestions(t){let e=this.plugin.settings.toolbars,o=[],n=t.toLowerCase();return e.forEach(a=>{a.name.toLowerCase().includes(n)&&o.push(a)}),o}renderSuggestion(t,e){e.createSpan().setText(t.name)}async onChooseSuggestion(t,e){h("onChooseSuggestion: ",t,e),this.close(),this.plugin.commands.openItemSuggester(t.uuid)}};var Be=class extends z.SuggestModal{constructor(t,e,o){super(t.app);this.modalEl.addClass("note-toolbar-setting-item-suggester-dialog"),this.plugin=t,this.activeFile=e,this.toolbarId=o,this.setPlaceholder(r("setting.item-suggest-modal.placeholder"));let n=[];o&&n.push({command:r("setting.item-suggest-modal.key-back"),purpose:r("setting.item-suggest-modal.instruction-back")}),n.push({command:r("setting.item-suggest-modal.key-navigate"),purpose:r("setting.item-suggest-modal.instruction-navigate")},{command:r("setting.item-suggest-modal.key-use"),purpose:r("setting.item-suggest-modal.instruction-use")},{command:r("setting.item-suggest-modal.key-dismiss"),purpose:r("setting.item-suggest-modal.instruction-dismiss")}),this.setInstructions(n),z.Platform.isWin||z.Platform.isLinux?(this.scope.register(["Ctrl"],"Enter",a=>this.handleKeyboardSelection(a)),this.scope.register(["Ctrl","Alt"],"Enter",a=>this.handleKeyboardSelection(a))):(this.scope.register(["Meta"],"Enter",a=>this.handleKeyboardSelection(a)),this.scope.register(["Meta","Alt"],"Enter",a=>this.handleKeyboardSelection(a))),o&&(this.scope.register([],"ArrowLeft",a=>this.handleKeyboardSelection(a)),this.scope.register([],"Backspace",a=>this.handleKeyboardSelection(a)))}getSuggestions(t){let e=[];if(this.toolbarId){let l=this.plugin.settingsManager.getToolbarById(this.toolbarId);e=l?[l]:[]}else e=this.plugin.settings.toolbars;let o=[],n=t.toLowerCase();e.forEach(l=>{l.items.forEach(p=>{let d=p.label||p.tooltip;d||(d=p.icon?p.link:"");let c=(p.label+p.tooltip+p.link).toLowerCase();if(d&&p.linkAttr.type!=="menu"&&c.includes(n)){let[u,m,g]=Qt(p.visibility);(z.Platform.isMobile&&m||z.Platform.isDesktop&&u)&&!(R(p.link)&&Z(this.app,p.link,this.activeFile,!1)==="")&&!(R(d)&&Z(this.app,d,this.activeFile,!1)==="")&&o.push(p)}})});let a=Array.from(new Set(o.map(l=>`${(l.label||l.tooltip).toLowerCase()}|${l.link}`))).map(l=>{let[p,d]=l.split("|");return o.find(c=>(c.label||c.tooltip).toLowerCase()===p&&c.link===d)});return a.sort((l,p)=>{let d=v=>v.replace(/[^\p{L}\p{N}]/gu,"").toLowerCase(),c=d(l.label||l.tooltip||""),u=d(p.label||p.tooltip||""),m=d((R(l.label)?"":l.label)||(R(l.tooltip)?"":l.tooltip)),g=d((R(p.label)?"":p.label)||(R(p.tooltip)?"":p.tooltip)),b=m.includes(n),y=g.includes(n);return b&&!y?-1:!b&&y?1:c.localeCompare(u)}),a}renderSuggestion(t,e){if(e.addClass("note-toolbar-item-suggestion"),e.setAttribute("id",t.uuid),t.icon&&(0,z.getIcon)(t.icon)){let u=e.createSpan();(0,z.setIcon)(u,t.icon)}let o=e.createSpan();var n=t.label||t.tooltip;n||(n=t.icon?t.link:""),o.addClass("note-toolbar-item-suggester-name");let a=o.createSpan(),l=o.createSpan(),p=R(n)?Z(this.app,n,this.activeFile,!1):n;switch(l.addClass("note-toolbar-item-suggester-type"),t.linkAttr.type){case"command":(0,z.setTooltip)(l,r("setting.item.option-command"));break;case"file":(0,z.setIcon)(l,"file"),(0,z.setTooltip)(l,r("setting.item.option-file"));break;case"uri":(0,z.setIcon)(l,"globe"),(0,z.setTooltip)(l,r("setting.item.option-uri"));break}a.setText(p);let d=this.inputEl.value.toLowerCase();if(!p.toLowerCase().includes(d)){let c=t.label.toLowerCase().includes(d)?t.label:t.tooltip.toLowerCase().includes(d)?t.tooltip:t.link,u=a.createDiv();u.addClass("note-toolbar-item-suggester-note"),u.setText(c)}}async handleKeyboardSelection(t){switch(t.key){case"ArrowLeft":case"Backspace":if(this.toolbarId&&this.inputEl.value===""){this.close();let n=this.plugin.app.workspace.getActiveFile();new Wt(this.plugin,n).open()}break;default:let e=this.modalEl.querySelector(".note-toolbar-item-suggestion.is-selected"),o=e!=null&&e.id?this.plugin.settingsManager.getToolbarItemById(e==null?void 0:e.id):void 0;o&&this.onChooseSuggestion(o,t);break}}async onChooseSuggestion(t,e){h("onChooseSuggestion: ",t,this.activeFile,e),this.close(),await this.plugin.handleItemLink(t,e)}};var ri=require("obsidian"),He=class{constructor(i){this.plugin=i}async focus(){var e;h("focusCommand()");let i=this.plugin.getToolbarEl();switch(i==null?void 0:i.getAttribute("data-tbar-position")){case"fabr":case"fabl":let o=i==null?void 0:i.querySelector("button.cg-note-toolbar-fab");h("focusCommand: button: ",o),o.click();break;case"props":case"top":let n=this.plugin.getToolbarListEl();if(n){h("focusCommand: toolbar: ",n);let l=Array.from(n.children).filter(d=>{let c=d.querySelector("span")!==null,u=window.getComputedStyle(d).getPropertyValue("display")!=="none";return c&&u}),p=l[0]?l[0].querySelector("span"):null;h("focusCommand: focussed item: ",p),(e=l[0])==null||e.addClass("tbar-item-focused"),p==null||p.focus()}break;case"hidden":default:break}}async openItemSuggester(i){let t=this.plugin.app.workspace.getActiveFile();new Be(this.plugin,t,i).open()}async openSettings(){let i=this.plugin.app.setting;i.open(),i.openTabById("note-toolbar")}async openToolbarSettings(){let i=this.plugin.getToolbarEl(),t=i?this.plugin.settingsManager.getToolbarById(i==null?void 0:i.id):void 0;if(t){let e=new ot(this.plugin.app,this.plugin,null,t);e.setTitle(r("setting.title-edit-toolbar",{toolbar:t.name})),e.open()}}async openToolbarSuggester(){let i=this.plugin.app.workspace.getActiveFile();new Wt(this.plugin,i).open()}async toggleProps(i){let t=this.plugin.getPropsEl(),e=this.plugin.app.workspace.getActiveViewOfType(ri.MarkdownView);if(h("togglePropsCommand: ","visibility: ",i,"props: ",t),t&&!e.editMode.sourceMode){let o=getComputedStyle(t).getPropertyValue("display");switch(i==="toggle"&&(o==="none"?i="show":i="hide"),i){case"show":t.style.display="var(--metadata-display-editing)",t.classList.contains("is-collapsed")&&t.querySelector(".metadata-properties-heading").click();break;case"hide":t.style.display="none";break;case"fold":t.classList.contains("is-collapsed")||t.querySelector(".metadata-properties-heading").click();break}}}};async function pi(s,i,t){h("%c\u{1F7E1} Experimental: This function will be deleted.","color: #f00"),h("> plugin = ",s),h("> buttonId = ",i),t("< Hello back from Note Toolbar!")}var Re=class{constructor(i){this.plugin=i}initialize(){return{testCallback:this.testCallback()}}testCallback(){return async(i,t)=>pi(this.plugin,i,t)}};var Ue=class extends E.Plugin{constructor(){super(...arguments);this.lastCalloutLink=null;this.fileMenuListener=(t,e)=>{let o=this.app.metadataCache.getFileCache(e);if(o){let n=this.settingsManager.getMappedToolbar(o.frontmatter,e);n&&(E.Platform.isMobile?n&&this.renderMenuItems(t,n,e,1):t.addItem(a=>{a.setIcon(this.settings.icon).setTitle(n?n.name:"");let l=a.setSubmenu();n&&this.renderMenuItems(l,n,e)}))}};this.fileOpenListener=t=>{var e;t!=null&&(h("file-open: "+t.name),this.checkAndRenderToolbar(t,(e=this.app.metadataCache.getFileCache(t))==null?void 0:e.frontmatter))};this.fileRenameListener=(t,e)=>{h("fileRenameListener:",t,e),this.settings.toolbars.forEach(o=>{o.items.forEach(n=>{n.link===e&&(h("fileRenameListener: changing",n.link,"to",t.path),n.link=t.path)})})};this.layoutChangeListener=()=>{let t=this.app.workspace.getActiveViewOfType(E.MarkdownView),e=t==null?void 0:t.getMode();switch(h("===== LAYOUT-CHANGE ===== ",e),e){case"source":case"preview":h("layout-change: ",e," -> re-rendering toolbar");let o=this.getToolbarEl(),n=o==null?void 0:o.getAttribute("data-tbar-position");h("layout-change: position: ",n),n==="props"&&this.removeActiveToolbar(),this.app.workspace.onLayoutReady((0,E.debounce)(()=>{h("LAYOUT READY"),this.renderToolbarForActiveFile()},e==="preview"?200:0));break;default:return}};this.leafChangeListener=t=>{var n;h("===== LEAF-CHANGE ===== ",t);let e=!1,o=this.app.workspace.getActiveViewOfType(E.MarkdownView);o&&(e=["source","preview"].includes(o.getMode())),h((n=o==null?void 0:o.file)==null?void 0:n.path,o==null?void 0:o.leaf.id),e&&(this.removeActiveToolbar(),this.renderToolbarForActiveFile())};this.metadataCacheListener=(t,e,o)=>{h("metadata-changed: "+t.name),this.app.workspace.getActiveFile()===t&&this.checkAndRenderToolbar(t,o.frontmatter)}}async onload(){this.settingsManager=new Ve(this),await this.settingsManager.load(),this.registerEvent(this.app.workspace.on("active-leaf-change",this.leafChangeListener)),this.registerEvent(this.app.metadataCache.on("changed",this.metadataCacheListener)),this.registerEvent(this.app.workspace.on("layout-change",this.layoutChangeListener)),this.registerEvent(this.app.workspace.on("file-menu",this.fileMenuListener)),this.registerEvent(this.app.vault.on("rename",this.fileRenameListener)),this.commands=new He(this),this.addCommand({id:"focus",name:r("command.name-focus"),callback:async()=>this.commands.focus()}),this.addCommand({id:"open-item-suggester",name:r("command.name-item-suggester"),callback:async()=>this.commands.openItemSuggester()}),this.addCommand({id:"open-toolbar-suggester",name:r("command.name-toolbar-suggester"),callback:async()=>this.commands.openToolbarSuggester()}),this.addCommand({id:"open-settings",name:r("command.name-settings"),callback:async()=>this.commands.openSettings()}),this.addCommand({id:"open-toolbar-settings",name:r("command.name-toolbar-settings"),callback:async()=>this.commands.openToolbarSettings()}),this.addCommand({id:"show-properties",name:r("command.name-show-properties"),callback:async()=>this.commands.toggleProps("show")}),this.addCommand({id:"hide-properties",name:r("command.name-hide-properties"),callback:async()=>this.commands.toggleProps("hide")}),this.addCommand({id:"fold-properties",name:r("command.name-fold-properties"),callback:async()=>this.commands.toggleProps("fold")}),this.addCommand({id:"toggle-properties",name:r("command.name-toggle-properties"),callback:async()=>this.commands.toggleProps("toggle")}),this.registerObsidianProtocolHandler("note-toolbar",async t=>this.protocolHandler(t)),h("\u{1F7E1} ONLOAD: EXTERNAL LINK: HANDLER SETUP"),this.registerEvent(this.app.workspace.on("window-open",t=>{this.registerDomEvent(t.doc,"click",e=>{this.calloutLinkHandler(e)})})),this.registerDomEvent(activeDocument,"click",t=>{t.target.matches(".cg-note-toolbar-container")||this.removeFocusStyle(),this.calloutLinkHandler(t)}),(0,E.addIcon)("note-toolbar-empty",'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" class="svg-icon note-toolbar-empty\u201D></svg>'),(0,E.addIcon)("note-toolbar-none",'<svg xmlns="http://www.w3.org/2000/svg" width="0" height="24" viewBox="0 0 0 24" fill="none" class="svg-icon note-toolbar-none"></svg>'),(0,E.addIcon)("note-toolbar-separator",'<path d="M23.4444 35.417H13.7222C8.35279 35.417 4 41.6988 4 44V55.5C4 57.8012 8.35279 64.5837 13.7222 64.5837H23.4444C28.8139 64.5837 33.1667 57.8012 33.1667 55.5L33.1667 44C33.1667 41.6988 28.8139 35.417 23.4444 35.417Z" fill="none" stroke="currentColor" stroke-width="7" stroke-linecap="round" stroke-linejoin="round"/><path d="M86.4444 35.417H76.7222C71.3528 35.417 67 41.6988 67 44V55.5C67 57.8012 71.3528 64.5837 76.7222 64.5837H86.4444C91.8139 64.5837 96.1667 57.8012 96.1667 55.5L96.1667 44C96.1667 41.6988 91.8139 35.417 86.4444 35.417Z" stroke="currentColor" stroke-width="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><path d="M49.8333 8.33301V91.6663" stroke="currentColor" stroke-width="7" stroke-linecap="round" stroke-linejoin="round"/>'),E.Platform.isPhone&&this.addRibbonIcon(this.settings.icon,r("plugin.name"),t=>this.ribbonMenuHandler(t)),this.addSettingTab(new _e(this.app,this)),this.app.workspace.trigger("parse-style-settings"),this.api=new Re(this).initialize(),h("LOADED"),this.app.workspace.onLayoutReady(()=>{h("onload: rendering initial toolbar"),this.renderToolbarForActiveFile()})}async onunload(){this.removeAllToolbars(),h("UNLOADED")}async onExternalSettingsChange(){h("onExternalSettingsChange()")}async checkAndRenderToolbar(t,e){h("checkAndRenderToolbar()");let o=this.settingsManager.getMappedToolbar(e,t),n=this.removeToolbarIfNeeded(o);o&&(n&&(h("-- RENDERING TOOLBAR: ",o," for file: ",t),await this.renderToolbar(o)),await this.updateToolbar(o,t))}async renderToolbar(t){var l,p,d,c,u,m;h("renderToolbar()",t);let e;E.Platform.isMobile?e=(d=(p=(l=t.position.mobile)==null?void 0:l.allViews)==null?void 0:p.position)!=null?d:"props":e=(m=(u=(c=t.position.desktop)==null?void 0:c.allViews)==null?void 0:u.position)!=null?m:"props";let o=this.app.workspace.getActiveViewOfType(E.MarkdownView),n,a=activeDocument.createElement("div");switch(a.addClass("cg-note-toolbar-container"),t.uuid&&(a.id=t.uuid),a.setAttrs({"data-name":t.name,"data-updated":t.updated,"data-tbar-position":e}),e){case"fabl":case"fabr":n=await this.renderToolbarAsFab(e),e==="fabl"&&n.setAttribute("data-fab-position","left"),a.append(n),this.registerDomEvent(a,"click",b=>this.toolbarFabHandler(b,n)),this.registerDomEvent(n,"contextmenu",b=>this.toolbarContextMenuHandler(b));break;case"props":case"top":n=await this.renderToolbarAsCallout(t);let g=activeDocument.createElement("div");g.append(n),a.addClasses(["cm-embed-block","cm-callout","cg-note-toolbar-bar-container"]),a.append(g),this.registerDomEvent(a,"contextmenu",b=>this.toolbarContextMenuHandler(b)),this.registerDomEvent(a,"keydown",b=>this.toolbarKeyboardHandler(b));break;case"hidden":default:break}switch(e){case"fabl":case"fabr":o==null||o.containerEl.appendChild(a);break;case"top":a.addClass("cg-note-toolbar-position-top");let g=o==null?void 0:o.containerEl.querySelector(".view-header");g?g.insertAdjacentElement("afterend",a):h("\u{1F6D1} renderToolbarFromSettings: Unable to find .view-header to insert toolbar");break;case"hidden":case"props":default:let b=this.getPropsEl();b||h("\u{1F6D1} renderToolbarFromSettings: Unable to find .metadata-container to insert toolbar"),b==null||b.insertAdjacentElement("afterend",a);break}}async renderToolbarAsCallout(t){let e=activeDocument.createElement("ul");e.setAttribute("role","menu");let o=await this.renderToolbarLItems(t);e.append(...o);let n=activeDocument.createElement("div");if(t.items.length>0){let a=activeDocument.createElement("div");a.className="callout-content",a.append(e),n.className="callout cg-note-toolbar-callout",n.setAttribute("data-callout","note-toolbar"),n.setAttribute("data-callout-metadata",[...t.defaultStyles,...t.mobileStyles].join("-")),n.append(a)}return n}async renderToolbarLItems(t,e=0){if(e>=2)return[];let o=[];for(let n of t.items){if(n.label===""&&n.icon===""&&!["break","group","separator"].includes(n.linkAttr.type))continue;let a,[l,p,d]=Qt(n.visibility);switch(n.linkAttr.type){case"break":case"separator":a=activeDocument.createElement("data"),a.setAttribute(n.linkAttr.type==="break"?"data-ntb-break":"data-ntb-sep",""),a.setAttribute("role","separator");break;case"group":let c=this.settingsManager.getToolbarById(n.link);if(c&&(E.Platform.isMobile&&p||E.Platform.isDesktop&&l)){let C=await this.renderToolbarLItems(c,e+1);o.push(...C)}break;default:a=activeDocument.createElement("span"),n.uuid&&(a.id=n.uuid),a.className="external-link",a.setAttrs({href:n.link,role:"link",rel:"noopener"}),a.tabIndex=0,Object.entries(n.linkAttr).forEach(([C,D])=>{a==null||a.setAttribute(`data-toolbar-link-attr-${C}`,D)}),n.tooltip&&(0,E.setTooltip)(a,n.tooltip,{placement:"top"}),this.registerDomEvent(a,"click",C=>this.toolbarClickHandler(C)),this.registerDomEvent(a,"auxclick",C=>this.toolbarClickHandler(C));let[u,m,g,b,y,v]=No(n.visibility);if(n.label)if(n.icon){let C=a.createSpan();this.setComponentDisplayClass(C,u,g),(0,E.setIcon)(C,n.icon);let D=a.createSpan();this.setComponentDisplayClass(D,m,b),D.innerText=n.label,D.addClass("cg-note-toolbar-item-label")}else this.setComponentDisplayClass(a,m,b),a.innerText=n.label,a.addClass("cg-note-toolbar-item-label");else this.setComponentDisplayClass(a,u,g),(0,E.setIcon)(a,n.icon);break}if(a){let c=activeDocument.createElement("li");p||c.addClass("hide-on-mobile"),l||c.addClass("hide-on-desktop"),c.append(a),o.push(c)}}return o}async renderToolbarAsFab(t){let e=activeDocument.createElement("div");e.addClass("cg-note-toolbar-fab-container"),e.setAttrs({role:"group","data-tbar-position":t});let o=activeDocument.createElement("button");return o.addClass("cg-note-toolbar-fab"),o.setAttribute("aria-label",r("toolbar.button-floating-tooltip")),(0,E.setIcon)(o,this.settings.icon),e.append(o),e}async renderToolbarAsMenu(t,e,o=!1){let n=new E.Menu;return await this.renderMenuItems(n,t,e),o&&(n.addSeparator(),n.addItem(a=>{a.setTitle(r("toolbar.menu-edit-toolbar",{toolbar:t.name})).setIcon("lucide-pen-box").onClick(l=>{let p=new ot(this.app,this,null,t);p.setTitle(r("setting.title-edit-toolbar",{toolbar:t.name})),p.open()})})),n}async renderMenuItems(t,e,o,n=0){if(!(n>=2))for(let a of e.items){let[l,p,d]=Qt(a.visibility);if(E.Platform.isMobile&&p||E.Platform.isDesktop&&l){let c=a.label?R(a.label)?Z(this.app,a.label,o,!1):a.label:R(a.tooltip)?Z(this.app,a.tooltip,o,!1):a.tooltip;switch(a.linkAttr.type){case"break":case"separator":t.addSeparator();break;case"group":let u=this.settingsManager.getToolbarById(a.link);u&&await this.renderMenuItems(t,u,o,n+1);break;case"menu":if(!E.Platform.isMobile){if(n>=1)break;t.addItem(m=>{m.setIcon(a.icon&&(0,E.getIcon)(a.icon)?a.icon:"note-toolbar-empty").setTitle(c);let g=m.setSubmenu(),b=this.settingsManager.getToolbarById(a.link);b&&this.renderMenuItems(g,b,o,n+1)});break}default:if(R(a.link)&&Z(this.app,a.link,o,!1)==="")break;t.addItem(m=>{m.setIcon(a.icon&&(0,E.getIcon)(a.icon)?a.icon:"note-toolbar-empty").setTitle(c).onClick(async g=>{h(g,a.link,a.linkAttr,a.contexts),await this.handleItemLink(a,g),a.linkAttr.type!=="menu"&&(await this.removeFocusStyle(),this.app.commands.executeCommandById("editor:focus"))})});break}}}}async renderToolbarForActiveFile(){var e;let t=this.app.workspace.getActiveFile();if(t){let o=t?(e=this.app.metadataCache.getFileCache(t))==null?void 0:e.frontmatter:void 0;this.checkAndRenderToolbar(t,o)}}setComponentDisplayClass(t,e,o){t.removeClasses(["hide","hide-on-desktop","hide-on-mobile"]),!e&&!o?t.addClass("hide"):(!e&&t.addClass("hide-on-desktop"),!o&&t.addClass("hide-on-mobile"))}async showMenuAtElement(t,e){h("showMenuAtElement()",e);let o;if(e){let n=e.getBoundingClientRect();o={x:n.x,y:n.bottom,overlap:!0,left:!1},localStorage.setItem("note-toolbar-menu-pos",JSON.stringify(o))}if(!o){let n=localStorage.getItem("note-toolbar-menu-pos");o=n?JSON.parse(n):void 0}t.dom.addClass("note-toolbar-menu"),o&&(t.showAtPosition(o),o.left||activeWindow.innerWidth-(o.x+t.dom.offsetWidth)<=2&&(h("\u2B05\uFE0F repositioned menu"),t.showAtPosition({x:activeWindow.innerWidth,y:o.y,overlap:!0,left:!0})))}async updateToolbar(t,e){let o=this.getToolbarEl();h("updateToolbar()",o);let n=o==null?void 0:o.getAttribute("data-name"),a=o==null?void 0:o.getAttribute("data-updated");if(o===null||t.name!==n||t.updated!==a)return;o.querySelectorAll(".callout-content > ul > li").forEach((p,d)=>{let c=p.querySelector("span.external-link");if(!c)return;let u=this.settingsManager.getToolbarItemById(c.id);if(u&&c.id===u.uuid){if(R(u.link))if(Z(this.app,u.link,e,!1)===""){p.addClass("hide");return}else p.removeClass("hide");if(R(u.tooltip)){let m=Z(this.app,u.tooltip,e,!1);(0,E.setTooltip)(c,m,{placement:"top"})}if(R(u.label)){let m=Z(this.app,u.label,e,!1),g=p.querySelector(".cg-note-toolbar-item-label");m?(g==null||g.removeClass("hide"),g==null||g.setText(m)):(g==null||g.addClass("hide"),g==null||g.setText(""))}}})}async calloutLinkHandler(t){var a;if(t.target.matches('.callout[data-callout="note-toolbar"] a.external-link')){h("\u{1F7E1} EXTERNAL LINK: CLICKED"),this.lastCalloutLink=t.target;let l=(a=this.lastCalloutLink)==null?void 0:a.nextElementSibling;if(this.lastCalloutLink&&l){var o=Object.values(Ye).find(p=>l==null?void 0:l.hasAttribute(p));o&&t.preventDefault();var n=o?l==null?void 0:l.getAttribute(o):null;switch(h("\u{1F7E1} EXTERNAL LINK",o,n),o){case"data-ntb-command":this.handleLinkCommand(n);break;case"data-ntb-folder":this.handleLinkFolder(n);break;case"data-ntb-menu":let p=this.app.workspace.getActiveFile(),d=this.settingsManager.getToolbarByName(n);d=d||this.settingsManager.getToolbarById(n),p&&(d?this.renderToolbarAsMenu(d,p).then(c=>{this.showMenuAtElement(c,this.lastCalloutLink)}):new E.Notice(r("notice.error-item-menu-not-found",{toolbar:n})));break}}}}async handleItemLink(t,e){await this.handleLink(t.link,t.linkAttr.type,t.linkAttr.hasVars,t.linkAttr.commandId,e)}async handleLink(t,e,o,n,a){var p,d;h("handleLink",t,e,o,n,a),this.app.workspace.trigger("note-toolbar:item-activated","test");let l=this.app.workspace.getActiveFile();switch(o&&(t=Z(this.app,t,l,!1),h("- uri vars replaced: ",t)),e){case"command":this.handleLinkCommand(n);break;case"file":let c=l?l.path:"";h("- openLinkText: ",t," from: ",c);let u=this.app.vault.getAbstractFileByPath(t);u instanceof E.TFolder?this.app.internalPlugins.getEnabledPluginById("file-explorer").revealInFolder(u):this.app.workspace.openLinkText(t,c,no(a));break;case"menu":let m=this.settingsManager.getToolbarById(t);h("- menu item for toolbar",m,l),m&&l?this.renderToolbarAsMenu(m,l).then(g=>{let b=(a==null?void 0:a.targetNode).closest(".external-link");this.showMenuAtElement(g,b),a instanceof KeyboardEvent&&Po()}):m||new E.Notice(r("notice.error-item-menu-not-found",{toolbar:t}));break;case"uri":if(Lo(t))window.open(t,"_blank");else{let g=(d=(p=this.app.workspace.getActiveFile())==null?void 0:p.path)!=null?d:"";this.app.workspace.openLinkText(t,g,no(a))}break}}async handleLinkCommand(t){h("handleLinkCommand()",t),t&&(t in this.app.commands.commands?t&&this.app.commands.executeCommandById(t):new E.Notice(r("notice.error-command-not-found",{command:t})))}async handleLinkFolder(t){h("handleLinkFolder()",t);let e=t?this.app.vault.getAbstractFileByPath(t):void 0;e instanceof E.TFolder?this.app.internalPlugins.getEnabledPluginById("file-explorer").revealInFolder(e):new E.Notice(r("notice.error-folder-not-found",{folder:t}))}async protocolHandler(t){if(h("protocolHandler()",t),t.commandid||t.command)this.handleLinkCommand(decodeURIComponent(t.commandid||t.command));else if(t.folder)this.handleLinkFolder(t.folder);else if(t.help)new Bt(this).open();else if(t.menu){let e=this.app.workspace.getActiveFile(),o=this.settingsManager.getToolbarByName(t.menu);o=o||this.settingsManager.getToolbarById(t.menu),e&&(o?this.renderToolbarAsMenu(o,e).then(n=>{this.showMenuAtElement(n,this.lastCalloutLink)}):new E.Notice(r("notice.error-item-menu-not-found",{toolbar:t.menu})))}else if(t.toolbarsettings){let e;if(t.toolbarsettings.length>0)e=this.settingsManager.getToolbarByName(t.toolbarsettings),e||new E.Notice(r("notice.error-toolbar-not-found",{toolbar:t.toolbarsettings}));else{let o=this.getToolbarEl();e=o?this.settingsManager.getToolbarById(o==null?void 0:o.id):void 0}if(e){let o=new ot(this.app,this,null,e);o.setTitle(r("setting.title-edit-toolbar",{toolbar:e.name})),o.open()}}else t.whatsnew&&new It(this).open()}async ribbonMenuHandler(t){var e;switch(this.settings.ribbonAction){case"item-suggester":await this.commands.openItemSuggester();break;case"toolbar-suggester":await this.commands.openToolbarSuggester();break;case"toolbar":let o=this.app.workspace.getActiveFile();if(o){let n=o?(e=this.app.metadataCache.getFileCache(o))==null?void 0:e.frontmatter:void 0,a=this.settingsManager.getMappedToolbar(n,o);a&&this.renderToolbarAsMenu(a,o,this.settings.showEditInFabMenu).then(l=>{l.dom.addClass("note-toolbar-menu"),l.showAtPosition(t)})}break}}async toolbarFabHandler(t,e){var n;h("toolbarFabHandler: ",t),t.preventDefault();let o=this.app.workspace.getActiveFile();if(o){let a=o?(n=this.app.metadataCache.getFileCache(o))==null?void 0:n.frontmatter:void 0,l=this.settingsManager.getMappedToolbar(a,o);l&&this.renderToolbarAsMenu(l,o,this.settings.showEditInFabMenu).then(p=>{let d=this.getToolbarFabEl();if(d){let c=d.getAttribute("data-tbar-position"),u=e.getBoundingClientRect(),m={x:c==="fabl"?u.x:u.x+u.width,y:u.top-4,overlap:!0,left:c!=="fabl"};localStorage.setItem("note-toolbar-menu-pos",JSON.stringify(m)),p.dom.addClass("note-toolbar-menu"),p.showAtPosition(m)}})}}async toolbarKeyboardHandler(t){var o,n,a;h("toolbarKeyboardHandler: ",t);let e=this.getToolbarListEl();if(e){t.key&&["ArrowRight","ArrowDown","ArrowLeft","ArrowUp","Enter","Shift","Tab"," "].includes(t.key)&&t.preventDefault();let p=Array.from(e.children).filter(m=>{let g=m.querySelector("span")!==null,b=window.getComputedStyle(m).getPropertyValue("display")!=="none";return g&&b}),d=(o=activeDocument.activeElement)==null?void 0:o.parentElement,c=p.indexOf(d),u=t.key;switch(t.key==="Tab"&&(u=t.shiftKey?"ArrowLeft":"ArrowRight"),u){case"ArrowRight":case"ArrowDown":let m=(c+1)%p.length;h(d),d.removeClass("tbar-item-focused"),p[m].addClass("tbar-item-focused"),(n=p[m].querySelector("span"))==null||n.focus();break;case"ArrowLeft":case"ArrowUp":let g=(c-1+p.length)%p.length;d.removeClass("tbar-item-focused"),p[g].addClass("tbar-item-focused"),(a=p[g].querySelector("span"))==null||a.focus();break;case"Enter":case" ":let b=activeDocument==null?void 0:activeDocument.activeElement,y=this.settingsManager.getToolbarItemById(b==null?void 0:b.id);y&&await this.handleItemLink(y,t);break;case"Escape":let v=this.app.workspace.getActiveViewOfType(E.MarkdownView);(v==null?void 0:v.getMode())==="preview"&&(activeDocument==null?void 0:activeDocument.activeElement).blur(),d.tagName==="LI"&&d.closest(".cg-note-toolbar-callout")?d.addClass("tbar-item-focused"):await this.removeFocusStyle();break}}}async removeFocusStyle(){h("removeFocusStyle()");let t=this.getToolbarListEl();t&&Array.from(t.children).forEach(e=>{e.removeClass("tbar-item-focused")})}async toolbarClickHandler(t){if(h("toolbarClickHandler()",t),t.type==="click"||t.type==="auxclick"&&t.button===1){let e=t.currentTarget,o=e.getAttribute("href");if(o!=null){let n=e.getAttribute("data-toolbar-link-attr-type");n&&Object.values(Ct).includes(n)&&t.preventDefault(),h("toolbarClickHandler: ","clickedEl: ",e);let a=e.getAttribute("data-toolbar-link-attr-hasVars")?e.getAttribute("data-toolbar-link-attr-hasVars")==="true":!0,l=e.getAttribute("data-toolbar-link-attr-commandid");(t==null?void 0:t.pointerType)==="mouse"&&(e.blur(),await this.removeFocusStyle()),await this.handleLink(o,n,a,l,t)}}}async toolbarContextMenuHandler(t){t.preventDefault();let e=t.target.closest(".cg-note-toolbar-container"),o=e!=null&&e.id?this.settingsManager.getToolbarById(e.id):void 0,n=new E.Menu;if(o&&n.addItem(a=>{a.setTitle(r("toolbar.menu-edit-toolbar",{toolbar:o==null?void 0:o.name})).setIcon("lucide-pen-box").onClick(l=>{let p=new ot(this.app,this,null,o);p.setTitle(r("setting.title-edit-toolbar",{toolbar:o==null?void 0:o.name})),p.open()})}),n.addItem(a=>{a.setTitle(r("toolbar.menu-toolbar-settings")).setIcon("lucide-wrench").onClick(l=>{this.commands.openSettings()})}),o!==void 0){let a=this.settingsManager.getToolbarPosition(o);(a==="props"||a==="top")&&(n.addSeparator(),n.addItem(l=>{l.setTitle(a==="props"?r("toolbar.menu-position-top"):r("toolbar.menu-position-props")).setIcon(a==="props"?"arrow-up-to-line":"arrow-down-narrow-wide").onClick(p=>{let d=a==="props"?"top":"props";o!=null&&o.position&&(E.Platform.isDesktop?o.position.desktop={allViews:{position:d}}:o.position.mobile={allViews:{position:d}},o.updated=new Date().toISOString(),this.settingsManager.save())})}))}n.showAtPosition(t)}getPropsEl(){let t=this.app.workspace.getActiveViewOfType(E.MarkdownView),e=activeDocument.querySelector(".workspace-leaf.mod-active .markdown-"+(t==null?void 0:t.getMode())+"-view .metadata-container");return h("getPropsEl: ",".workspace-leaf.mod-active .markdown-"+(t==null?void 0:t.getMode())+"-view .metadata-container"),e}getToolbarEl(){let t=activeDocument.querySelector(".workspace-leaf.mod-active .cg-note-toolbar-container");return h("getToolbarEl()",t),t}getToolbarListEl(){return activeDocument.querySelector(".workspace-leaf.mod-active .cg-note-toolbar-container .callout-content > ul")}getToolbarFabEl(){return activeDocument.querySelector(".cg-note-toolbar-fab-container")}async removeActiveToolbar(){let t=activeDocument.querySelector(".workspace-leaf.mod-active .cg-note-toolbar-container");h("removeActiveToolbar: existingToolbar: ",t),t==null||t.remove()}async removeAllToolbars(){activeDocument.querySelectorAll(".cg-note-toolbar-container").forEach(e=>{e.remove()})}removeToolbarIfNeeded(t){let e=!1,o=this.getToolbarEl();if(h("removeToolbarIfNeeded() correct:",t,"existing:",o),o){let n=o==null?void 0:o.getAttribute("data-name"),a=o.getAttribute("data-updated"),l=o.nextElementSibling;t?t.name!==n?(h("- toolbar needed, removing existing toolbar (name does not match): "+n),e=!0):t.updated!==a?(h("- existing toolbar out of date, removing existing toolbar"),e=!0):l!=null&&l.hasClass("inline-title")&&(h("- not in the correct position (sibling is `inline-title`), removing existing toolbar"),e=!0):(h("- toolbar not needed, removing existing toolbar: "+n),e=!0),e&&(o.remove(),o=null)}else h("- no existing toolbar"),e=!0;return e||h("removeToolbarIfNeeded: nothing done"),e}};
/*! Bundled license information:

sortablejs/modular/sortable.esm.js:
  (**!
   * Sortable 1.15.3
   * @author	RubaXa   <trash@rubaxa.org>
   * @author	owenm    <owen23355@gmail.com>
   * @license MIT
   *)
*/
